import{bk as _,cV as k,aH as E,j as T,k as C,b1 as G,dr as M,b$ as P,gi as I,ei as b,ak as p,aq as w,a_ as y}from"./citrwydz0bgriwlc.js";import{e8 as S,eV as A,eW as D,eL as L,eX as q,eY as x,eZ as N}from"./krbmwir12ubt4od1.js";import{r as d,p as O}from"./b8ijctzpgh0s7wpx.js";import{g as U}from"./c2d9eukr2hh7n3q0.js";function z({ctx:e,clientThreadId:t,threadState:s,searchParams:o,planType:a,isModelSticky:r}){if(s?.modelId)return s.modelId;if(!_(t))return;const n=o?.get("model");if(n&&!S(e,n))return n;const c=A();return c&&!S(e,c)&&r?c:D(a,k(e))}function W(e,t,s,o="short"){if(e!==void 0){if(t){const{modelLabel:a,fullModelLabel:r}=U(e,t);return o==="short"?a:r}switch(e){case"auto":return"";case"gpt-4o":return o==="short"?"4o":"GPT-4o";case"gpt-4o-mini":return o==="short"?"4o mini":"GPT-4o mini";case"gpt-4o-jawbone":return s.formatMessage({id:"8y5npr",defaultMessage:"Tasks"});case"gpt-4":return o==="short"?"4":"GPT-4";case"gpt-4-5":return o==="short"?"4.5":"GPT-4.5";case"o1":return"o1";case"o1-pro":return"o1 pro";case"o3-mini":case"o3-mini-high":case"o4-mini":case"o4-mini-high":case"o3":return e;default:return}}}const v=E(void 0);function F(e){const t=T(),s=w()?.planType,[o]=O(),a=M(e),r=a&&y(a),n=N();return z({ctx:t,clientThreadId:e,threadState:r,searchParams:o,planType:s,isModelSticky:!!n})}const X=({conversationId:e})=>{const t=T(),{voiceName:s}=L(),o=C(t,"3529298638").get("enabled",!1),a=G(t,"2209667701")||o,r=M(e),n=q(),c=d.useRef(!1),l=x(i=>i.isVoiceModeActive),f=P(),m=F(e)??I,u=d.useMemo(()=>({conversation_id:r??null,requested_voice_mode:"advanced",gizmo_id:f??null,voice:s??null,requested_default_model:m}),[r,s,f,m]);return d.useEffect(()=>{!a||c.current||l||(c.current=!0,n(u,"voice-status-cache").then(i=>{const{chatreq:g}=i;v.set({...i,proofOfWorkPromise:new Promise((h,V)=>{g?b.getEnforcementToken(g).then(h).catch(V):h(null)})})}).catch(i=>{i.code==="conversation_not_found"?p.addAction("voice-status-cache-conversation-not-found",{conversationId:u.conversation_id}):p.addError(new Error("Voice status cache failed"),i),v.set(void 0)}).finally(()=>{c.current=!1}))},[u,n,a,l]),null};export{X as V,z as a,v as b,W as g};
//# sourceMappingURL=nhujhl3wh6ze4xx0.js.map
