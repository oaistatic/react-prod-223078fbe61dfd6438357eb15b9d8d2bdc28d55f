import{i as Y,r as p,j as n,M as c,e as E,c as k}from"./b8ijctzpgh0s7wpx.js";import{H as x}from"./h3krx8dg2s8o2yh5.js";import{aO as N,aP as O,aQ as M,aR as _,aS as I}from"./krbmwir12ubt4od1.js";const f=E({historyBucketToday:{id:"history.bucket.today",defaultMessage:"Today"},historyBucketYesterday:{id:"history.bucket.yesterday",defaultMessage:"Yesterday"},historyBucketLastSeven:{id:"history.bucket.lastSeven",defaultMessage:"Previous 7 Days"},historyBucketLastThirty:{id:"history.bucket.lastThirty",defaultMessage:"Previous 30 Days"}}),v=5;function D(m,e){"use forget";const d=Y();return p.useMemo(()=>m.reduce((t,s)=>{const a=new Date(s.update_time??s.create_time??0),r=N(new Date,a);if(r===0)t.recent.today.items.push(s);else if(r<=1)t.recent.yesterday.items.push(s);else if(r<=7)t.recent.lastSeven.items.push(s);else if(r<=30)t.recent.lastThirty.items.push(s);else if(O(a)){const o=M(a),i=_(a),l=`${o}-${i}`;t.dynamicMonths[l]?t.dynamicMonths[l].items.push(s):t.dynamicMonths[l]={label:d.formatDate(a,{month:"long"}),items:[s]}}else{const i=`${M(a)}-`;t.dynamicYears[i]?t.dynamicYears[i].items.push(s):t.dynamicYears[i]={label:d.formatDate(a,{year:"numeric"}),items:[s]}}return t},{recent:{today:{label:n.jsx(c,{...f.historyBucketToday}),items:[]},yesterday:{label:n.jsx(c,{...f.historyBucketYesterday}),items:[]},lastSeven:{label:n.jsx(c,{...f.historyBucketLastSeven}),items:[]},lastThirty:{label:n.jsx(c,{...f.historyBucketLastThirty}),items:[]}},dynamicMonths:{},dynamicYears:{}}),[e,m])}function F(m){"use forget";const e=k.c(9),{activeId:d,items:t,hasNextPage:s,infiniteScrollTriggerElementRef:a,hideOverflowMenu:r}=m;let o;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=n.jsx(c,{id:"LAIMO2",defaultMessage:"Chats"}),e[0]=o):o=e[0];let i;e[1]!==d||e[2]!==s||e[3]!==r||e[4]!==a||e[5]!==t?(i=t.map((y,g)=>{const u=s&&t[t.length-v-1]?.id===y.id?a:void 0;return n.jsx(x,{conversation:y,hideOverflowMenu:r,isActive:d===y.id,elementRef:u,testId:`history-item-${g}`},y.id)}),e[1]=d,e[2]=s,e[3]=r,e[4]=a,e[5]=t,e[6]=i):i=e[6];let l;return e[7]!==i?(l=n.jsx(n.Fragment,{children:n.jsx(I,{label:o,children:i})}),e[7]=i,e[8]=l):l=e[8],l}function H(m){"use forget";const e=k.c(9),{activeId:d,bucketedItems:t,items:s,hasNextPage:a,infiniteScrollTriggerElementRef:r,hideOverflowMenu:o}=m;let i;return e[0]!==d||e[1]!==t.dynamicMonths||e[2]!==t.dynamicYears||e[3]!==t.recent||e[4]!==a||e[5]!==o||e[6]!==r||e[7]!==s?(i=n.jsx(n.Fragment,{children:[t.recent,t.dynamicMonths,t.dynamicYears].flatMap((l,y)=>n.jsx(p.Fragment,{children:Object.entries(l).map(g=>{const[u,T]=g,{items:b,label:j}=T;return u!=="today"&&!b.length?null:b.length>0&&n.jsx(I,{label:j,children:b.map((h,S)=>{const B=a&&s[s.length-v-1]?.id===h.id?r:void 0;return n.jsx(x,{conversation:h,hideOverflowMenu:o,isActive:d===h.id,elementRef:B,testId:`history-item-${S}`},h.id)})},u)})},`category-${y}`))}),e[0]=d,e[1]=t.dynamicMonths,e[2]=t.dynamicYears,e[3]=t.recent,e[4]=a,e[5]=o,e[6]=r,e[7]=s,e[8]=i):i=e[8],i}export{F as H,H as a,D as u};
//# sourceMappingURL=eigi8l95ddhoqirr.js.map
