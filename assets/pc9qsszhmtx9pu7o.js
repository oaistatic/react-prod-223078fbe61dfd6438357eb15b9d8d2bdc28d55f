import{i as x,r as d,j as e,a5 as U,M as w}from"./b8ijctzpgh0s7wpx.js";import{e$ as E,S as z,c as X,F as q,e as A,O as H}from"./citrwydz0bgriwlc.js";import{bt as j,bu as V,bv as D,bw as p,bx as k,by as J,bz as K,bA as b,bB as Q,bC as Y,bD as Z,b6 as ee,bE as te,b5 as ae,bF as se,bG as oe,aX as ne,bH as ie,bI as re}from"./krbmwir12ubt4od1.js";import{u as le}from"./cb2t82g498wwhuc2.js";import{I as de}from"./dera5bljhpg5ja89.js";const y="ChatGPT Image";function ce({imageAsset:t,serverThreadId:s}){const{config:i}=E("2248456840"),o=i.get("enabled",!1),a=x(),c=j(),r=d.useCallback(()=>{const g=new Date,h=a.formatDate(g,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"});return`${y} ${h}.png`},[a]),l=D({imageAssetPointer:t,serverThreadId:s}),f=d.useCallback(()=>{o&&l?p({url:l,fileName:r()}):p({url:t.url,fileName:r()}),k.download({analyticsContext:c})},[o,l,t,r,c]);return e.jsx(n,{tooltip:a.formatMessage({id:"imageEditorControls.downloadButtonTooltip",defaultMessage:"Save"}),onClick:f,children:e.jsx(ie,{})})}function ge({onClose:t}){const s=x();return e.jsx(n,{tooltip:s.formatMessage({id:"imageEditorControls.closeButtonTooltip",defaultMessage:"Close"}),onClick:t,children:e.jsx(z,{className:"icon-lg"})})}function je({imageAsset:t,mode:s,setMode:i,inpaintingDrawingState:o,isLoadingNewImage:a,onClose:c,onInpaintClick:r,messageId:l,clientThreadId:f,serverThreadId:g}){const{config:h}=E("2248456840"),C=j(),M=h.get("enabled",!1),{canUndoDrawing:v,undoDrawing:F,canRedoDrawing:N,redoDrawing:G}=o,m=x(),{rating:u,onLike:B,onDislike:_}=V(),[P,I]=d.useState(!1),S=d.useCallback(()=>{const R=new Date,$=m.formatDate(R,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"});return`${y} ${$}.png`},[m]),T=()=>{_(),I(!0)},W=D({imageAssetPointer:t,serverThreadId:g}),L=d.useCallback(()=>{p({url:t.url,fileName:S()}),k.download({analyticsContext:C})},[t,S,C]),O=J();return e.jsxs(e.Fragment,{children:[e.jsxs(U.div,{className:"grid h-16 w-full grid-cols-3 px-4",...K,children:[e.jsx("div",{className:"flex items-center justify-self-start text-start",children:e.jsx(ge,{onClose:c})}),e.jsx("div",{className:"flex flex-col items-center justify-center justify-self-center p-2",children:s===b.Selecting&&e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-token-text-primary font-semibold",children:e.jsx(w,{id:"imageEditorControls.imageName",defaultMessage:"Edit Selection"})})})}),e.jsx("div",{className:"flex items-center justify-self-end text-end",children:s===b.Selecting?e.jsxs(e.Fragment,{children:[e.jsx(n,{disabled:!v||a,onClick:F,children:e.jsx(Q,{})}),e.jsx(n,{disabled:!N||a,onClick:G,children:e.jsx(Y,{})}),e.jsx(me,{}),e.jsx(n,{onClick:()=>i(b.Default),disabled:a,children:e.jsx(w,{id:"imageEditorControls.cancelButtonLabel",defaultMessage:"Cancel"})})]}):e.jsxs(e.Fragment,{children:[u!==!1&&e.jsx(n,{tooltip:m.formatMessage({id:"imageEditorControls.likeButtonTooltip",defaultMessage:"Like"}),onClick:B,children:u===!0?e.jsx(Z,{}):e.jsx(ee,{})}),u!==!0&&e.jsx(n,{tooltip:m.formatMessage({id:"imageEditorControls.dislikeButtonTooltip",defaultMessage:"Dislike"}),onClick:T,children:u===!1?e.jsx(te,{}):e.jsx(ae,{})}),e.jsx(n,{tooltip:m.formatMessage({id:"imageEditorControls.inpaintButtonTooltip",defaultMessage:"Select"}),onClick:r,children:e.jsx(se,{className:"h-7 w-7 pe-1",fill:"black"})}),e.jsx(ce,{imageAsset:t,serverThreadId:g}),l&&O()&&e.jsx(ue,{clientThreadId:f,messageId:l}),M&&W&&e.jsx(oe,{onDownload:L,triggerClassName:"rounded-sm h-10 w-10 p-0 font-semibold hover:bg-token-main-surface-tertiary group-radix-state-open:bg-token-main-surface-tertiary text-token-text-secondary",iconClassName:"h-6 w-6",dropdownClassName:"z-50 min-w-fit origin-top-right text-token-text-primary"})]})})]}),P&&e.jsx(de,{messageId:l??"",serverThreadId:g??"",rating:u,onClose:()=>I(!1)})]})}function n({children:t,tooltip:s,disabled:i,onClick:o}){const a=e.jsx("button",{className:X("hover:bg-token-main-surface-tertiary group-radix-state-open:bg-token-main-surface-tertiary rounded-sm p-2 font-semibold max-sm:p-1.5",i?"text-token-text-quaternary":"text-token-text-secondary"),disabled:i,onClick:o,children:t});return s!=null?e.jsx(ne,{label:s,children:a}):a}const me=q.div`mx-3 w-[1px] h-6 bg-token-border-default`;function ue({clientThreadId:t,messageId:s}){const i=x(),[o,a]=d.useState(!1),c=le({clientThreadId:t,imageGenMessageId:s}),r=j();return d.useEffect(()=>{A.logEventWithStatsig("Share Post: Share Button Shown","chatgpt_post_share_button_shown",{source:"image_gen_editor_controls"})},[]),e.jsx(n,{tooltip:i.formatMessage({id:"imageEditorControls.share",defaultMessage:"Share image"}),onClick:async()=>{a(!0);try{await c()}finally{a(!1)}k.imageShared({analyticsContext:r,source:"image_gen_editor_controls"})},disabled:o,children:o?e.jsx(H,{}):e.jsx(re,{})})}export{je as I,ce as a,ge as b,n as c};
//# sourceMappingURL=pc9qsszhmtx9pu7o.js.map
