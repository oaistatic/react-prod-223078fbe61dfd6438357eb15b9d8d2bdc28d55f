const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/lv4erm15gca0tpk5.js","assets/citrwydz0bgriwlc.js","assets/b8ijctzpgh0s7wpx.js","assets/root-gxczc0vy.css","assets/krbmwir12ubt4od1.js","assets/conversation-small-dfayqh3x.css","assets/hfh0vi3mkklync1y.js","assets/j7fx9sn5hw11wqe0.js","assets/t1mhccn4rirludmz.js","assets/g64reurtt3avubtb.js","assets/49fkenytwa0np0h8.js","assets/b4v20hsjdnh8a64d.js","assets/ku4zsoy6w4wkp690.js","assets/k1h56nx2kjoqc52m.js","assets/exvo283q5zxd2q6r.js","assets/jekpe1ukp5thtucq.js","assets/dcml6fn13vfm1zv2.js","assets/nvghija6qp2cunds.js","assets/djd85tifm57yisqi.js","assets/h3krx8dg2s8o2yh5.js","assets/cfe0bfy5asp94vp2.js","assets/jkznwfhp8ahnvlot.js","assets/megablgldkh4lap1.js","assets/hbpbckirom363mgh.js","assets/izdon3syh095bs23.js","assets/dweroubxngal4vlb.js","assets/i7jya7stlyvnzya0.js","assets/cb2t82g498wwhuc2.js","assets/ndwtlsjk3xm27wkq.js","assets/o0ebhsapkoy5qkg1.js","assets/k7nub2yuxq70se07.js","assets/k6ccgr4wxcppeg93.js","assets/dbalwdodzoo02ru2.js","assets/c2d9eukr2hh7n3q0.js","assets/f1me09ge0a4pvkug.js","assets/j2c9fq73ntvfrlos.js","assets/o6iizogkfybkxcpa.js","assets/euq7ybw4dhrsufo2.js"])))=>i.map(i=>d[i]);
import{F as js,j as Q,m as se,be as Gt,bk as Ae,cq as _s,e as V,O as Ie,n as X,Q as st,_ as at,dL as ot,b1 as Le,bX as nt,l as te,c0 as Cs,aq as ve,au as ue,ba as Ms,cV as ks,aS as Ot,aQ as Ns,fo as Ts,c as F,a_ as Ps,B as Re,aH as Es,ae as As,gN as Is,aL as de,aM as q,a8 as Ht,bL as Wt,u as Ls,aY as Dt,cc as ye,cb as Rs,k as rt,c5 as ie,c6 as le,gl as Gs,s as vt,N as wt,ca as Os,b as Ge,d as Ft,dr as it,cQ as Hs,af as Ws,b$ as Ds,ak as jt,hd as Fs,a6 as Us,gG as zs,cT as Vs,aJ as Bs,aN as Ut,fc as qs,eR as Ys,a$ as Qs,gQ as $s}from"./citrwydz0bgriwlc.js";import{i as $,r as i,j as t,L as Oe,M as D,p as zt,f as lt,a as ct,a5 as Ze,e as Vt,c as we,l as Ks,u as Js,v as Xs,R as Zs}from"./b8ijctzpgh0s7wpx.js";import{u as Bt,d as ea,l as ta,P as sa}from"./ku4zsoy6w4wkp690.js";import{C as dt,d as ut,u as je}from"./nvghija6qp2cunds.js";import{oS as qt,cP as aa,X as mt,oT as oa,oU as Yt,cR as na,cS as ra,oV as ia,cm as _t,S as la,ft as Qt,dY as ce,ij as ca,oW as da,dI as $t,a6 as ua,jw as ma,V as Fe,da as ha,eZ as ga,l1 as Ct,oX as pa,N as ht,jU as fa,ae as xa,oY as He,gN as Kt,oZ as _e,jO as ba,dq as ya,o_ as Jt,jQ as Sa,iC as Xt,jb as va,h as Mt,ja as wa,o$ as ja,k0 as _a,bI as kt,p0 as Ca,by as Ma,j6 as Zt,dC as ka,dD as Na,p1 as Ta,p2 as Te,aX as Ee,mQ as Je,fx as Pa,gx as Ea,fW as Aa,bH as Ia,bw as La,dE as Ra,t as et,p3 as Ga,dF as Oa,F as Ha,j9 as es,p4 as ts,p5 as Nt,p6 as Wa,p7 as Da,p8 as gt,p9 as Fa,co as Ua,pa as Se,e as ss,gr as za,gj as Va,U as We,P as Ba,pb as qa,pc as Ya,j4 as Qa,j5 as $a,j8 as Ka,pd as Tt,pe as Ja,aK as Xa,pf as Za,j2 as eo,pg as to,ph as so,pi as ao,oN as oo,or as no,pj as H,au as z,pk as ro,pl as io,pm as lo,cJ as as,dh as co,pn as uo,po as Pt,d as mo,ok as ho,pp as go,pq as po,pr as fo,fy as xo,u as bo,ps as os,eQ as yo,pt as So,jd as vo,gu as wo,je as jo,hX as _o,Y as Co,jh as Mo,jj as Et,pu as ko,pv as No,ji as To,eg as Po,ly as Eo,jc as Ao,dd as Io,pw as At,px as Lo,py as Ro,bT as Go,pz as Oo,nL as ns,pA as Ho,pB as Wo,pC as Do,pD as Fo,lf as Uo,pE as zo,pF as Vo,pG as Bo,pH as qo,pI as Yo,pJ as Qo,pK as $o,pL as Ko,pM as Jo,pN as Xo,pO as Zo,pP as en,oQ as tn,pQ as sn}from"./krbmwir12ubt4od1.js";import{C as an,N as on,g as nn}from"./b4v20hsjdnh8a64d.js";import{b as rn}from"./k6ccgr4wxcppeg93.js";import{P as rs,u as is}from"./exvo283q5zxd2q6r.js";import{u as ln,b as ls}from"./cb2t82g498wwhuc2.js";import{b as cn,P as dn,M as un,g as mn,F as hn,T as gn}from"./jkznwfhp8ahnvlot.js";import{I as pn}from"./oyzab3j7hun2568h.js";import{S as fn,T as xn}from"./pfex3j43xcablmav.js";import{u as cs,T as tt,g as bn}from"./c2d9eukr2hh7n3q0.js";import{g as yn,a as Sn,V as vn}from"./nhujhl3wh6ze4xx0.js";import"./m4qet7ipn6ha09it.js";const It=js.button`max-w-28 xs:max-w-40 sm:max-w-60 md:max-w-none group flex cursor-pointer items-center gap-1 rounded-lg py-1.5 ${({$shimmer:s})=>s?"loading-shimmer":""} px-1 text-lg hover:bg-token-main-surface-secondary radix-state-open:bg-token-main-surface-secondary font-semibold text-token-text-secondary overflow-hidden whitespace-nowrap`;function wn({conversation:s,gizmoResource:e,elementRef:o}){const a=se(s.id,r=>r?.title??null)??s.title;return t.jsx(Oe,{to:ua(s.id,e),children:t.jsx(ce.Item,{onSelect:()=>{V.logEventWithStatsig("Projects: Breadcrumb Picker Pick Conversation","chatgpt_web_projects_breadcrumb_picker_pick_conversation")},icon:ma,children:t.jsx("div",{ref:o,children:a})},s.id)})}function jn({gizmoId:s,clientThreadId:e,inMobileHeader:o,modelLabel:n}){const a=Q(),r=$(),m=qt(),c=cs(e,m),{name:x}=aa(),_=x?na:ra,{data:f}=mt(s),{items:y,hasNextPage:b,fetchNextPage:l,isLoading:d,isFetchingNextPage:p}=oa(s),S=i.useRef(null),h=i.useCallback(M=>{d||M==null||(S.current?.disconnect(),S.current=new IntersectionObserver(E=>{E[0].isIntersecting&&b&&l()}),S.current.observe(M))},[d,b,l]);i.useEffect(()=>()=>{S.current?.disconnect()},[]);const[g,v,w]=se(e,M=>[M?.isLoading,M?.title??null,X.getThreadTitleSource(M)]),u=Gt(a).checkGate("1733239976"),{showEmptyState:C}=Yt(e),j=r.formatMessage(_.newChatTitle),T=ia(e);if(!f||C)return null;const P=v==null&&(Ae(e)||w===_s.NewChat),R=g?t.jsx(t.Fragment,{}):t.jsxs(It,{$shimmer:P,children:[t.jsxs("div",{className:"truncate",children:[T?t.jsx(da,{text:v??""}):v??j,t.jsx("span",{className:"bg-token-main-surface-secondary text-token-text-secondary relative bottom-[1px] mx-1 inline-block rounded-md px-1 text-xs leading-4",children:n})]}),t.jsx($t,{className:"icon-sm text-token-text-tertiary"})]}),W=f.gizmo.display.name;return t.jsxs("div",{className:"flex items-center gap-0 overflow-hidden px-2 py-1.5 whitespace-nowrap",children:[t.jsx(It,{children:t.jsx(Oe,{className:"truncate",to:_t(a,f),children:W})}),t.jsxs(t.Fragment,{children:[t.jsx(la,{className:"icon-sm text-token-text-tertiary"}),t.jsxs(Qt,{contentAlign:o?"center":"start",size:"small",onOpenChange:M=>{M&&V.logEventWithStatsig("Projects: Breadcrumb Picker Open","chatgpt_web_projects_breadcrumb_picker_open")},triggerButton:R,contentClassName:"max-h-[50dvh] overflow-y-scroll",children:[!u&&t.jsxs(ce.Sub,{onOpenChange:M=>{M&&V.logEventWithStatsig("Projects: Breadcrumb Picker Model Picker Open","chatgpt_web_projects_breadcrumb_picker_model_picker_open")},children:[t.jsx(ce.SubMenuTrigger,{children:t.jsxs("div",{className:"flex w-full items-center justify-between gap-1",children:[t.jsx(D,{id:"ilkdMh",defaultMessage:"Model"}),t.jsx("span",{className:"text-token-text-secondary text-xs font-medium",children:n})]})}),t.jsx(ce.Portal,{children:t.jsx(ce.SubContent,{onClick:()=>{V.logEventWithStatsig("Projects: Breadcrumb Picker Model Picker Select","chatgpt_web_projects_breadcrumb_picker_model_picker_select")},children:t.jsx(tt,{sections:c})})})]}),u&&t.jsx(tt,{sections:c}),!u&&t.jsxs(t.Fragment,{children:[t.jsx(Oe,{to:_t(a,f),children:t.jsx(ce.Item,{onSelect:()=>{V.logEventWithStatsig("Projects: Breadcrumb Picker Pick New Chat","chatgpt_web_projects_breadcrumb_picker_pick_new_chat")},icon:ca,children:t.jsx(D,{..._.newChatProjectDropdownItem,values:{name:`"${f.gizmo.display.name}"`}})},"new-chat")}),y.filter(M=>M.id!==e).map((M,E)=>{const G=b&&E===y.length-4?h:void 0;return t.jsx(wn,{elementRef:G,conversation:M,gizmoResource:f},M.id)}),p&&t.jsx("div",{className:"m-4 mb-5 flex justify-center",children:t.jsx(Ie,{})})]})]})]})]})}const _n=st(()=>at(()=>import("./lv4erm15gca0tpk5.js"),__vite__mapDeps([0,1,2,3,4,5,6])).then(s=>s.ThreadHeaderGizmoDropdown)),Cn=({clientThreadId:s,shouldShowFinchSection:e})=>{const o=qt(),n=cs(s,o,e);return t.jsx(tt,{sections:n})};function Mn({clientThreadId:s,inMobileHeader:e}){const o=Q(),{isLoading:n,data:a}=nt(),r=Cs(),[m]=zt(),c=ve(),x=c?.planType,_=ga(),f=se(s,v=>Sn({ctx:o,clientThreadId:s,threadState:v,searchParams:m,planType:x,isModelSticky:!!_})),y=$(),b=yn(f,a,y),{isUnauthenticated:l}=ue(),d=!l&&x!==Ms.FREE||ks(o);d&&(Ct.markStart("ThreadModelSelector"),b!=null&&Ct.markRendered("ThreadModelSelector"));const p=t.jsx("div",{children:d?t.jsxs(t.Fragment,{children:[He," ",t.jsx("span",{className:"text-token-text-tertiary",children:b})]}):He}),S=i.useMemo(()=>Ot(o)?pa(o,c,r,a):!1,[o,c,a,r]),h=ht(v=>v.shouldShowThreadModelPickerDot),g=t.jsxs(fa,{style:{viewTransitionName:"var(--vt-thread-model-switcher)"},"aria-label":b?y.formatMessage({id:"JrtGPQ",defaultMessage:"Model selector, current model is {modelLabel}"},{modelLabel:b}):"",children:[p,t.jsx($t,{className:"icon-sm text-token-text-tertiary"}),h&&t.jsx(xa,{color:"blue",className:"ms-1"})]});return n?g:t.jsx(Qt,{alignOffset:-4,size:"small",triggerButton:g,onOpenChange:v=>{V.logEvent("Toggle Model Switcher",{isOpen:v}),Ns.logEvent("toggle_model_switcher",null,{isOpen:String(v)})},contentAlign:e?"center":"start",testId:"model-switcher-dropdown",children:t.jsx(Cn,{clientThreadId:s,shouldShowFinchSection:S})})}function Lt({clientThreadId:s,inMobileHeader:e=!1}){const o=ot(s),n=Q(),a=Fe(o),r=Le(n,"3786438384"),{showEmptyState:m}=Yt(s),{data:c}=mt(o),{data:x}=nt(),f=ha(s).id,{value:y}=te("1213809372"),{value:b}=te("1854238036"),l=y||b,{modelLabel:d}=bn(f,x),p=t.jsx(Mn,{clientThreadId:s,inMobileHeader:e});return o==null||a&&r?p:a?m&&c?p:t.jsx(jn,{modelLabel:d??"",gizmoId:o,clientThreadId:s,inMobileHeader:e}):t.jsx(_n,{clientThreadId:s,gizmoId:o,inMobileHeader:e,showGizmoModelPicker:l})}const kn=({assetPointer:s,isInFocusMode$:e,serverThreadId:o,transformationId:n,width:a,height:r,onEdit:m})=>{const c=Kt(),[x,_]=i.useState(!1),[f]=se(o,g=>[g?.modelId]),y=Bt(o),b=_e(),l=lt(),d=ct(),p=i.useRef(null);i.useEffect(()=>{cn.prefetch()},[]),i.useEffect(()=>{_(!1),e?.set(!1)},[s,e]),i.useEffect(()=>Ts(()=>{e&&!e()&&_(!1)}),[e]),ba(i.useMemo(()=>({image:{asset_pointer:s,metadata:{dalle:{gen_id:n},generation:{gen_id:n}},height:r,width:a},currentDrawnShape:null,onCleared:()=>{},getImageData:()=>{}}),[n,s,r,a]));const S=g=>{b.transitionToPage({type:"conversation",value:void 0},()=>{m?.(),_a(l,d,o,void 0,!0),y(g)})},h=ya();return t.jsx(Jt,{children:t.jsx(Ze.div,{layout:!c,transition:{type:"spring",duration:.2},className:F(x?"w-full rounded-3xl":"mx-auto rounded-full"),children:x?t.jsx(Sa,{value:{isImageGenEditor:!0,isInpainting:!1,onCancelInpaint:()=>{}},children:t.jsx(dt,{clientThreadId:o,children:t.jsx(dn,{clientThreadId:o,currentModelId:f??Xt(void 0).id,disableDraftPersistence:!0,onRequestCompletion:async g=>{e?.set(!1),V.logEventWithStatsig("chatgpt_web_image_library_lightbox_image_edit_submitted","chatgpt_web_image_library_lightbox_image_edit_submitted"),Ps(o)==null&&await(p.current??Mt(o)),S(await wa(g))},onContinueGenerating:g=>S(va(g)),hideHeader:!0,isNewThread:!1})})}):t.jsx(Re,{color:"secondary",size:h?"large":void 0,className:"px-4 max-md:min-w-[50vw]",onClick:()=>{V.logEventWithStatsig("chatgpt_web_image_library_lightbox_image_composer_opened","chatgpt_web_image_library_lightbox_image_composer_opened"),_(!0),e?.set(!0),p.current=Mt(o).finally(()=>{p.current=null})},icon:h?void 0:ja,children:t.jsx(Ze.div,{initial:c?!1:{opacity:0},animate:{opacity:1},children:t.jsx(D,{id:"BD4ZLh",defaultMessage:"Edit image"})})})})})},Nn=({assetPointer:s,serverThreadId:e,messageId:o})=>{const n=$(),[a,r]=i.useState(!1),m=ln({assetPointer:s,clientThreadId:e,imageGenMessageId:o}),c=i.useCallback(async()=>{r(!0);try{await m()}finally{r(!1)}V.logEventWithStatsig("chatgpt_web_image_library_lightbox_image_share_clicked","chatgpt_web_image_library_lightbox_image_share_clicked")},[m]),x=n.formatMessage({id:"lqgWN2",defaultMessage:"Share"});return t.jsxs(t.Fragment,{children:[t.jsx(Re,{className:"max-md:hidden",color:"secondary",icon:a?Ie:kt,onClick:c,disabled:a,children:x}),t.jsx(Re,{color:"ghost",className:"text-token-text-secondary w-10 md:hidden",icon:a?Ie:kt,onClick:c,label:x,disabled:a})]})},Tn=({initialIndex:s,includeArchived:e,onScrollToEnd:o,onClose:n})=>{const a=$(),r=Q(),m=Gt(r).checkGate("1520205231"),{archiveMutation:c}=Ca(e),x=Ma(),[_]=i.useState(()=>Es(!1)),f=_e(),y=lt(),{images:b}=Zt(e);return t.jsxs(ka,{imageList:b,initialIndex:s??0,onClose:n,isInFocusMode$:_,onScrollToEnd:o,children:[t.jsx(Na,{children:({title:l,createdAt:d})=>t.jsxs("div",{className:"flex min-h-12 min-w-0 flex-col items-center max-md:h-full",children:[t.jsx("h2",{className:"text-token-text-primary max-w-full min-w-0 grow justify-center self-start truncate text-base text-balance max-md:flex max-md:items-center max-md:ps-2",children:t.jsx("span",{className:"line-clamp-2",children:l??t.jsx(D,{id:"OIDfvR",defaultMessage:"Image Generation"})})}),d&&t.jsx("span",{className:"text-token-text-secondary text-sm max-md:hidden",children:d.toDateString()})]})}),t.jsxs(Ta,{children:[t.jsx(Te,{children:({conversationId:l,messageId:d})=>t.jsx(Ee,{label:a.formatMessage(J.openInChat),triggerAs:null,children:t.jsx(Je,{className:"aspect-square",icon:Pa,onClick:p=>{V.logEventWithStatsig("chatgpt_web_image_library_lightbox_image_open_in_chat_clicked","chatgpt_web_image_library_lightbox_image_open_in_chat_clicked"),p.preventDefault(),f.addClassToCurrentTransition(["from-lightbox","to-conversation"]),f.transitionToPage({type:"conversation",value:void 0},async()=>{n(null),await y(`/c/${l}?message=${d}`,{preventScrollReset:!0})})},"aria-label":a.formatMessage(J.openInChat)})})}),m&&t.jsx(Te,{children:({id:l,archived:d})=>t.jsx(Ee,{label:a.formatMessage(d?J.unarchive:J.archive),triggerAs:null,children:t.jsx(Je,{className:"aspect-square",icon:d?Aa:Ea,onClick:()=>{V.logEventWithStatsig(d?"chatgpt_web_image_library_lightbox_image_unarchive_clicked":"chatgpt_web_image_library_lightbox_image_archive_clicked",d?"chatgpt_web_image_library_lightbox_image_unarchive_clicked":"chatgpt_web_image_library_lightbox_image_archive_clicked"),c.mutate({imageId:l,operation:d?"unarchive":"archive"})},"aria-label":a.formatMessage(d?J.unarchive:J.archive)})})}),t.jsx(Te,{children:({url:l,title:d})=>t.jsx(Ee,{label:a.formatMessage(J.download),triggerAs:null,children:t.jsx(Je,{className:"aspect-square",icon:Ia,onClick:()=>{V.logEventWithStatsig("chatgpt_web_image_library_lightbox_image_download_clicked","chatgpt_web_image_library_lightbox_image_download_clicked"),La({url:l,fileName:`${d??a.formatMessage({id:"cYxKbe",defaultMessage:"My ChatGPT image"})}.png`})},"aria-label":a.formatMessage(J.download)})})}),x()&&t.jsx(Te,{children:({assetPointer:l,conversationId:d,messageId:p})=>!d||!p?null:t.jsx(Nn,{assetPointer:l,serverThreadId:d,messageId:p})})]}),t.jsx(Ra,{children:({url:l,width:d,height:p,title:S,position:h})=>t.jsx("img",{className:Ga("bg-tertiary block h-fit max-h-full w-auto rounded-lg object-contain shadow-xl max-md:rounded-none max-md:shadow-none",h==="current"&&"[view-transition-name:var(--vt-active-image)]"),style:h&&h!=="current"?{viewTransitionName:`var(--vt-image-${h})`}:void 0,src:et(l),width:d,tabIndex:0,height:p,alt:S??""})}),t.jsx(Oa,{children:({width:l,height:d,assetPointer:p,conversationId:S,transformationId:h})=>S&&p&&t.jsx(kn,{isInFocusMode$:_,onEdit:()=>n(null),width:l,height:d,assetPointer:p,serverThreadId:S,transformationId:h})})]})},J=Vt({download:{id:"Z23tMl",defaultMessage:"Download image"},openInChat:{id:"Eh8G/f",defaultMessage:"Open in Chat"},archive:{id:"yOqxdz",defaultMessage:"Hide image"},unarchive:{id:"yEUKZl",defaultMessage:"Show image"}}),Pn=({hasMoreImages:s,count:e,images:o,includeArchived:n,isFetchingMore:a,onScrollToEnd:r})=>{const m=s?Math.max((e??0)-(o.length??0),0):0,[c,x]=i.useState(!1),[_,f]=i.useState(null),y=_e(),b=Q(),{clientThreadId:l}=ut(),d=i.useCallback(p=>{V.logEventWithStatsig("chatgpt_web_image_library_lightbox_opened","chatgpt_web_image_library_lightbox_opened"),x(!0),f(p),y.transitionToPage({type:"lightbox",value:void 0},()=>{As(b,({closeModal:S})=>t.jsx(rs,{clientThreadId:l,children:t.jsx(Ha,{children:t.jsx(es,{children:t.jsx(Tn,{includeArchived:n,onClose:h=>{if(h==null){S();return}ts({update:()=>{S(),f(h),x(!0)},className:"from-lightbox",forceFlushSync:!0}).finished.then(()=>x(!1))},initialIndex:p,onScrollToEnd:r})})})})),x(!1)})},[l,b,n,r,y]);return t.jsxs("div",{className:"w-full",children:[t.jsx("div",{className:"grid min-h-60 w-full grid-cols-2 gap-1 max-md:gap-0.5 sm:grid-cols-3 md:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6",children:o.map(({url:p,thumbnail:S,width:h,height:g,title:v=null,assetPointer:w,conversationId:u,messageId:C},j)=>t.jsxs(Nt,{index:j,active:c&&_===j,src:et(p),onClick:d,thumbnail:et(S),width:h,height:g,alt:v,children:[u!=null&&C!=null&&t.jsx(pn,{imageAssetPointer:w??void 0,imageUrl:p??void 0,clientThreadId:u,serverThreadId:u,messageId:C,showRatingButtons:!1}),j===o.length-1&&t.jsx(Wa,{onScrollToEnd:r})]},j)).concat(new Array(m).fill(null).map((p,S)=>{const h=o.length+S;return t.jsx(Nt,{index:h,isPlaceholder:!0,active:!1},h)}))}),t.jsx("div",{className:"flex h-8 items-center justify-center",children:s&&a&&t.jsx(Ie,{})})]})};function En(s){"use forget";const e=we.c(5),{clientThreadId:o}=s;let n;e[0]!==s?(n=t.jsx(In,{...s}),e[0]=s,e[1]=n):n=e[1];let a;return e[2]!==o||e[3]!==n?(a=t.jsx(dt,{clientThreadId:o,children:n}),e[2]=o,e[3]=n,e[4]=a):a=e[4],a}function An(s){"use forget";const e=we.c(22),{clientThreadId:o,headlineOption:n,currentModelId:a,isModelLoaded:r,overrideMessage:m}=s,c=gt(),x=Ua(),_=je(),{isFocused:f,autocompletions:y}=Dt(_.store),b=f&&y.length>0,l=Se(),d=ye(l.isImageGenLandingPageEnabled$);let p;e[0]===Symbol.for("react.memo_cache_sentinel")?(p={opacity:0},e[0]=p):p=e[0];const S=b?0:1;let h;e[1]!==S?(h={opacity:S},e[1]=S,e[2]=h):h=e[2];let g,v;e[3]===Symbol.for("react.memo_cache_sentinel")?(g={opacity:0},v={duration:.1},e[3]=g,e[4]=v):(g=e[3],v=e[4]);const w=x?"keyboard-open:h-[calc(100%-var(--screen-keyboard-height,0px)-var(--composer-height,100px))] h-full motion-safe:[transition:height_0.3s_var(--easing-common)]":"h-full",u=b?"pointer-events-none":"",C=c?"@lg/thread:hidden":"lg:hidden";let j;e[5]!==w||e[6]!==u||e[7]!==C?(j=F("text-token-text-primary mt-[var(--screen-optical-compact-offset-amount)] [display:var(--display-hidden-until-loaded,flex)] shrink flex-col items-center justify-center overflow-hidden",w,u,C),e[5]=w,e[6]=u,e[7]=C,e[8]=j):j=e[8];let T;e[9]!==n||e[10]!==m?(T=n==="CHATGPT_LOGO"?t.jsx(Ht,{className:"inline-block h-12 w-12"}):t.jsx(ds,{headlineOption:n,overrideMessage:m}),e[9]=n,e[10]=m,e[11]=T):T=e[11];let P;e[12]!==o||e[13]!==a||e[14]!==d||e[15]!==r?(P=!d&&t.jsx(un,{isModelLoaded:r,currentModelId:a,clientThreadId:o}),e[12]=o,e[13]=a,e[14]=d,e[15]=r,e[16]=P):P=e[16];let R;return e[17]!==T||e[18]!==P||e[19]!==h||e[20]!==j?(R=t.jsxs(Ze.div,{initial:p,animate:h,exit:g,transition:v,className:j,children:[T,P]}),e[17]=T,e[18]=P,e[19]=h,e[20]=j,e[21]=R):R=e[21],R}function In(s){"use forget";const e=we.c(34),{clientThreadId:o,currentModelId:n,isModelLoaded:a}=s,r=je(),m=ve();let c;e[0]!==m?(c=m?.isQuorum(),e[0]=m,e[1]=c):c=e[1];const x=c,{isUnauthenticated:_}=ue(),f=Is();Da(r);let y;e[2]===Symbol.for("react.memo_cache_sentinel")?(y="4031588851",e[2]=y):y=e[2];const{layer:b}=de(y);let l,d;e[3]===Symbol.for("react.memo_cache_sentinel")?(l="3533083032",d={shouldLogExposure:!1},e[3]=l,e[4]=d):(l=e[3],d=e[4]);const{layer:p}=de(l,d),S=_?p:b,h=gt();let g;e[5]!==S?(g=S.get("headline_option","HELP_WITH"),e[5]=S,e[6]=g):g=e[6];const v=g,w=is();let u;e[7]!==w?(u=w.has(q.Research),e[7]=w,e[8]=u):u=e[8];const C=u;let j;e[9]!==n||e[10]!==f||e[11]!==C||e[12]!==x?(j=x?A.chatgptHipaa:C?A.deepResearchPlaceholder:void 0,e[9]=n,e[10]=f,e[11]=C,e[12]=x,e[13]=j):j=e[13];const T=j,P=h?"@lg/thread:items-end":"lg:items-end";let R;e[14]!==P?(R=F("flex items-center justify-center",P),e[14]=P,e[15]=R):R=e[15];const W=h?"@lg/thread:block":"lg:block";let M;e[16]!==W?(M=F("mb-7 hidden text-center @lg/thread:block",W),e[16]=W,e[17]=M):M=e[17];let E;e[18]!==v||e[19]!==T?(E=v==="CHATGPT_LOGO"?t.jsx(Ht,{className:"inline-block h-12 w-12"}):t.jsx(ds,{headlineOption:v,overrideMessage:T}),e[18]=v,e[19]=T,e[20]=E):E=e[20];let G;e[21]!==M||e[22]!==E?(G=t.jsx("div",{className:M,children:E}),e[21]=M,e[22]=E,e[23]=G):G=e[23];let O;e[24]!==o||e[25]!==n||e[26]!==v||e[27]!==T||e[28]!==a?(O=t.jsx(An,{headlineOption:v,clientThreadId:o,isModelLoaded:a,currentModelId:n,overrideMessage:T}),e[24]=o,e[25]=n,e[26]=v,e[27]=T,e[28]=a,e[29]=O):O=e[29];let U;return e[30]!==G||e[31]!==O||e[32]!==R?(U=t.jsxs("div",{className:R,children:[G,O]}),e[30]=G,e[31]=O,e[32]=R,e[33]=U):U=e[33],U}function Ln(s){"use forget";const e=we.c(16),{headlineOption:o,overrideMessage:n}=s,a=function(E){const{name:G}=E;return t.jsx(Ee,{label:x.formatMessage(A.editNicknameTooltip),delayDuration:300,side:"top",children:t.jsx("button",{onClick:On,style:{textDecoration:"none",transition:"color 0.2s"},onMouseEnter:Gn,onMouseLeave:Rn,children:G})})};let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=function(){const E=[],G=[];E.push("READY_WHEN_YOU_ARE","ON_YOUR_MIND","WHAT_ARE_YOU_WORKING_ON","AGENDA_TODAY","SHOULD_WE_BEGIN"),G.push("GOOD_TO_SEE_YOU","DIVE_IN","HOW_CAN_I_HELP",...E);const O=G[Math.floor(Math.random()*G.length)],Y=`${E[Math.floor(Math.random()*E.length)]} | ${O}`;ie.setCookie(le.headlineMessage,Y)},e[0]=r):r=e[0];const m=r,c=function(){const E=ie.getCookie(le.GreetingName),O=ie.getCookie(le.headlineMessage)?.split("|"),U=O?.[0]?.trim(),Y=O?.[1]?.trim();return{cookieName:E,isReadyForPersonalized:!!E&&E.length<=y,headline:U,namedHeadline:Y}},x=$(),_=Q(),f=Rs(_,"1704793646"),y=f.get("name_char_limit",20),[b,l]=i.useState(c),{isUnauthenticated:d}=ue(),p=ss(),h=za(!d&&!!p)?.data,g=Va(),v=rt(_,"304137190").get("h1_is_chatgpt",!1),w=f.get("greeting_web",!1),u=f.get("full_name_llm",!1);let C,j;e[1]!==p||e[2]!==u||e[3]!==g||e[4]!==w||e[5]!==h?(C=()=>{if(w&&g){if(p&&h){const M=Gs(h,p,u);ie.setCookie(le.GreetingName,M),vt.count(wt.MOONSHINE,"splashScreenV2.greeting_cookie_name_set_web")}m()}else ie.deleteCookie(le.GreetingName),ie.deleteCookie(le.headlineMessage)},j=[h,p,w,u,g],e[1]=p,e[2]=u,e[3]=g,e[4]=w,e[5]=h,e[6]=C,e[7]=j):(C=e[6],j=e[7]),i.useEffect(C,j);let T;e[8]!==c||e[9]!==g||e[10]!==w?(T=()=>{const M=()=>{if(w&&g){const{cookieName:E,isReadyForPersonalized:G}=c();l(O=>({...O,cookieName:E,isReadyForPersonalized:G}))}};return window.addEventListener("refreshGreeting",M),()=>window.removeEventListener("refreshGreeting",M)},e[8]=c,e[9]=g,e[10]=w,e[11]=T):T=e[11],i.useEffect(T);let P,R;e[12]!==g||e[13]!==w?(P=()=>{w&&g&&vt.count(wt.MOONSHINE,"splashScreenV2.greeting_shown_web")},R=[w,g],e[12]=g,e[13]=w,e[14]=P,e[15]=R):(P=e[14],R=e[15]),i.useEffect(P,R);let W;return n?W=t.jsx(t.Fragment,{children:t.jsx(D,{...n,values:{hipaa:t.jsx("span",{className:"text-token-interactive-label-accent-default",children:x.formatMessage(A.hipaa)})}})}):d&&v?W=t.jsx("h1",{children:x.formatMessage(Pe.CHATGPT.original)}):b.isReadyForPersonalized&&w?W=t.jsx(t.Fragment,{children:t.jsx(D,{...Pe[b.namedHeadline??o].withName,values:{name:t.jsx(a,{name:b.cookieName??""},"name")}})}):w&&b.headline?W=x.formatMessage(Pe[b.headline].original):W=x.formatMessage(Pe[o].original),W}function Rn(s){s.currentTarget.className="text-inherit"}function Gn(s){s.currentTarget.className="text-token-text-secondary"}function On(){We.setAutoHighlightNicknameInput(!0),We.openModal(Ba.UserContext)}function ds(s){"use forget";const e=we.c(27),{headlineOption:o,overrideMessage:n}=s,a=Wt(),r=i.useRef(null);let m;e[0]!==a?(m={isTempChatVisible:a,titleTranslate:0},e[0]=a,e[1]=m):m=e[1];const[c,x]=i.useState(m);let _,f;e[2]!==a?(_=()=>{x({isTempChatVisible:a,titleTranslate:a?-((r.current?.offsetHeight??0)-40):0})},f=[a],e[2]=a,e[3]=_,e[4]=f):(_=e[3],f=e[4]),Ls(_,f);let y;e[5]===Symbol.for("react.memo_cache_sentinel")?(y={viewTransitionName:"var(--vt-splash-screen-headline)"},e[5]=y):y=e[5];const b=c.isTempChatVisible?"invisible opacity-0":"opacity-100";let l;e[6]!==b?(l=F("text-page-header inline-flex min-h-10.5 items-baseline whitespace-pre-wrap motion-safe:[transition:0.25s_transform_var(--spring-standard),0.2s_opacity_var(--spring-standard),0.3s_visibility_var(--spring-standard)]",b),e[6]=b,e[7]=l):l=e[7];const d=`translateY(${c.titleTranslate}px)`;let p;e[8]!==d?(p={transform:d},e[8]=d,e[9]=p):p=e[9];let S;e[10]!==o||e[11]!==n?(S=t.jsx("div",{className:"px-1 text-pretty whitespace-pre-wrap",children:t.jsx(Ln,{headlineOption:o,overrideMessage:n})}),e[10]=o,e[11]=n,e[12]=S):S=e[12];let h;e[13]!==a||e[14]!==l||e[15]!==p||e[16]!==S?(h=t.jsx("h1",{className:l,"aria-hidden":a,style:p,children:S}),e[13]=a,e[14]=l,e[15]=p,e[16]=S,e[17]=h):h=e[17];const g=c.isTempChatVisible?"translate-y-0 opacity-100":"invisible translate-y-10 opacity-0";let v;e[18]!==g?(v=F("absolute bottom-0 motion-safe:[transition:0.25s_transform_var(--spring-standard),0.2s_opacity_var(--spring-standard),0.3s_visibility_var(--spring-standard)]",g),e[18]=g,e[19]=v):v=e[19];const w=!a;let u;e[20]===Symbol.for("react.memo_cache_sentinel")?(u=t.jsx(Fa,{}),e[20]=u):u=e[20];let C;e[21]!==v||e[22]!==w?(C=t.jsx("div",{className:v,"aria-hidden":w,ref:r,children:u}),e[21]=v,e[22]=w,e[23]=C):C=e[23];let j;return e[24]!==h||e[25]!==C?(j=t.jsx("div",{className:"relative inline-flex justify-center text-center text-2xl leading-9 font-semibold",children:t.jsx("div",{children:t.jsxs("div",{className:"grid-cols-1 items-center justify-end",style:y,children:[h,C]})})}),e[24]=h,e[25]=C,e[26]=j):j=e[26],j}const A=Vt({chatgptHipaa:{id:"SplashScreenV2.chatgptHipaa",defaultMessage:"ChatGPT {hipaa}"},hipaa:{id:"common.hipaa",defaultMessage:"HIPAA"},whatCanIHelpWith:{id:"SplashScreenV2.whatCanIHelpWith",defaultMessage:"What can I help with?"},whatCanIHelpWithWithName:{id:"SplashScreenV2.whatCanIHelpWith.withName",defaultMessage:"What can I help with, {name}?"},whereShouldWeStart:{id:"SplashScreenV2.whereShouldWeStart",defaultMessage:"Where should we start?"},whereShouldWeStartWithName:{id:"SplashScreenV2.whereShouldWeStart.withName",defaultMessage:"Where should we start, {name}?"},askChatgptAnything:{id:"SplashScreenV2.askChatgptAnything",defaultMessage:"Ask ChatGPT anything"},askChatgptAnythingWithName:{id:"SplashScreenV2.askChatgptAnything.withName",defaultMessage:"Ask ChatGPT anything, {name}"},shouldWeBegin:{id:"SplashScreenV2.shouldWeBegin",defaultMessage:"Where should we begin?"},goodToSeeYouWithName:{id:"SplashScreenV2.goodToSeeYou.withName",defaultMessage:"Good to see you, {name}."},diveInWithName:{id:"SplashScreenV2.diveInWithName",defaultMessage:"Hey, {name}. Ready to dive in?"},readyWhenYouAre:{id:"SplashScreenV2.readyWhenYouAre",defaultMessage:"Ready when you are."},onYourMind:{id:"SplashScreenV2.onYourMind",defaultMessage:"What's on your mind today?"},whatAreYouWorkingOn:{id:"SplashScreenV2.whatAreYouWorkingOn",defaultMessage:"What are you working on?"},agendaToday:{id:"SplashScreenV2.agendaToday",defaultMessage:"What's on the agenda today?"},deepResearchPlaceholder:{id:"G1v9do",defaultMessage:"What are you researching?"},editNicknameTooltip:{id:"SplashScreenV2.editNicknameTooltip",defaultMessage:"Edit nickname"},howCanIHelp:{id:"SplashScreenV2.howCanIHelp",defaultMessage:"How can I help?"},howCanIHelpWithName:{id:"SplashScreenV2.howCanIHelp.withName",defaultMessage:"How can I help, {name}?"},chatgpt:{id:"SplashScreenV2.chatgpt",defaultMessage:"ChatGPT"}}),Pe={HELP_WITH:{original:A.whatCanIHelpWith,withName:A.whatCanIHelpWithWithName},WHERE_TO_START:{original:A.whereShouldWeStart,withName:A.whereShouldWeStartWithName},ASK_CHATGPT:{original:A.askChatgptAnything,withName:A.askChatgptAnythingWithName},HOW_CAN_I_HELP:{original:A.howCanIHelp,withName:A.howCanIHelpWithName},GOOD_TO_SEE_YOU:{original:A.goodToSeeYouWithName,withName:A.goodToSeeYouWithName},DIVE_IN:{original:A.diveInWithName,withName:A.diveInWithName},READY_WHEN_YOU_ARE:{original:A.readyWhenYouAre,withName:A.readyWhenYouAre},ON_YOUR_MIND:{original:A.onYourMind,withName:A.onYourMind},WHAT_ARE_YOU_WORKING_ON:{original:A.whatAreYouWorkingOn,withName:A.whatAreYouWorkingOn},AGENDA_TODAY:{original:A.agendaToday,withName:A.agendaToday},SHOULD_WE_BEGIN:{original:A.shouldWeBegin,withName:A.shouldWeBegin},CHATGPT:{original:A.chatgpt,withName:A.chatgpt}};function Hn({onClick:s}){return t.jsxs("div",{className:"flex flex-col",children:[t.jsx("button",{onClick:s,"aria-labelledby":"upload-image-label",className:"relative",id:"upload-image-button",type:"button",children:t.jsx("div",{className:"bg-token-main-surface-primary dark:bg-token-main-surface-secondary border-token-border-default z-1 flex aspect-square items-center justify-center overflow-hidden rounded-2xl border p-5 text-xs transition-[transform_box-shadow] duration-[0.24s] select-none hover:motion-safe:scale-105",children:t.jsxs("div",{className:"text-token-text-tertiary inline-flex items-center justify-center",children:[t.jsx(Ja,{"aria-label":"",className:"h-12 w-12"}),t.jsx(Xa,{"aria-label":"",className:"absolute start-1/2 top-1/2 ms-1 mt-1 h-8 w-8"})]})})}),t.jsx("div",{id:"upload-image-label",className:"text-token-text-secondary mt-8 w-full text-center text-sm font-medium",children:t.jsx(D,{id:"DJ+4dI",defaultMessage:"Upload an image"})})]})}function Rt({card:s,className:e,label:o}){const{formatMessage:n}=$();return typeof s.url=="string"?t.jsx("img",{src:s.url,alt:n(s.prompt),className:e}):t.jsxs("picture",{className:e,children:[s.url.map(({type:a,url:r})=>a==="jpg"?null:t.jsx("source",{srcSet:r,type:`image/${a}`},r)),t.jsx("img",{"aria-label":o,src:s.url[0].url,alt:n(s.prompt),className:F(e,"h-full w-full object-cover")})]})}function Wn({type:s,images:e,onClick:o}){const[n,a]=i.useState(0),{formatMessage:r}=$(),m=n+1>=e.length?0:n+1,c=e[n].prompt;return t.jsxs("div",{children:[t.jsxs("div",{className:"group/stack relative flex justify-center",children:[t.jsx("div",{onClick:()=>{const x=n+1>=e.length?0:n+1;a(x)},className:F("bg-token-bg-primary relative z-2 grid aspect-square h-full overflow-clip rounded-xl text-xs shadow-lg transition-transform duration-[0.24s]","group-hover/stack:-translate-x-2 group-hover/stack:rotate-[-3deg] group-hover/stack:shadow-md",e.length>1&&"cursor-pointer"),children:t.jsx(Rt,{card:e[n],label:r(c)})},n),t.jsx("div",{className:F("ease-in-expo ease-spring-standard absolute top-0 left-0! flex aspect-square w-full translate-y-2 rotate-[2deg] opacity-40 transition-transform duration-[0.24s]","group-hover/stack:translate-x-2 group-hover/stack:translate-y-[0px] group-hover/stack:rotate-[4deg]"),children:t.jsx(Rt,{card:e[m],label:r(c),className:F(Za.fadeScale,"aspect-square w-full overflow-hidden rounded-xl shadow-xl")})},m),t.jsx("button",{id:r(c),onClick:()=>o(r(c)),tabIndex:0,className:"border-token-border-default bg-token-main-surface-primary hover:bg-token-main-surface-tertiary can-hover:z-0 absolute bottom-6 flex w-fit items-center justify-center rounded-full border px-3 py-1 text-sm shadow-md duration-[0.24s] group-hover/stack:z-11 focus-visible:z-11 active:scale-98 motion-safe:transition-[background-color,transform]",children:t.jsx(D,{id:"wk6Ayk",defaultMessage:"Try this prompt"})})]}),s&&t.jsx("div",{className:"text-token-text-secondary mt-8 w-full text-center text-sm font-medium",children:r(s)})]})}function Dn({onCardClick:s,onUploadCardClick:e}){const{value:o}=te("2640502720"),n=$(),r=ve()?.isWorkspacePlan()?qa:Ya,m=Se(),[c,x]=i.useState(!1),{images:_,hasNextPage:f,isLoading:y,isFetchingNextPage:b,fetchNextPage:l}=Zt(c),{data:d,isLoading:p}=Qa(),S=je(),h=d?.images_count,g=!!h,v=!!d?.archived_images_count,u=!p&&!g,C=Ks({id:"Gd9T7H",defaultMessage:"My Library"});return t.jsxs("div",{className:"mx-auto flex w-full flex-col items-center",children:[t.jsxs("div",{className:"my-6 grid w-full grid-cols-2 gap-4 gap-y-10 max-md:px-4 sm:grid-cols-3 md:grid-cols-4",children:[t.jsx(Hn,{onClick:e}),r.map(j=>t.jsx(Wn,{type:j.type,images:j.images,onClick:T=>{s(T),j.needsUpload&&m.showUploadSuggestion$.set(!0)}},String(j.type.defaultMessage)))]}),t.jsx("div",{className:F("z-50 mt-4 flex w-full items-center justify-between max-md:px-4",o&&"sticky top-[9px]"),children:t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"flex text-lg font-medium",children:t.jsx(D,{...C})}),g&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-token-text-tertiary flex gap-6 text-sm",children:t.jsx(D,{id:"Grwczz",defaultMessage:"{count, plural, =0 {No images} one {# image} other {# images}}",values:{count:h}})}),v&&t.jsx($a,{includeArchived:c,setIncludeArchived:x})]})]})}),!u&&t.jsx("div",{className:"mt-4 mb-6 w-full border-t max-md:mb-6 max-md:hidden"}),u&&t.jsx(Ka,{onClick:()=>{const j=Tt(r),T=Tt(j?.images??[]);T&&s(n.formatMessage(T.prompt)),S.focus()}}),!u&&t.jsx("div",{className:"min-h-svh w-full max-md:px-4",children:t.jsx(Pn,{count:h??0,images:_??[],includeArchived:c,hasMoreImages:f,isFetchingMore:b||y,onScrollToEnd:l})})]})}const Fn=({systemHint:s})=>{const{updateSystemHint:e}=ea(),o=_e(),{transitionToNextPage:n}=eo(),{clientThreadId:a}=ut();i.useEffect(()=>{o.activeViewTransition&&o.signalTransitionReady()},[o]),i.useEffect(()=>{e(s,{clientThreadId:a})},[s,a,e]);let r=null;switch(s){case q.Canvas:r=t.jsx(D,{id:"4+tS2L",defaultMessage:"Write with canvas"});break;case q.PictureV2:r=t.jsx(D,{id:"QtMyOg",defaultMessage:"Make an image"});break;case q.Research:r=t.jsx(D,{id:"Rdax1G",defaultMessage:"Deep research"});break;default:r=t.jsx(D,{id:"UrTsbY",defaultMessage:"Unknown landing page"});break}return t.jsx(to,{children:t.jsxs(so,{className:"mt-[100px] flex flex-col items-center gap-6",children:[t.jsx(ao,{isBadge:!0,isLauncher:!1,systemHint:s,label:null}),t.jsxs("div",{className:"flex flex-col items-center justify-center gap-3",children:[t.jsx("div",{"data-landing-page-load-target":!0,className:"text-token-text-primary text-4xl font-medium tracking-tight [text-box-trim:trim-both] [view-transition-name:var(--vt-tool-page-title)] md:text-5xl",children:r}),t.jsxs(Oe,{to:"/",viewTransition:!0,onClick:m=>{m.preventDefault(),n({path:"/",nextPageType:{type:"home",value:void 0},update:()=>{e(null,{clientThreadId:a})}})},className:"group text-token-text-tertiary flex items-center gap-1.5 text-sm",children:[t.jsx(oo,{className:"icon-sm"}),t.jsx("div",{className:"group-hover:underline",children:t.jsx(D,{id:"gdbtML",defaultMessage:"Back to ChatGPT home"})})]})]})]})})},Un=({systemHint:s})=>{const e=je(),o=Se(),n=i.useCallback(b=>{e.setText(b),e.focus()},[e]);i.useEffect(()=>()=>{o.reset()},[o]);const a=i.useCallback(()=>{V.logEvent("Open File Viewer",{intent:no.Multimodal.toString()}),e.openFileDialog()},[e]),{isImageGenLandingPageEnabled$:r,isAllPagesEnabled$:m}=Se(),c=ye(r),x=ye(m),f=s===q.PictureV2&&c;if(!x&&!f)return null;let y=null;switch(s){case q.Canvas:y=!1;break;case q.PictureV2:y=t.jsx(Dn,{onCardClick:n,onUploadCardClick:a});break;case q.Research:y=!1;break;default:y=t.jsx(D,{id:"JEsPH+",defaultMessage:"Unknown landing page {systemHint}",values:{systemHint:s}})}return y},zn=4,Vn=async({text:s,numCompletions:e,isUnauthenticated:o,isThreadUsingSearchMode:n=!1,autocompleteMode:a,activeSystemHint:r})=>{try{return(o?await Ge.safePost("/conversation/experimental/generate_autocompletions_anon",{requestBody:{input_text:s,num_completions:e,in_search_mode:n,system_hint:r},authOption:Ft.Anonymous}):await Ge.safePost("/conversation/experimental/generate_autocompletions",{requestBody:{input_text:s,num_completions:e,in_search_mode:n,system_hint:r}})).completions.map(c=>({id:Xs(),type:z.Autocomplete,title:c.slice(0,s.length),body:c.slice(s.length),oneliner:c,prompt:c,source:a}))}catch{return[]}},Bn=()=>!1,qn=({clientThreadId:s,composerController:e,isGizmoThread:o})=>{const n=Dt(e.store,N=>N.showTaggingDropdown),a=is(),r=Array.from(a)[0],[m,c]=i.useState([]),[x,_]=i.useState([]);i.useRef(0);const f=zn,[y,b]=i.useState(),l=i.useCallback(N=>{c(k=>{const L=typeof N=="function"?N(k):N;return Os(L,k)?k:L})},[]),{trendingSuggestions:d,fetchTrendingSuggestions:p}=Yn(f),{isUnauthenticated:S}=ue(),h=ta(),g=i.useCallback(N=>{const k=e.getCurrentText();return k&&Xe(N).startsWith(k.toLocaleLowerCase())},[e]),v=i.useCallback(N=>{const k=e.getCurrentText(),L=N.title+N.body;return g(N)?{...N,title:k,body:L.slice(k.length)}:{...N,title:L,body:""}},[e,g]),w=i.useCallback((N=!1)=>{l(k=>!k.some(g)&&k.length>0?[]:N?k:k.map(v))},[g,v,l]),u=$(),C=i.useMemo(()=>({[H.Canvas]:[{type:z.Starter,title:u.formatMessage({id:"GMvniX",defaultMessage:"Help me write a birthday message for a friend"}),prompt:u.formatMessage({id:"JInqHw",defaultMessage:"Help me write a birthday message for a friend"}),body:"",theme:H.Canvas},{type:z.Starter,title:u.formatMessage({id:"Xwp6O+",defaultMessage:"Help me write a short story"}),prompt:u.formatMessage({id:"e2j3PL",defaultMessage:"Help me write a short story set in a post-apocalyptic Tokyo, focused on a character who’s discovering a long-lost secret"}),body:"",theme:H.Canvas},{type:z.Starter,title:u.formatMessage({id:"ARQf7p",defaultMessage:"Help me write a basic outline for an essay"}),prompt:u.formatMessage({id:"K0WcGA",defaultMessage:"Help me write a basic outline for an essay"}),body:"",theme:H.Canvas},{type:z.Starter,title:u.formatMessage({id:"z+JwEj",defaultMessage:"Create a business plan outline"}),prompt:u.formatMessage({id:"4c/Ux5",defaultMessage:"Create a detailed outline for a business plan for a new app that connects local artists with buyers. Include sections for market analysis, monetization, and user acquisition"}),body:"",theme:H.Canvas}],[H.Image]:[{type:z.Starter,title:u.formatMessage({id:"noA7wB",defaultMessage:"Design a modern logo"}),prompt:u.formatMessage({id:"k53BuX",defaultMessage:"Create a modern, minimalist logo for a tech startup called ‘Nexora’. It should use bold typography and a sleek geometric icon, suitable for both light and dark backgrounds"}),body:"",theme:H.Image},{type:z.Starter,title:u.formatMessage({id:"akHy6z",defaultMessage:"Create an invite for my birthday"}),prompt:u.formatMessage({id:"BXf15G",defaultMessage:"Please create an invite for my birthday to send to my friends. It’ll be an outdoor barbeque with music and delicious food with my closest friends and family"}),body:"",theme:H.Image},{type:z.Starter,title:u.formatMessage({id:"57SKj2",defaultMessage:"Create a cartoon illustration of my pet"}),prompt:u.formatMessage({id:"EtCE7V",defaultMessage:"Please create an illustration of my pet in 2D animation style. It’s taking a nap in its favorite spot by the fire"}),body:"",theme:H.Image},{type:z.Starter,title:u.formatMessage({id:"s5iqKS",defaultMessage:"Create a Renaissance-style painting"}),prompt:u.formatMessage({id:"mEPKGA",defaultMessage:"Please create a Renaissance-style painting of a Mars rover. Use techniques like chiaroscuro and a warm color palette"}),body:"",theme:H.Image}],[H.ContextualAnswers]:[{type:z.Starter,title:u.formatMessage({id:"VJy602",defaultMessage:"Summarize my top projects this quarter and key outcomes across all of them."}),prompt:u.formatMessage({id:"BADBWZ",defaultMessage:"Summarize my top projects this quarter and key outcomes across all of them."}),icon:t.jsx(ro,{className:"h-full w-full"}),body:"",theme:H.ContextualAnswers},{type:z.Starter,title:u.formatMessage({id:"CXhrsc",defaultMessage:"Get me up to speed on the past 2 weeks of project updates."}),prompt:u.formatMessage({id:"WPQR3a",defaultMessage:"Get me up to speed on the past 2 weeks of project updates."}),icon:t.jsx(io,{className:"h-full w-full"}),body:"",theme:H.ContextualAnswers},{type:z.Starter,title:u.formatMessage({id:"7QVCTa",defaultMessage:"Find the revenue projection for Q3 and the most profitable projects."}),prompt:u.formatMessage({id:"tvB7JD",defaultMessage:"Find the revenue projection for Q3 and the most profitable projects."}),icon:t.jsx(lo,{className:"h-full w-full"}),body:"",theme:H.ContextualAnswers},{type:z.Starter,title:u.formatMessage({id:"Rny+bg",defaultMessage:"What is our company's current policy on work from home?"}),prompt:u.formatMessage({id:"P0W1ks",defaultMessage:"What is our company's current policy on work from home?"}),icon:t.jsx(as,{className:"h-full w-full"}),body:"",theme:H.ContextualAnswers}]}),[u]),j=!!co(),T=uo({exposed:j})==="autocomplete",P=!(!j||!e.isEmpty()||!T||o||![q.ContextualAnswers].includes(r)),{caSuggestions:R}=$n({skip:!P});i.useEffect(()=>{P&&l(N=>R.length>0?N.length>0&&!N.some(k=>k.theme===H.ContextualAnswers)?N:R:N.length>0?N:C[H.ContextualAnswers].slice(0,f))},[C,R,f,l,P]),i.useEffect(()=>{const N=()=>{l(k=>k.filter(L=>L.theme!==H.Search&&L.theme!==H.Image))};if(e.getCurrentText()==="")if(h)d.length>0?l(d):p();else if(r===q.PictureV2){const k=mn(u);l(k)}else N();else N()},[m,e,p,h,l,d,r,u]),i.useEffect(()=>{h&&e.getCurrentText()===""&&d.length>0&&Pt(d,s)},[h,e,d,s]);const W=f-m.filter(g).length,M=Jn(h),{layer:E}=de("4031588851"),G=E.get("autocomplete_min_char",4),O=E.get("autocomplete_fetch_interval",200),U=i.useRef(null),Y=i.useCallback(mo(async N=>{const k=e.getCurrentText();if(!k||k.length<G||k.length>80||e.hasMultipleLines()){l([]);return}if(!n&&!(U.current&&U.current.length>G&&k.startsWith(U.current)))try{const L=(await Vn({text:k,numCompletions:N,isUnauthenticated:S,isThreadUsingSearchMode:h,autocompleteMode:M,activeSystemHint:r})).filter(g).map(v);l(B=>{const re=B.filter(g),pt=L.filter(Ve=>{const K=Xe(Ve);return!re.some(Me=>{const he=Xe(Me);if(K===he)return!0;const ee=/[\p{P}\p{S}]$/u,ge=K.replace(ee,""),pe=he.replace(ee,"");return ge===he||K===pe||ge===pe})}).slice(0,f-re.length);return[...re,...pt]}),L.length>0&&Pt(L,s)}catch{}},M==="BING"?150:O),[e,M,v,O,r]);ho(N=>N.files);const Ue=r===q.Research,ze=Bn(),Ce=Ue&&ze,ae=i.useCallback(()=>{w(),W>0&&Y(W)},[Y,w,W]);i.useEffect(()=>{n&&l([])},[n,l]);const oe=i.useMemo(()=>M==="HARDCODED"?w:ae,[M,ae,w]),ne=!1,me=i.useCallback(()=>{oe()},[oe,ne,Ce,l]),Z=i.useCallback(()=>{e instanceof sa&&w(!0),e.getCurrentText().indexOf(`
`)>0&&(l([]),b(void 0))},[e,l,w,ne,Ce]);return i.useEffect(()=>e.subscribe("input",()=>{me()}),[e,me]),i.useEffect(()=>e.subscribe("change",()=>{Z()}),[e,Z]),{autocompletions:m,matchaData:y}},Yn=s=>{const[e,o]=i.useState([]),n=i.useCallback(async()=>{const r=(await Ge.safePost("/conversation/experimental/generate_trending_suggestions",{requestBody:{num_items:s},authOption:Ft.SendIfAvailable})).suggestions.map((m,c)=>({type:z.Trending,title:De(m),body:"",icon:t.jsx(go,{className:"h-full w-full"}),prompt:De(m),id:`search-trending-${c}`,theme:H.Search}));return o(r),r},[s]);return{trendingSuggestions:e,fetchTrendingSuggestions:n}},Qn=s=>{const e=/(["'])(?:(?=(\\?))\2.)*?\1/g,o=s.match(e),n=[];let a=0;return o&&o.forEach(r=>{const m=s.indexOf(r,a);m>a&&n.push({text:s.slice(a,m),isMatched:!1}),n.push({text:r,isMatched:!0,className:"font-medium"}),a=m+r.length}),a<s.length&&n.push({text:s.slice(a),isMatched:!1}),n},$n=({skip:s})=>{const{data:e=[],refetch:o}=Js({queryKey:["caSuggestions"],queryFn:async()=>(await Ge.safeGet("/ca/v2/user/suggested_starter_prompts")).suggestions.map((a,r)=>{const m=fo(a.related_file_type)??as,c=t.jsx(m,{className:"h-full w-full"}),x=Qn(a.prompt);return{type:z.Autocomplete,title:De(a.prompt),body:"",icon:c,prompt:De(a.prompt),id:`ca-suggestions-${r}`,theme:H.ContextualAnswers,autocompletionChunks:x}}),enabled:!s});return{caSuggestions:e,fetchCaSuggestions:o}};function De(s){return s.split(" ").map(po).join(" ")}const Xe=s=>`${s.title}${s.body}`.toLocaleLowerCase();function Kn(){const{layer:s}=de("4031588851",{shouldLogExposure:!1}),e=s.get("autocomplete_qualified_start_date","2099-09-13T00:00:00Z"),o=ss();return!!o&&o.created*1e3>=new Date(e).getTime()}function Jn(s){const{isUnauthenticated:e}=ue(),o=te("1468311859").value,n=te("2053937752").value,a=te("3664702598").value,r=te("471233253").value,{layer:m}=de("4031588851"),{layer:c}=de("3533083032"),x=Kn(),_=!e&&o||e&&n,f=(!e&&a||e&&r)&&x;let y="HARDCODED";{const b=e?c:m;if(s){const l=b.get("search_autocomplete_mode","");_&&l&&(y=l)}else f&&(y=b.get("autocomplete_mode","HARDCODED"))}return y}const Xn=({clientThreadId:s,isGizmoThread:e})=>{const o=je(),{autocompletions:n,matchaData:a}=qn({clientThreadId:s,composerController:o,isGizmoThread:e});return i.useEffect(()=>(o.store.setState({autocompletions:n,matchaData:a}),()=>{o.store.setState({autocompletions:[],matchaData:void 0})}),[n,o,a]),null},Zn=({clientThreadId:s})=>{const e=Q(),o=ht(l=>l.activeStageSidebar),n=it(s),a=xo(Hs.WorkspaceShareLinks),{isUnauthenticated:r}=ue(),m=Wt(),c=ot(s),x=Fe(c),_=Le(e,"16480203"),f=bo(),y=a&&n&&!r&&!m&&(!x||_)&&!f,b=!o;return t.jsx("div",{className:"flex items-center gap-2",id:"conversation-header-actions",children:t.jsx(an,{showShareButton:y,showProfileDropdown:b,clientThreadId:s})})},er=st(()=>at(()=>import("./j7fx9sn5hw11wqe0.js"),__vite__mapDeps([7,2,1,3,8,9,4,5,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,6,34])).then(s=>s.GizmoUsingAsOwnerNotice));function tr({clientThreadId:s,transparentBackground:e,isEmptyState:o}){const{isNewScrollEnabled:n}=os(),a=ot(s),r=Fe(a),m=yo(),c=So(),{data:x}=mt(a),_=ve(),f=vo(),y=wo(),b=Ae(s),l=ht(C=>C.isConversationScrolledFromTop),d=Q(),p=se(s,C=>X.hasUserMessage(C))||!b,S=ls(),h=S&&y,{shouldShowLeftGetPlusPill:g,shouldShowCenterGetPlusPill:v}=jo(s,h);if(m)return null;const w=!Ot(d)&&!p&&rt(d,"1697094676").get("hide_dropdown",!1),u=f&&(r||!a)?t.jsx(No,{children:t.jsx(To,{children:g?t.jsx("div",{className:"text-token-text-primary px-3 text-lg",children:He}):w?null:t.jsx(Lt,{clientThreadId:s})})}):g?t.jsx("div",{className:"text-token-text-primary px-3 text-lg",children:He}):w?null:t.jsx(Lt,{clientThreadId:s});return t.jsxs(t.Fragment,{children:[t.jsxs(_o,{id:"page-header",className:F("pointer-events-none select-none [view-transition-name:var(--vt-page-header)] *:pointer-events-auto motion-safe:transition max-md:hidden",o&&"absolute start-0 end-0",!a&&"@[84rem]/thread:absolute @[84rem]/thread:start-0 @[84rem]/thread:end-0 @[84rem]/thread:shadow-none!",!a&&!S&&"@[84rem]/thread:bg-transparent",e&&!S&&"bg-transparent",!n&&l?"[box-shadow:var(--sharp-edge-top-shadow)]":"[box-shadow:var(--sharp-edge-top-shadow-placeholder)]",n&&"[box-shadow:var(--sharp-edge-top-shadow-placeholder)] group-data-scroll-from-top/thread:[box-shadow:var(--sharp-edge-top-shadow)]",l&&v&&"@[84rem]/thread:bg-token-main-surface-primary @[84rem]/thread:[box-shadow:var(--sharp-edge-top-shadow)]!"),children:[t.jsxs("div",{className:"absolute start-1/2 ltr:-translate-x-1/2 rtl:translate-x-1/2",children:[x!=null&&_?.isWorkspaceAccount()&&x.gizmo.tags?.includes(Co.WorkspaceDisabled)&&t.jsx(er,{gizmo:x}),t.jsx(Mo,{gizmoId:a,clientThreadId:s}),v&&t.jsx(Et,{}),h&&t.jsx(fn,{})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx(on,{clientThreadId:s}),u,g&&t.jsx(Et,{})]}),t.jsx(Zn,{clientThreadId:s})]}),c&&t.jsx(ko,{})]})}const sr=st(()=>at(()=>import("./j2c9fq73ntvfrlos.js"),__vite__mapDeps([35,2,4,1,3,5,36,37])));function ar({clientThreadId:s}){const e=ct(),o=it(s),n=se(s,X.getGizmoId),a=async()=>{o&&(await Ut.patchConversation(o,{is_archived:!1}),e.invalidateQueries({queryKey:["conversation",s]}),Qs(o,r=>{r.isArchived=!1}),ns(e,n))};return t.jsxs("div",{className:"my-6 flex flex-col items-center justify-center gap-4",children:[t.jsx("div",{className:"text-token-text-secondary px-3 text-center text-sm",children:t.jsx(D,{id:"thread.archivedConversationDescription",defaultMessage:"This conversation is archived. To continue, please unarchive it first."})}),t.jsx("div",{children:t.jsx(Re,{disabled:!o,onClick:a,icon:tn,children:t.jsx(D,{id:"thread.unarchiveButton",defaultMessage:"Unarchive"})})})]})}const or=function({clientThreadId:s,getGizmosCompletionParams:e,hideDisclaimer:o,hideHeader:n,messagesVerticalAlign:a="top",renderEmptyState:r}){const m=Ws(),{isNewScrollEnabled:c,autoPinningEnabled:x}=os(),{data:_}=nt(),f=Po(s),y=Ds(),[b,l,d,p,S,h,g,v]=se(s,I=>[I?.isLoading,X.getCurrentLeafId(I),X.hasUserMessage(I),X.getConversationTurns(I).length,X.isArchived(I),I?.modelId,I?X.getGizmoId(I):y,I?.conversationOrigin===$s.APPLE]),w=it(s),u=ct(),{prefetchSearchPromises:C}=ut(),[j]=zt(),T=!!j.get("message"),[P,R]=i.useState(C?.navlink);i.useEffect(()=>{b||(Ae(s)?jt.addTiming("chatgpt.web.chatPage.renderNewConversation"):jt.addTiming("chatgpt.web.chatPage.renderExistingConversation"))},[s,b]);const{setTargetedContent:W}=Eo(),M=m?.includes(Fs),E=null,G=p>=2,{pageType:O}=Ao(),U=Q(),Y=Se(),Ue=ye(Y.isImageGenLandingPageEnabled$),ze=ye(Y.isAllPagesEnabled$),Ce=Le(U,"1909635392"),ae=i.useContext(Us),oe=zs(ae),ne=Vs(ae),me=Io(),Z=ls(),{isOpen:N}=rn(),k=!!g,L=Ae(s)&&!G&&(At(f)||f?.kind===Bs.GizmoTest)&&!me&&!Z&&C==null&&(!oe||k),B=O?.type==="landing-page"&&(ze||O.value===q.PictureV2&&Ue);Le(U,"733205176");const re=L&&!d&&C==null&&(!oe||k),Ve=Xt(_).id,K=h??Ve,Me=!!h,he=Lo(_?.models,K),ee=Ro(s,f),ge=Go();Oo(p,s),i.useEffect(()=>{ge||W(void 0)},[s,W,ge,l]),i.useEffect(()=>{We.setIsConversationScrolledFromTop(!1)},[s]),i.useEffect(()=>{const I=new URLSearchParams(window.location.search),be=I.get("src");if(be==="history_search"){I.delete("src");const Ne=I.toString(),ws=`${window.location.pathname}${Ne?`?${Ne}`:""}${window.location.hash}`;window.history.replaceState({},document.title,ws)}w&&be==="history_search"&&Ut.patchConversation(w,{touch:!0}).then(()=>{ns(u,g)})},[w,g,u]);const pe=Bt(s),Be=i.useCallback(I=>{pe(e?e(I):I)},[pe,e]),qe=_e(),us=Kt(),ms=lt(),Ye=i.useRef(null);Ye.current=I=>{B?qe.transitionToPage({type:"home",value:void 0},()=>{ms("/",{preventScrollReset:!0}),Be(I)}):L&&!us&&rt(U,"3253785454").get("should_animate_composer",!1)?ts({className:sn["composer-slide"],update:()=>Be(I)}):Be(I)};const fe=i.useCallback(I=>Ye.current?.(I),[Ye]);i.useEffect(()=>{qe.signalTransitionReady()},[qe,B,s]);const hs=Ho({clientThreadId:s,handleRequestCompletion:fe,prefetchSearchThreadIdPromise:C?.threadId})&&P==null,Qe=i.useRef(null),gs=I=>{if(c&&!B)return t.jsx(Xo,{allowScrollToEnd:!ne,allowScrollToTop:!ne&&v,clientThreadId:s,enableAutoScrollPinning:x,initScrolledToEnd:P==null&&!T,threadFooterRef:Ke,threadRootRef:xt,children:I});{const be=t.jsx("div",{className:"relative h-full",children:t.jsxs("div",{className:F("flex h-full flex-col overflow-y-auto [scrollbar-gutter:stable_both-edges] @[84rem]/thread:pt-(--header-height)"),ref:Qe,children:[t.jsx(Zo,{setIsScrolledToEdge:Ne=>{We.setIsConversationScrolledFromTop(Ne)},options:{root:Qe?.current}}),I]})});return P!=null?be:t.jsx(Ys,{children:t.jsxs(i.Suspense,{fallback:null,children:[t.jsx(en,{}),be]})})}};i.useEffect(()=>{Z||(document.title=ee??"ChatGPT")},[ee,E,Z]);const ps=qs(ae),$e=ve(),fs=$e&&!$e.isTeam()&&!$e.isEnterprisey(),ft=!o&&!ps&&!oe&&!(L&&fs)&&At(f),xt=i.useRef(null),bt=i.useRef(null),Ke=i.useRef(null),yt=Wo(I=>I.composerHeight),xs=i.useMemo(()=>({threadContentScrollContainerElementRef:bt,footerRootContainerElementRef:Ke}),[]),bs=!L&&!B,ys=gt(),Ss=Fe(g),xe=k&&Ss,ke=!xe,vs=L&&!B,St=B&&O?.type==="landing-page";return t.jsx(Do.Provider,{value:P,children:t.jsx(Fo,{clientThreadId:s,children:t.jsx(rs,{clientThreadId:s,children:t.jsxs(dt,{clientThreadId:s,children:[M&&t.jsx(sr,{}),!Z&&t.jsx(Uo,{children:ee!=null&&t.jsx("title",{children:ee})}),t.jsx(zo.Provider,{value:fe,children:t.jsxs(es,{children:[t.jsxs("div",{id:"thread",ref:xt,className:F("group/thread @container/thread h-full w-full",c&&!B&&Yo.threadRoot,B&&"overflow-y-auto"),children:[t.jsxs(hn,{noKeyboard:!0,clientThreadId:s,currentModelConfig:he,className:F("composer-parent flex flex-col focus-visible:outline-0",!B&&"h-full"),children:[t.jsxs(Vo,{value:xs,children:[!n&&t.jsx(tr,{clientThreadId:s,isEmptyState:re}),Ce&&t.jsx(Bo,{clientThreadId:s}),t.jsxs("div",{ref:bt,className:F("flex basis-auto flex-col",bs&&"-mb-(--composer-overlap-px) [--composer-overlap-px:24px]",xe||k||!L?"grow":"shrink",!L&&"overflow-hidden",L&&!xe&&!k&&"min-[510px]:max-[768px]:mt-[25dvh]! @max-[31.9rem]/thread:grow @max-[31.9rem]/thread:justify-center @lg/thread:mt-[calc(30dvh+25px)]"),style:{"--composer-height":yt?`${yt}px`:void 0},children:[St&&t.jsx(Fn,{systemHint:O.value}),!B&&t.jsx(t.Fragment,{children:!b&&!hs?re?r??t.jsx(t.Fragment,{children:k?t.jsx(nn,{clientThreadId:s,gizmoId:g,onRequestCompletion:fe,currentModelId:K}):t.jsx(En,{clientThreadId:s,currentModelId:K,isModelLoaded:Me})}):G||P!=null?gs(t.jsx(xn,{onRequestCompletion:fe,clientThreadId:s,scrollContainerRef:Qe,prefetchNavlink:P,setPrefetchNavlink:R},s)):null:null}),!1]})]}),t.jsxs("div",{id:"thread-bottom-container",className:F("isolate z-3 w-full basis-auto has-data-has-thread-error:pt-2 has-data-has-thread-error:[box-shadow:var(--sharp-edge-bottom-shadow)] md:border-transparent md:pt-0 dark:border-white/20 md:dark:border-transparent",!B&&!ft&&!ne&&"mb-4",k||xe||!L?"":ke&&L&&ys?"@lg/thread:grow":"lg:grow",ke&&"flex flex-col"),ref:Ke,children:[S?t.jsx(ar,{clientThreadId:s}):t.jsxs(t.Fragment,{children:[(!L||ke)&&!N&&t.jsx(gn,{isGizmoThread:k,isProjectThread:xe,clientThreadId:s,isNewThread:L,currentModelId:K,onRequestCompletion:fe,shouldUseUnifiedComposer:ke,isModelLoaded:Me}),vs&&t.jsx(Xn,{clientThreadId:s,isGizmoThread:k})]}),ft?t.jsx("div",{className:"text-token-text-secondary relative mt-auto flex min-h-8 w-full items-center justify-center p-2 text-center text-xs md:px-[60px]",children:t.jsx(qo,{clientThreadId:s})}):null]})]}),St&&t.jsx(Jt,{children:t.jsx(Un,{systemHint:O.value})})]}),t.jsx(Qo,{clientThreadId:s,isStaticSharedThread:!1,isDynamicSharedThread:me}),t.jsx($o,{}),t.jsx(vn,{conversationId:s}),t.jsx(Ko,{}),t.jsx(Jo,{conversationId:s}),!1]})})]})})})})},Sr=Zs.memo(or);export{Zn as C,Pn as I,Sr as M,Lt as T};
//# sourceMappingURL=bzpm2hv3f3hhm416.js.map
