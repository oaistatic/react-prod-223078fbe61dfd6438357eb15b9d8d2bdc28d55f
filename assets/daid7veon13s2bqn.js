import{r as c,e as ie,j as e,i as b,M as x,o as le,f as Z,b as ce}from"./b8ijctzpgh0s7wpx.js";import{ex as ue,ad as K,c as I,B as T,s as de,N as me,ca as fe,l as he,ab as xe}from"./citrwydz0bgriwlc.js";import{h$ as k,oM as ge,i5 as G,cC as f,oN as we,S as je,dY as E,cx as X,nS as pe,cs as ye,a6 as Q,d4 as ee,d5 as De,jw as ve}from"./krbmwir12ubt4od1.js";const be=t=>c.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t},c.createElement("path",{d:"M10.625 7.91667C10.625 7.57149 10.9048 7.29167 11.25 7.29167H12.0833C12.4285 7.29167 12.7083 7.57149 12.7083 7.91667V12.0833C12.7083 12.4285 12.4285 12.7083 12.0833 12.7083H11.25C10.9048 12.7083 10.625 12.4285 10.625 12.0833V7.91667Z"}),c.createElement("path",{d:"M7.91667 7.29167C7.57149 7.29167 7.29167 7.57149 7.29167 7.91667V12.0833C7.29167 12.4285 7.57149 12.7083 7.91667 12.7083H8.75001C9.09518 12.7083 9.37501 12.4285 9.37501 12.0833V7.91667C9.37501 7.57149 9.09518 7.29167 8.75001 7.29167H7.91667Z"}),c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10 2.08496C14.3713 2.08496 17.915 5.62867 17.915 10C17.915 14.3713 14.3713 17.915 10 17.915C5.62867 17.915 2.08496 14.3713 2.08496 10C2.08496 5.62867 5.62867 2.08496 10 2.08496ZM10 3.41504C6.3632 3.41504 3.41504 6.3632 3.41504 10C3.41504 13.6368 6.3632 16.585 10 16.585C13.6368 16.585 16.585 13.6368 16.585 10C16.585 6.3632 13.6368 3.41504 10 3.41504Z"})),V={messages:ie({delete:{id:"jawbone.delete",defaultMessage:"Delete"},pause:{id:"jawbone.pause",defaultMessage:"Pause"},pauseFailure:{id:"jawbone.pauseAutomationFailure",defaultMessage:"Failed to pause the automation"},resume:{id:"jawbone.resume",defaultMessage:"Resume"},enableFailure:{id:"jawbone.resumeFailure",defaultMessage:"Failed to resume the automation"},notificationsTitle:{id:"jawbone.notificationsTitle",defaultMessage:"Notifications"},notificationsDesktopAndMobile:{id:"jawbone.notificationsDesktopAndMobile",defaultMessage:"Desktop & mobile"},notificationsEmail:{id:"jawbone.notificationsEmail",defaultMessage:"Email"}})};function Ce({targetTimeUTC:t,useShortForm:s=!1}){return e.jsx(ue,{fallback:void 0,name:"JawboneLocalizedRuntime",children:e.jsx(Se,{targetTimeUTC:t,useShortForm:s})})}function Se({targetTimeUTC:t,useShortForm:s=!1}){const o=b(),{localDate:r,today:i,tomorrow:a,dayAfterTomorrow:n,newWeek:l,localizedTime:u}=Me(t,o.locale);if(r.toDateString()===i.toDateString())return k.runtimeToday(u);if(r.toDateString()===a.toDateString())return k.runtimeTomorrow(u);if(r>=n&&r<l){const d=new Intl.DateTimeFormat(o.locale,{weekday:"long"}).format(r);return k.runtimeNextFiveDays(d,u)}else if(r.getFullYear()===i.getFullYear()){const d=new Intl.DateTimeFormat(o.locale,{month:"long",day:"numeric"}).format(r);return s?d:k.runtimeThisYear(d,u)}else{const d=new Intl.DateTimeFormat(o.locale,{year:"numeric",month:"short",day:"numeric"}).format(r);return s?d:k.runtimeOutsideThisYear(d,u)}}function Me(t,s){const o=new Date(t);if(isNaN(o.getTime()))throw new Error(`Invalid targetTimeUTC provided: ${t}`);const r=o,i=new Date;i.setHours(0,0,0,0);const a=new Date(i);a.setDate(a.getDate()+1);const n=new Date(i);n.setDate(n.getDate()+2);const l=new Date(i);l.setDate(i.getDate()+7);const u=new Intl.DateTimeFormat(s,{hour:"numeric",minute:r.getMinutes()===0?void 0:"numeric",hour12:!0}).format(r);return{localDate:r,today:i,tomorrow:a,dayAfterTomorrow:n,newWeek:l,localizedTime:u}}function Te({item:t,closeModal:s,onConfirm:o}){const r=b(),i=K(),{mutate:a,isPending:n}=ge({automation_id:t.id,onSuccess:()=>{i.success(r.formatMessage(f.deleteModalSuccess),{hasCloseButton:!0}),o?.(),s()},onError:()=>{i.danger(r.formatMessage(f.deleteModalFailure),{hasCloseButton:!0})}});return e.jsx(G,{isOpen:!0,title:r.formatMessage(f.deleteModalTitle),primaryButtonColor:"danger",onClose:s,confirmText:r.formatMessage(V.messages.delete),onConfirm:()=>{a()},loading:n,children:e.jsx("div",{className:"text-sm",children:e.jsx(x,{...f.deleteModalConfirmation})})})}const v=c.createContext({scheduleComponents:{frequency:"custom"},setFrequency:()=>{},setStartDate:()=>{},setByDay:()=>{},setByMonthDay:()=>{},setByYearDay:()=>{},setByMonth:()=>{},setTime:()=>{},startDate:void 0,nextRunTimes:[],scheduleErrors:void 0,validFrequencies:void 0,setValidFrequencies:()=>{}});function rt({initialScheduleComponents:t,initialValidFrequencies:s,nextRunTimes:o,children:r}){const[i,a]=c.useState(t),[n,l]=c.useState(void 0),[u,d]=c.useState(void 0),[w,p]=c.useState(s);return e.jsx(v.Provider,{value:{scheduleComponents:i,setFrequency:m=>{a({...i,frequency:m})},setStartDate:m=>{l(m),d(Ne(m)),a({...i,start_time:m.toISOString()})},setByDay:m=>{a({...i,by_day:m})},setByMonthDay:m=>{a({...i,by_month_day:m})},setByYearDay:m=>{a({...i,by_year_day:m})},setByMonth:m=>{a({...i,by_month:m})},setTime:(m,g)=>{a({...i,by_hour:m,by_minute:g,by_second:0})},startDate:n,scheduleErrors:i.frequency!=="once"?void 0:u,nextRunTimes:o,setValidFrequencies:p,validFrequencies:w},children:r})}function Ne(t){let s=!1;const o=new Date;o.setFullYear(o.getFullYear()+2),t.getTime()>=o.getTime()&&(s=!0);let r=!1;const i=new Date;if(i.setSeconds(0,0),t.getTime()<i.getTime()&&(r=!0),s||r)return{tooFarInFuture:s,inPast:r}}function te(t){switch(t.frequency){case"once":return t.start_time?new Date(t.start_time):void 0;case"daily":case"weekly":case"monthly":case"yearly":return t.by_hour==null||t.by_minute==null?void 0:new Date(0,0,0,t.by_hour,t.by_minute);case"custom":return}}function Fe(t,s){const o=s.scheduleComponents.start_time?new Date(s.scheduleComponents.start_time):new Date;o.setHours(t.getHours(),t.getMinutes()),s.setStartDate(o)}function ke(t,s){const o=te(s.scheduleComponents),r=new Date(t);r.setHours(o?.getHours()??0,o?.getMinutes()??0),s.setStartDate(r)}function Ee({initialDate:t,onClick:s}){const o=b(),{scheduleComponents:r}=c.useContext(v),i=c.useMemo(()=>Ie(r),[r]),[a,n]=c.useState(t),u=new Intl.DateTimeFormat(o.locale,{month:"short",year:"numeric"}).format(a);return e.jsxs("div",{className:"mx-5 my-2 flex flex-col gap-0.5",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"grow text-lg font-semibold",children:u}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(L,{onClick:()=>n(new Date(a.getFullYear(),a.getMonth()-1,1)),children:e.jsx(we,{className:"icon-sm"})}),e.jsx(L,{onClick:()=>{n(new Date(a.getFullYear(),a.getMonth()+1,1))},children:e.jsx(je,{className:"icon-sm"})})]})]}),e.jsx(Je,{visibleDate:a,selectedDate:i,onClick:s})]})}function L(t){const{children:s,...o}=t;return e.jsx("button",{...o,className:"flex h-10 w-10 items-center justify-center",children:s})}function Ie(t){return t.start_time?new Date(t.start_time):void 0}function W(t,s){return new Date(t,s+1,0).getDate()}function _e(t,s){return new Date(t,s,1).getDay()}function Je({visibleDate:t,selectedDate:s,onClick:o}){const r=b(),i=c.useContext(v),a=6,n=c.useMemo(()=>{const d=t.getFullYear(),w=t.getMonth(),p=W(d,w),m=_e(d,w),g=[];for(let y=m-1;y>=0;y--)g.push(new Date(d,w-1,W(d,w-1)-y));for(let y=1;y<=p;y++)g.push(new Date(d,w,y));const D=a*7-g.length;for(let y=1;y<=D;y++)g.push(new Date(d,w+1,y));return g},[t]),l=c.useMemo(()=>{const d=new Intl.DateTimeFormat(r.locale,{weekday:"narrow"});return Array.from({length:7},(w,p)=>d.format(new Date(1970,0,p+4)))},[r.locale]),u=new Date;return u.setHours(0,0,0,0),e.jsxs("div",{children:[e.jsx("div",{className:"flex",children:l.map((d,w)=>e.jsx("div",{className:"flex h-10 w-10 items-center justify-center text-sm font-medium",children:d},w))}),Array.from({length:a}).map((d,w)=>e.jsx("div",{className:"flex",children:n.slice(w*7,(w+1)*7).map(p=>{const m=p>=u;return e.jsx("button",{className:"h-10 w-10",onClick:()=>{m&&(ke(p,i),o())},children:e.jsx(Oe,{dayNumber:p.getDate(),isSelected:!!s&&s.toDateString()===p.toDateString(),isSelectable:m})},p.getDay())})},w))]})}function Oe({dayNumber:t,isSelected:s,isSelectable:o}){return e.jsx("div",{className:"h-full w-full p-1",children:e.jsx("div",{className:I("flex h-full w-full items-center justify-center rounded-full text-sm",!o&&"text-token-text-tertiary",!s&&o&&"hover:bg-token-main-surface-secondary",s&&"bg-black font-semibold text-white dark:bg-white dark:text-black"),children:t})})}const Be="flex-1",Ae="max-h-96 overflow-y-auto";function B({rootClassName:t,contentClassName:s,trigger:o,children:r,open:i,modal:a=!0,onOpenChange:n,onCloseAutoFocus:l}){return e.jsx("div",{className:I(t??Be),children:e.jsxs(E.Root,{open:i,onOpenChange:n,modal:a,children:[o,e.jsx(E.Portal,{children:e.jsx(E.Content,{className:s??Ae,side:"bottom",onCloseAutoFocus:l,children:r})})]})})}const qe="w-full justify-start rounded-lg border-token-border-medium";function A({className:t,showError:s=!1,children:o}){return e.jsx(E.Trigger,{className:I(qe,t),style:{borderColor:s?"var(--text-error)":void 0},children:e.jsxs("div",{className:"flex w-full items-center gap-1",children:[e.jsx("div",{className:"grow text-start",children:o}),e.jsx(X,{className:"icon-sm text-token-text-tertiary"})]})})}function H({options:t,initialOption:s,showError:o=!1,onClick:r}){return e.jsx(B,{trigger:e.jsx(A,{showError:o,children:s?.label??t[0].label}),children:e.jsx(Y,{options:t,onClick:r})})}function Y({options:t,onClick:s}){return e.jsx(e.Fragment,{children:t.map((o,r)=>e.jsx(E.Item,{onClick:()=>s?.(o),children:o.label},r))})}function ne(t){const s=new Date,o=s.getFullYear(),r=s.getMonth(),i=s.getDate();let a;if(a=t.match(/^(\d{1,2}):(\d{2})\s?([ap]m)$/i),a){let n=parseInt(a[1],10);const l=parseInt(a[2],10),u=a[3].toLowerCase();if(n>=1&&n<=12&&l>=0&&l<=59)return u==="pm"&&n!==12&&(n+=12),u==="am"&&n===12&&(n=0),new Date(o,r,i,n,l)}if(a=t.match(/^([ap]m)\s?(\d{1,2}):(\d{2})$/i),a){let n=parseInt(a[2],10);const l=parseInt(a[3],10),u=a[1].toLowerCase();if(n>=1&&n<=12&&l>=0&&l<=59)return u==="pm"&&n!==12&&(n+=12),u==="am"&&n===12&&(n=0),new Date(o,r,i,n,l)}if(a=t.match(/^(\d{1,2})\s?([ap]m)$/i),a){let n=parseInt(a[1],10);const l=a[2].toLowerCase();if(n===12&&l==="am")return n=0,new Date(o,r,i,n,0);if(n>=1&&n<=11&&l==="pm")return n+=12,new Date(o,r,i,n,0);if(n>=1&&n<=12)return new Date(o,r,i,n,0)}if(a=t.match(/^(\d{1,2}):(\d{2})$/),a){const n=parseInt(a[1],10),l=parseInt(a[2],10);if(n>=0&&n<=23&&l>=0&&l<=59)return new Date(o,r,i,n,l)}if(a=t.match(/^(\d{1,2})(\d{2})$/),a){const n=parseInt(a[1],10),l=parseInt(a[2],10);if(n>=0&&n<=23&&l>=0&&l<=59)return new Date(o,r,i,n,l)}if(a=t.match(/^(\d{1,2})$/),a){const n=parseInt(a[1],10);if(n>=0&&n<=23)return new Date(o,r,i,n,0)}if(a=t.match(/^(\d{1,2}):$/),a){const n=parseInt(a[1],10);if(n>=0&&n<=23)return new Date(o,r,i,n,0)}}function O(t){return ne(t)}function $(t){return ne(t)!==void 0}function U(t){const s=O(t);return q(s)}function q(t){return t?t.toLocaleTimeString([],{hour:"numeric",minute:"2-digit",hour12:!(new Intl.DateTimeFormat().resolvedOptions().hourCycle==="h23"||new Intl.DateTimeFormat().resolvedOptions().hourCycle==="h24")}):""}function se(t,s){const o=new Date(0,0,0,t,s);return q(o)}function Re(t){const s=O(t);return s&&s.setMinutes(0),q(s)}function _(){const t=c.useContext(v),[s,o]=c.useState(!1),[r,i]=c.useState(!0),a=c.useRef(null),n=c.useRef(null),l=c.useMemo(()=>Pe(),[]),u=te(t.scheduleComponents),d=c.useMemo(()=>u??new Date(new Date().setHours(14,0,0,0)),[u]);c.useEffect(()=>{u||z(d,t)},[u,d,t]);const w=q(d),[p,m]=c.useState(!0),g=c.useRef(w),D=c.useRef(g.current);c.useEffect(()=>{const h=setTimeout(()=>{s&&a.current&&a.current.select()},0);return()=>clearTimeout(h)},[s]),c.useEffect(()=>{const h=setTimeout(()=>{if(s&&n.current){const j=Re(g.current),N=pe(l,M=>M.label===g.current||M.label===j);if(N!==-1&&n.current){const M=n.current.children[N];M&&M.scrollIntoView({block:"center"})}}},0);return()=>clearTimeout(h)},[s,g,l]);const y=h=>{const j=$(h);m(j),D.current=h,j&&(g.current=U(h))},C=()=>{if($(D.current)){const j=U(D.current);g.current=j,D.current=j;const N=O(j);z(N,t)}else{D.current=g.current;const j=O(g.current);z(j,t)}m(!0),a.current&&(a.current.value=g.current)};return e.jsx(B,{trigger:e.jsx(A,{showError:!p||!!t.scheduleErrors,children:e.jsx("div",{className:"flex w-full items-center",children:e.jsx("textarea",{className:"m-0 w-full resize-none border-none bg-transparent p-0 text-sm",defaultValue:g.current,ref:a,rows:1,wrap:"off",onBlur:()=>{C()},onChange:h=>{const j=h.target.value;y(j)},onKeyDown:h=>{h.key===" "&&h.stopPropagation()}})})}),open:s,onOpenChange:h=>{o(h),h?i(!0):C()},onCloseAutoFocus:h=>{h.preventDefault(),a.current&&a.current.select()},modal:!1,children:e.jsx("ul",{ref:n,children:e.jsx(Y,{options:l,onClick:h=>{const j=se(h.value.hour,h.value.minute);y(j),C(),o(!1),a.current&&a.current.select()}})})})}function Pe(){return Array.from({length:96},(s,o)=>{const r=Math.floor(o/4),i=o%4*15;return{label:se(r,i),value:{hour:r,minute:i}}})}function z(t,s){if(t)switch(s.scheduleComponents.frequency){case"once":{Fe(t,s);break}case"daily":case"weekly":case"monthly":case"yearly":{s.setTime(t.getHours(),t.getMinutes());break}}}function F(){const t=b(),{scheduleComponents:s,scheduleErrors:o,setFrequency:r,validFrequencies:i}=c.useContext(v),a=c.useMemo(()=>[{label:t.formatMessage(f.scheduleFrequencyOnce),value:"once"},{label:t.formatMessage(f.scheduleFrequencyDaily),value:"daily"},{label:t.formatMessage(f.scheduleFrequencyWeekly),value:"weekly"},{label:t.formatMessage(f.scheduleFrequencyMonthly),value:"monthly"},{label:t.formatMessage(f.scheduleFrequencyYearly),value:"yearly"},{label:t.formatMessage(f.scheduleFrequencyCustom),value:"custom"}].filter(u=>i===void 0||i?.includes(u.value)),[t,i]),n=a.find(l=>l.value===s.frequency);return c.useEffect(()=>{n||r(a[0].value)},[n,a,r]),e.jsx(H,{options:a,initialOption:n,onClick:l=>r(l.value),showError:!!o})}function ze(){const t=b(),{scheduleComponents:s,scheduleErrors:o,setByDay:r}=c.useContext(v),i=Array.from({length:7},(u,d)=>new Intl.DateTimeFormat(t.locale,{weekday:"long",timeZone:"UTC"}).format(new Date(Date.UTC(2021,2,d+1)))),a=["MO","TU","WE","TH","FR","SA","SU"],n=i.map((u,d)=>({label:u,value:a[d]})),l=n.find(u=>u.value===s.by_day);return c.useEffect(()=>{l||r(n[0].value)},[l,n,r]),e.jsx(H,{options:n,initialOption:l,onClick:u=>r(u.value),showError:!!o})}function ae({useShortForm:t=!1}){const{scheduleComponents:s,scheduleErrors:o,setByMonthDay:r}=c.useContext(v),i=Array.from({length:31},(u,d)=>({label:(d+1).toString(),value:d+1})),a=(u,d=new Date().getFullYear())=>new Date(d,u,0).getDate(),n=i.slice(0,a(s.by_month??1)),l=n.find(u=>u.value===s.by_month_day);return c.useEffect(()=>{l||r(n[0].value)},[l,n,r]),e.jsx(B,{rootClassName:t?"flex-none":void 0,trigger:e.jsx(A,{className:t?"w-[75px]":void 0,showError:!!o,children:l?.label}),children:e.jsx(Y,{options:n,onClick:u=>r(u.value)})})}function Ve(){const t=b(),{scheduleComponents:s,scheduleErrors:o,setByMonth:r}=c.useContext(v),i=new Intl.DateTimeFormat(t.locale,{month:"long"}),a=Array.from({length:12},(l,u)=>({label:i.format(new Date(0,u)),value:u+1})),n=a.find(l=>l.value===s.by_month);return c.useEffect(()=>{n||r(a[0].value)},[n,a,r]),e.jsx(H,{options:a,initialOption:n,onClick:l=>r(l.value),showError:!!o})}function He(){const t=b(),{scheduleComponents:s,scheduleErrors:o,setStartDate:r}=c.useContext(v),[i,a]=c.useState(!1);c.useEffect(()=>{s.start_time||r(new Date)},[s.start_time,r]);const n=s.start_time?new Date(s.start_time):new Date,l=new Intl.DateTimeFormat(t.locale,{year:"numeric",month:"long",day:"numeric"});return e.jsx(B,{trigger:e.jsx(A,{showError:!!o,children:l.format(n)}),contentClassName:"min-w-[224px]",open:i,onOpenChange:a,children:e.jsx(Ee,{initialDate:n,onClick:()=>a(!1)})})}function Ye(){return e.jsxs("div",{className:"flex gap-2",children:[e.jsx(F,{}),e.jsx(He,{}),e.jsx(_,{})]})}function Le(){return e.jsxs("div",{className:"flex gap-2",children:[e.jsx(F,{}),e.jsx(_,{})]})}function We(){return e.jsxs("div",{className:"flex gap-2",children:[e.jsx(F,{}),e.jsx(ze,{}),e.jsx(_,{})]})}function $e(){return e.jsxs("div",{className:"flex gap-2",children:[e.jsx(F,{}),e.jsx(ae,{}),e.jsx(_,{})]})}function Ue(){return e.jsxs("div",{className:"flex gap-2",children:[e.jsx(F,{}),e.jsx(Ve,{}),e.jsx(ae,{useShortForm:!0}),e.jsx(_,{})]})}function Ze({automationId:t,conversationId:s,onModalClose:o}){return e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx(F,{}),e.jsx(Ke,{automationId:t}),e.jsx(Ge,{conversationId:s,onModalClose:o})]})}function Ke({automationId:t}){const{data:s,fetchNextPage:o,hasNextPage:r,isFetchingNextPage:i}=le({queryKey:["automation-next-run-times",t],queryFn:({pageParam:n})=>ee.getAutomationNextRunTimes(t,n),getNextPageParam:n=>n.has_more?n.next_run_times[n.next_run_times.length-1]:void 0,initialPageParam:null}),a=c.useRef(null);return c.useEffect(()=>{a.current&&(a.current.scrollTop=a.current.scrollHeight)},[s]),e.jsx("div",{className:"bg-token-main-surface-secondary rounded-lg p-3",children:e.jsxs("div",{ref:a,className:"flex h-full max-h-52 flex-col gap-3 overflow-y-auto text-sm",children:[s?.pages?.flatMap(n=>n.next_run_times).map((n,l)=>e.jsx("div",{children:e.jsx(Ce,{targetTimeUTC:n})},l)),r&&e.jsx("button",{onClick:()=>o(),disabled:i,children:e.jsxs("div",{className:"flex items-center gap-1 text-sm font-medium",children:[e.jsx(x,{id:"qL17GV",defaultMessage:"See more"}),e.jsx(X,{className:"icon-md"})]})})]})})}function Ge({conversationId:t,onModalClose:s}){const o=Z();return t?e.jsxs("div",{className:"border-token-border-medium flex gap-3 rounded-lg border p-4",children:[e.jsx(ye,{}),e.jsxs("div",{className:"flex grow flex-col",children:[e.jsx("span",{className:"text-sm font-medium",children:e.jsx(x,{...f.scheduleCustomScheduleTitle})}),e.jsx("span",{className:"text-token-text-secondary text-sm",children:e.jsx(x,{...f.scheduleCustomScheduleContent})})]}),e.jsx(T,{onClick:()=>{s(),o(Q(t))},children:e.jsx(x,{...f.scheduleCustomScheduleOpenChat})})]}):null}function Xe({automationId:t,conversationId:s,onModalClose:o}){const{scheduleComponents:r}=c.useContext(v);switch(r.frequency){case"once":return e.jsx(Ye,{});case"daily":return e.jsx(Le,{});case"weekly":return e.jsx(We,{});case"monthly":return e.jsx($e,{});case"yearly":return e.jsx(Ue,{});case"custom":return t?e.jsx(Ze,{automationId:t,conversationId:s,onModalClose:o}):null}}function Qe(t){return!!t.id}function et({onClose:t,onConfirm:s}){const o=b();return e.jsx(G,{isOpen:!0,title:o.formatMessage(f.editModalCancel),primaryButtonColor:"danger",onClose:()=>{t()},onConfirm:()=>{s()},children:e.jsx("div",{className:"text-sm",children:e.jsx(x,{...f.cancelModalDescription})})})}function tt({onClick:t}){return e.jsxs("div",{className:"border-token-border-medium flex items-center justify-between rounded-2xl border p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 text-sm font-medium",children:[e.jsx(be,{className:"icon-lg"}),e.jsx(x,{...f.pauseBanner})]}),e.jsx("div",{children:e.jsx(T,{onClick:t,children:e.jsx(x,{...V.messages.resume})})})]})}function it({item:t,source:s,onClose:o,onSave:r=ee.saveAutomation}){const i=b(),a=K();c.useEffect(()=>{de.count(me.JAWBONE,"jawbone_edit_modal.open")},[]);const{scheduleComponents:n,scheduleErrors:l}=c.useContext(v),[u,d]=c.useState(!1),[w,p]=c.useState(!1),[m,g]=c.useState(t.title),[D,y]=c.useState(t.prompt),[C,h]=c.useState(t.is_enabled),j=!!t.id;c.useEffect(()=>{if(l?.tooFarInFuture||l?.inPast){d(!1);return}const S=m!==t.title&&m.length>0||D!==t.prompt&&D.length>0||C!==t.is_enabled||!fe(n,t.schedule_components);d(S)},[l?.tooFarInFuture,l?.inPast,m,D,C,t,n]);const{mutate:N}=ce({mutationFn:()=>r(t.id??null,m,t.schedule,C,D,t.schedule_components.start_time!==n.start_time?Intl.DateTimeFormat().resolvedOptions().timeZone:t.default_timezone,n,t.last_run_time),onSuccess:S=>{S&&De.setAutomation(S.id,S),o(i.formatMessage(f.editModalSaveSuccess))},onError:()=>{a.danger(i.formatMessage(f.editModalSaveFailure),{hasCloseButton:!0}),d(!0),p(!1)}}),[M,R]=c.useState(!1),[oe,P]=c.useState(!1),{value:nt}=he("156153730"),re=Z();return e.jsxs(e.Fragment,{children:[e.jsx(xe,{testId:"modal-jawbone-edit",className:"min-w-[680px] text-sm",isOpen:!0,onClose:()=>{if(u){P(!0);return}o()},showCloseButton:!0,title:e.jsx(x,{...f.editModalTitle}),headerAccessory:s==="tasks"&&e.jsx(T,{icon:ve,color:"secondary",onClick:()=>{re(Q(t.conversation_id))},children:e.jsx(x,{id:"KkyshF",defaultMessage:"View chat"})}),type:"success",children:e.jsxs("div",{className:"flex flex-col gap-6",children:[!C&&e.jsx(tt,{onClick:()=>{h(!0)}}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("div",{className:"text-sm font-medium",children:e.jsx(x,{...f.editModalName})}),e.jsx("textarea",{className:I("border-token-border-medium bg-token-main-surface-primary w-full resize-none rounded-lg text-sm",m.length===0&&"border-token-text-error focus:border-token-text-error"),rows:1,value:m,onChange:S=>g(S.target.value),placeholder:i.formatMessage({id:"GB3SVK",defaultMessage:"Summarize AI news"})}),m.length===0&&e.jsx(J,{children:e.jsx(x,{...f.editModalMissingTaskName})})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("div",{className:"text-sm font-medium",children:e.jsx(x,{...f.editModalInstructions})}),e.jsx("textarea",{className:I("border-token-border-medium bg-token-main-surface-primary w-full resize-none rounded-lg text-sm",D.length===0&&"border-token-text-error focus:border-token-text-error"),rows:3,value:D,onChange:S=>y(S.target.value),placeholder:i.formatMessage({id:"XDXPIp",defaultMessage:"Send a summary of the latest news in AI, focusing on especially surprising stories."})}),D.length===0&&e.jsx(J,{children:e.jsx(x,{...f.editModalMissingInstructions})})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("div",{className:"text-sm font-medium",children:e.jsx(x,{...f.editModalSchedule})}),e.jsx("div",{children:e.jsx(Xe,{automationId:t.id,conversationId:t.conversation_id,onModalClose:o})}),e.jsxs("div",{children:[l?.tooFarInFuture&&e.jsx(J,{children:e.jsx(x,{...f.editModalTooFarInFuture})}),l?.inPast&&e.jsx(J,{children:e.jsx(x,{...f.editModalInPast})})]}),!1]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{className:"flex gap-2",children:[C&&j&&e.jsx(T,{color:"secondary",onClick:()=>{h(!1)},children:e.jsx(x,{...V.messages.pause})}),j&&e.jsx(T,{color:"danger-outline",onClick:()=>{R(!0)},children:e.jsx(x,{...f.editModalDelete})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(T,{color:"secondary",onClick:()=>{if(u){P(!0);return}o()},children:e.jsx(x,{...f.editModalCancel})}),e.jsx(T,{disabled:!u,loading:w,color:"primary",onClick:()=>{p(!0),N()},children:e.jsx(x,{...f.editModalSave})})]})]})]})}),oe&&e.jsx(et,{onClose:()=>P(!1),onConfirm:()=>o()}),M&&Qe(t)&&e.jsx(Te,{item:t,closeModal:()=>R(!1),onConfirm:()=>{R(!1),o()}})]})}function J({children:t}){return e.jsx("div",{className:"text-token-text-error text-sm font-medium",children:t})}export{rt as J,be as S,it as a,Ce as b,V as c,Te as d};
//# sourceMappingURL=daid7veon13s2bqn.js.map
