import{ad as N,ab as P,ac as f,c as y,fW as S,f as _,j as C,b1 as A,O,B as u,eP as W}from"./citrwydz0bgriwlc.js";import{i as v,a as R,f as w,b as F,j as e,M as n,D as T,a9 as B,r as I,ac as L}from"./b8ijctzpgh0s7wpx.js";import{dK as V,e as X,aX as p,ij as $,dN as q,bP as z,dQ as Q,dR as U}from"./krbmwir12ubt4od1.js";import{R as Y,I as h,S as G}from"./mtu1vp4lzjnp5m0h.js";import{u as K}from"./oyi299mxc9s11w2r.js";import{W as Z,r as H,i as J,e as ee,b as te}from"./omp8ie1vzl40ti1z.js";import{E as ae}from"./h63golknli42ptv7.js";import{W as se}from"./gw319re0na8zpsh7.js";import"./ndqm17bbs5ambnrw.js";import"./megablgldkh4lap1.js";import"./hbpbckirom363mgh.js";import"./jekpe1ukp5thtucq.js";import"./b4v20hsjdnh8a64d.js";import"./ku4zsoy6w4wkp690.js";import"./k1h56nx2kjoqc52m.js";import"./exvo283q5zxd2q6r.js";import"./dcml6fn13vfm1zv2.js";import"./nvghija6qp2cunds.js";import"./djd85tifm57yisqi.js";import"./h3krx8dg2s8o2yh5.js";import"./cfe0bfy5asp94vp2.js";import"./jkznwfhp8ahnvlot.js";import"./izdon3syh095bs23.js";import"./dweroubxngal4vlb.js";import"./i7jya7stlyvnzya0.js";import"./cb2t82g498wwhuc2.js";import"./ndwtlsjk3xm27wkq.js";import"./o0ebhsapkoy5qkg1.js";import"./k7nub2yuxq70se07.js";import"./k6ccgr4wxcppeg93.js";import"./dbalwdodzoo02ru2.js";import"./c2d9eukr2hh7n3q0.js";import"./nnffynscsbaol5fb.js";import"./eeyp7d7oqudhas3m.js";import"./nfkxdwnvdjy1s4sn.js";import"./cwi4lsxreiklxbjv.js";function ne({environmentId:s,onClose:t}){const i=v(),m=N(),r=R(),c=w(),{mutate:a,isPending:g}=F({mutationFn:()=>Z.deleteEnvironment(s),onSuccess:async()=>{H(r,s),await J(r,s),m.success(i.formatMessage({id:"wham.deleteEnvironmentModal.environmentDeletedSuccessfully",defaultMessage:"Environment deleted successfully"})),t(),c("/codex/settings/environments")},onError:()=>{m.danger(i.formatMessage({id:"wham.deleteEnvironmentModal.failedToDeleteEnvironment",defaultMessage:"Failed to delete environment"}))}});return e.jsx(P,{testId:"modal-wham-delete-environment",isOpen:!0,type:"danger",title:e.jsx(n,{id:"wham.deleteEnvironmentModal.title",defaultMessage:"Delete environment"}),onClose:t,primaryButton:e.jsx(f.Button,{title:i.formatMessage({id:"wham.deleteEnvironmentModal.delete",defaultMessage:"Delete"}),color:"danger",loading:g,onClick:()=>{a()}}),secondaryButton:e.jsx(f.Button,{title:i.formatMessage({id:"wham.deleteEnvironmentModal.cancel",defaultMessage:"Cancel"}),color:"secondary",onClick:t}),children:e.jsx("div",{className:"text-sm",children:e.jsx(n,{id:"wham.deleteEnvironmentModal.message",defaultMessage:"Tasks that use it will remain, but users wonâ€™t be able to create follow-up tasks."})})})}function o({label:s,children:t,className:i}){return e.jsxs("div",{className:y("flex flex-col gap-1",i),children:[e.jsx("dt",{className:"text-token-text-primary text-sm font-medium",children:s}),e.jsx("dd",{className:"text-token-text-primary text-sm font-normal",children:t})]})}function oe(){const{environmentId:s}=T(),{eligible:t}=V();return t?e.jsx(B,{to:"/codex/onboarding"}):s?e.jsx(ie,{environmentId:s}):e.jsx(S,{})}function ie({environmentId:s}){const t=v(),i=w(),[m,r]=I.useState(!1),c=ee(l=>l.setEnvironmentId),{data:a,isLoading:g,isError:j}=te(s),x=X(),d=x&&a&&a.creator.email===x.email,M=_(),E=K(),b=M?.name??t.formatMessage({id:"wham.environmentDetailsPage.workspace",defaultMessage:"Workspace"}),D=C(),k=A(D,"2134057841");return e.jsxs(se,{topPadding:!0,showSidebar:!1,children:[e.jsx("div",{className:"flex flex-col px-8 md:px-16",children:g?e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsx(O,{})}):j?e.jsx(ae,{title:t.formatMessage({id:"wham.environmentDetailsPage.errorLoadingEnvironment",defaultMessage:"Error loading environment"}),description:t.formatMessage({id:"wham.environmentDetailsPage.errorLoadingEnvironmentDescription",defaultMessage:"Error loading environment description"})}):a?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"border-token-border-default flex flex-col justify-between gap-2 border-b pb-4",children:e.jsxs("div",{className:"flex flex-row items-center justify-between",children:[e.jsxs(Y,{children:[e.jsx(h,{label:t.formatMessage({id:"wham.environmentDetailsPage.environments",defaultMessage:"Environments"}),url:"/codex/settings/environments",className:"text-token-text-tertiary"}),e.jsx(G,{}),e.jsx(h,{label:a.label,url:`/codex/settings/environment/${s}`,className:"text-token-text-primary font-medium"})]}),e.jsxs("div",{className:"flex flex-row gap-2",children:[e.jsx(p,{label:d?void 0:t.formatMessage({id:"wham.environmentDetailsPage.deleteEnvironmentTooltip",defaultMessage:"You cannot delete an environment that you did not create"}),children:e.jsx(u,{color:"danger-outline",onClick:()=>r(!0),disabled:!d,children:e.jsx(n,{id:"wham.environmentDetailsPage.deleteEnvironment",defaultMessage:"Delete"})})}),e.jsx(p,{label:d?void 0:t.formatMessage({id:"wham.environmentDetailsPage.editEnvironmentTooltip",defaultMessage:"You cannot edit an environment that you did not create"}),children:e.jsx(u,{icon:$,onClick:()=>{i(`/codex/settings/environment/${s}/edit`)},color:"secondary",disabled:!d,children:e.jsx(n,{id:"wham.environmentDetailsPage.editEnvironment",defaultMessage:"Edit"})})}),e.jsx(u,{size:"small",color:"secondary",onClick:()=>{c(s),z.recordClickEnv(),i("/codex")},children:e.jsxs("div",{className:"flex items-center gap-0.5",children:[e.jsx(n,{id:"wham.turnInfoRow.useEnvironment",defaultMessage:"Use this"}),e.jsx(q,{className:"icon-sm"})]})})]})]})}),e.jsx("div",{className:"text-token-text-primary py-8 text-xl",children:a.label}),e.jsxs("div",{className:"grid gap-x-12 gap-y-6 md:grid-cols-2",children:[e.jsx(o,{label:t.formatMessage({id:"wham.environmentDetailsPage.creator",defaultMessage:"Creator"}),children:a.creator.email}),e.jsx(o,{label:t.formatMessage({id:"wham.environmentDetailsPage.image",defaultMessage:"Image"}),children:a.machine.label||e.jsx(n,{id:"wham.environmentDetailsPage.noImage",defaultMessage:"No image"})}),e.jsx(o,{label:t.formatMessage({id:"wham.environmentDetailsPage.description",defaultMessage:"Description"}),children:a.description??e.jsx(n,{id:"wham.environmentDetailsPage.noDescription",defaultMessage:"N/A"})}),k&&e.jsx(o,{label:t.formatMessage({id:"wham.environmentDetailsPage.agentNetworkAccess",defaultMessage:"Agent internet access"}),children:a.agent_network_access?.mode==="on"?a.agent_network_access.preset_allowlist===Q?e.jsx(n,{id:"wham.environmentDetailsPage.agentNetworkAccess.unrestricted",defaultMessage:"On: unrestricted"}):a.agent_network_access.preset_allowlist===U?e.jsx(n,{id:"wham.environmentDetailsPage.agentNetworkAccess.codex",defaultMessage:"On: common dependencies"}):e.jsx(n,{id:"wham.environmentDetailsPage.agentNetworkAccess.custom",defaultMessage:"On: custom domains"}):a.agent_network_access==null||a.agent_network_access.mode==="off"?e.jsx(n,{id:"wham.environmentDetailsPage.agentNetworkAccess.off",defaultMessage:"Off"}):null}),e.jsx(o,{label:t.formatMessage({id:"wham.environmentDetailsPage.environmentVariables",defaultMessage:"Environment variables"}),children:e.jsx("pre",{className:"mono text-xs leading-5 break-all whitespace-pre-wrap",children:Object.keys(a.env_vars??{}).filter(l=>!l.startsWith("CODEX_ENV_")).join(`
`)})}),e.jsx(o,{label:t.formatMessage({id:"wham.environmentDetailsPage.secrets",defaultMessage:"Secrets"}),children:e.jsx("pre",{className:"mono text-xs leading-5 break-all whitespace-pre-wrap",children:Object.keys(a.secrets??{}).join(`
`)})}),e.jsx(o,{label:t.formatMessage({id:"wham.environmentDetailsPage.createdAt",defaultMessage:"Created at"}),children:a.created_at?e.jsx(L,{value:new Date(a.created_at*1e3),year:"numeric",month:"long",day:"numeric"}):e.jsx(n,{id:"wham.environmentDetailsPage.noCreationDate",defaultMessage:"No creation date"})}),e.jsx(o,{label:t.formatMessage({id:"wham.environmentDetailsPage.setupScript",defaultMessage:"Setup script"}),children:e.jsx("pre",{className:"mono text-xs leading-5 break-all whitespace-pre-wrap",children:(Array.isArray(a.setup)?a.setup:[a.setup]).filter(Boolean).join(`
`)})}),e.jsx(o,{label:t.formatMessage({id:"wham.environmentDetailsPage.repository",defaultMessage:"Repository"}),children:a.repo_map?Object.values(a.repo_map).map(l=>l.repository_full_name):e.jsx(n,{id:"wham.environmentDetailsPage.noRepository",defaultMessage:"No repository"})}),e.jsx(o,{label:t.formatMessage({id:"wham.environmentDetailsPage.numTasks",defaultMessage:"No. of tasks"}),children:a.task_count??0}),E&&e.jsx(o,{label:t.formatMessage({id:"94ZVks",defaultMessage:"Share"}),children:a.share_settings==="workspace"?t.formatMessage({id:"wham.environmentDetailsPage.sharedWithWorkspace",defaultMessage:"Shared with {workspaceName}"},{workspaceName:b}):t.formatMessage({id:"wham.environmentDetailsPage.private",defaultMessage:"Private"})})]})]}):e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsx(n,{id:"wham.environmentDetailsPage.environmentNotFound",defaultMessage:"Environment not found"})})}),m&&e.jsx(ne,{environmentId:s,onClose:()=>r(!1)})]})}const qe=()=>[{title:"Codex"}],ze=W(function(){return e.jsx(oe,{})});export{ze as default,qe as meta};
//# sourceMappingURL=bn18dtgvhq64abcs.js.map
