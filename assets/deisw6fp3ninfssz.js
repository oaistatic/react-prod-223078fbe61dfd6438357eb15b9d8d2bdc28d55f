import{i as N,a as h,b as _,e as q,j as e,M as p}from"./b8ijctzpgh0s7wpx.js";import{ad as S,b as T,c as M,aq as O,ai as E,aj as R}from"./citrwydz0bgriwlc.js";import{cs as w,bO as B,aX as P,ct as U}from"./krbmwir12ubt4od1.js";import{u as Q}from"./ndqm17bbs5ambnrw.js";import{A}from"./fz34z4n2nuu0f63k.js";function v(){return e.jsx(w,{className:"icon-sm text-token-text-tertiary ms-1"})}function F({onChange:t,enabled:a,Icon:n,label:c,labelValues:l,description:o,onClickInfo:r,tooltip:i,tooltipValues:u,hasPadding:d=!0,className:m,disabled:x=!1,messageAfterTooltip:s=void 0}){return e.jsx(A,{className:M("justify-start",d?"py-6":"py-0",m),children:e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsxs("div",{className:"flex flex-row gap-4",children:[e.jsx(B,{label:"",disabled:x,enabled:a,onChange:t}),e.jsxs("p",{className:"text-md inline-flex items-center",children:[n&&e.jsx(n,{className:"icon-md me-2"}),e.jsx(p,{...c,values:l}),i&&e.jsx(P,{interactive:!0,label:e.jsx(p,{...i,values:u}),side:"top",children:r?e.jsx("button",{className:"block h-full",onClick:r,children:e.jsx(v,{})}):e.jsx(v,{})}),s&&e.jsx("span",{className:"text-token-text-secondary ps-1 text-sm",children:e.jsx(p,{...s})})]})]}),o&&e.jsx("span",{className:"text-token-text-secondary ms-14 text-sm",children:e.jsx(p,{...o})})]})})}function D({workspaceId:t,Icon:a,label:n,onClickInfo:c,feature:l,value:o,tooltip:r,hasPadding:i=!0,className:u,disabled:d=!1,overrideDisplayValue:m=void 0,messageAfterTooltip:x=void 0}){const s=N(),j=S(),y=h(),{variables:b,mutate:g}=_({mutationFn:({feature:f,enabled:C})=>T.safePost("/accounts/{account_id}/beta_features",{parameters:{path:{account_id:t}},requestBody:{feature:f,value:C}}),onSettled:()=>{y.invalidateQueries({queryKey:["workspace-settings"]})},onError:()=>{j.danger(s.formatMessage(k.featureSettingsUpdateFailed))}});return e.jsx(F,{onChange:f=>{g({feature:l,enabled:f})},enabled:m??b?.enabled??o,Icon:a,label:n,tooltip:r,hasPadding:i,className:u,disabled:d,messageAfterTooltip:x,onClickInfo:c})}function G({connectorId:t,workspaceId:a,Icon:n,label:c,tooltip:l,tooltipValues:o,messageAfterTooltip:r,description:i,labelValues:u,disabled:d}){const m=N(),x=S(),s=h(),j=O(),{enabled:y,isLoading:b}=Q(t),{variables:g,mutate:f}=_({mutationFn:C=>T.safePost("/accounts/{account_id}/connectors/{connector_id}/workspace_permissions",{parameters:{path:{account_id:a,connector_id:t}},requestBody:{enabled:C}}),onSettled:()=>{s.invalidateQueries({queryKey:U(j?.normalizedAccountUserId)}),t===E[R.GITHUB_CONNECTOR]&&!g&&s.invalidateQueries({queryKey:["workspace-settings",a]})},onError:()=>{x.danger(m.formatMessage(k.featureSettingsUpdateFailed))}});return e.jsx(F,{onChange:f,enabled:g??!!y,Icon:n,label:c,labelValues:u,disabled:b||d,tooltip:l,tooltipValues:o,messageAfterTooltip:r,description:i})}const k=q({featureSettingsUpdateFailed:{id:"workspaceSettingsOld.featureSettingsUpdateFailed",defaultMessage:"Failed to update feature setting"}});export{D as B,v as S,G as W};
//# sourceMappingURL=deisw6fp3ninfssz.js.map
