import{eP as R,cS as g,fC as E,ds as M,aJ as F,bK as y,eR as B,bS as D}from"./citrwydz0bgriwlc.js";import{D as O,p as A,f as H,r as o,a as N,j as e}from"./b8ijctzpgh0s7wpx.js";import{r as _,t as T,a as p,u as k,s as K,C as b,b as L,g as j,T as Q,c as $,d as q}from"./krbmwir12ubt4od1.js";import{C as V}from"./m27qwee0va0l7e3n.js";import{T as G,C as J}from"./h1czb0j29h0ikcgh.js";import{g as W}from"./by50z05oxjtbvc0n.js";import{C as P,T as z}from"./hu7jamjectvubclw.js";import{C as U}from"./nvghija6qp2cunds.js";import{P as X}from"./exvo283q5zxd2q6r.js";import"./eqsdgkbw87fpj3r7.js";import"./jy1u8exw8iz2slve.js";import"./f76gy0b8ieo4s693.js";import"./gy64pge8qevmvg7e.js";import"./grmx1v2b0e1c1pfw.js";import"./m4qet7ipn6ha09it.js";import"./hbpbckirom363mgh.js";import"./eq7m7kpdgo83dcz8.js";import"./ku4zsoy6w4wkp690.js";import"./k1h56nx2kjoqc52m.js";import"./bhqc37jb73aufzkm.js";import"./n8y79r98tvk4ovf6.js";import"./noq8k3whf0dyc5h2.js";import"./fl25v7yedm9z0cyb.js";import"./n4e94a1v0wut7i04.js";import"./5l7gzqkfu3rktsj8.js";import"./h6aag2lelyp3pu40.js";import"./j2zbz2jpl151yhf4.js";import"./h3axfhhn58bmthc9.js";import"./eg629yaevviy8e7x.js";import"./hf1qeqo8wh44t1id.js";import"./nv8u6v964bkr3z82.js";import"./bt7o8eyltdx74vk0.js";import"./c23qlyb7rng4ydyc.js";import"./k00srulxk3kjmgxy.js";import"./iki1bxy2syl3zwuv.js";import"./b4v20hsjdnh8a64d.js";import"./dcml6fn13vfm1zv2.js";import"./h3krx8dg2s8o2yh5.js";import"./cfe0bfy5asp94vp2.js";import"./jkznwfhp8ahnvlot.js";import"./megablgldkh4lap1.js";import"./jekpe1ukp5thtucq.js";import"./izdon3syh095bs23.js";import"./dweroubxngal4vlb.js";import"./i7jya7stlyvnzya0.js";import"./cb2t82g498wwhuc2.js";import"./ndwtlsjk3xm27wkq.js";import"./o0ebhsapkoy5qkg1.js";import"./k7nub2yuxq70se07.js";import"./k6ccgr4wxcppeg93.js";import"./dbalwdodzoo02ru2.js";import"./c2d9eukr2hh7n3q0.js";import"./k5qjx4jdow04k7d2.js";import"./ocq21rw37s5jtm4i.js";import"./kwgbehxqut2f64bk.js";import"./djd85tifm57yisqi.js";const tt=()=>(_(),null),ot=R(function(){const r=O(),[s]=A(),l=H(),u=T(r.conversationId),n=p(s.get("readonly"),!1),c=p(s.get("isFullScreen"),!1),m=p(s.get("header"),!0),d=p(s.get("appPreview"),!1),i=g(()=>E()),C=g(()=>M()),w=p(s.get("hideBottomComposer"),!!n),a=T(r.canmoreId),t=u,f=k();o.useEffect(()=>{K({type:b.Textdoc,textdocId:a})},[a]),L(t,{kind:F.PrimaryAssistant});const h=N();if(o.useEffect(()=>(y.retainThread(t),()=>{setTimeout(()=>{h.invalidateQueries({queryKey:["conversation",t]})},0),y.releaseThread(t)}),[t,h]),o.useEffect(()=>{a||l("/")},[a,l]),o.useEffect(()=>{j().sendMessage({type:P.Loaded})},[a]),!a||f?.type!==b.Textdoc)return null;const S=()=>{j().sendMessage({type:P.Close})},I=n&&!m;return e.jsxs("div",{className:"h-full w-full overflow-hidden contain-content",children:[e.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1, maximum-scale=1"}),e.jsx(X,{clientThreadId:t,children:e.jsx(U,{clientThreadId:t,children:e.jsx(Q,{clientThreadId:t,children:d?e.jsx(B,{children:e.jsx(Y,{textdocId:f.textdocId})}):I?e.jsxs(e.Fragment,{children:[e.jsx(G,{clientThreadId:t,disableScroll:!i,textdocId:f.textdocId}),e.jsx(J,{})]}):e.jsx(z,{isEmbedded:!0,hideRunCode:!i,isFullScreen:c,hideHeader:!m,hideBottomComposer:w,isReadonlyFromQueryParam:n,hideRenameButton:C,clientThreadId:t,focusedTextdoc:f,onClose:S},"textdocContent")})})})]})}),Y=({textdocId:x})=>{const r=o.useRef(null),s=$(x),[l,u]=o.useState(!1),n=s?.versions??[],c=D(n),m=o.useCallback(q(async d=>{const i=W(d.type,d.content);if(r.current&&(i==="react"||i==="html")){u(!0);const v=r.current.evalAsync({language:i,code:d.content});for await(const C of v)console.debug(C)}u(!1)},100),[]);return o.useEffect(()=>{c&&m(c)},[c,m]),e.jsx(V,{visuallyHidden:!l,ref:r,enableTransition:!0,title:""})};export{tt as clientLoader,ot as default};
//# sourceMappingURL=ktbgtlfq0mt9lk9o.js.map
