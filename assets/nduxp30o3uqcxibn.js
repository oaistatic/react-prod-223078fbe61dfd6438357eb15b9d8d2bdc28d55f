import{i as g,u as h,r as m,j as e,M as c}from"./b8ijctzpgh0s7wpx.js";import{aH as p,aI as t,aJ as f,aK as b}from"./krbmwir12ubt4od1.js";import{c as j,O as y,j as N}from"./citrwydz0bgriwlc.js";import{W as k}from"./omp8ie1vzl40ti1z.js";function w(r,{forceRedirect:s}={}){{const n=encodeURIComponent(JSON.stringify({client_redirect_to:location.pathname}));window.open(`https://github.com/apps/chatgpt-connector/installations/select_target?state=${n}`,"_blank")}}function S(){return N(),e.jsx("div",{className:"flex items-center justify-center px-2",children:e.jsxs("button",{className:"text-token-text-primary bg-token-bg-primary hover:bg-token-bg-secondary dark:bg-token-bg-secondary dark:hover:bg-token-bg-primary flex w-full items-center rounded-lg px-2 py-3 text-center text-sm",onClick:()=>w(),children:[e.jsx(b,{"aria-hidden":!0,className:"icon-md me-1"}),e.jsx(c,{id:"wham.accountSelect.addGitHubAccount",defaultMessage:"Add a GitHub account"})]})})}function C({className:r,selectedInstallationId:s,setSelectedInstallationId:n}){const l=g(),{data:u,isLoading:o}=h({queryKey:["githubInstallations"],queryFn:()=>k.getGithubInstallations(),staleTime:0,refetchOnWindowFocus:!0,refetchOnMount:!0}),i=m.useMemo(()=>u?.installations??[],[u]),d=i?.find(a=>a.id===s);m.useEffect(()=>{s&&!d?n(null):!s&&i?.length&&n(i[0].id)},[s,d,i,n]);const x=a=>{n(parseInt(a))};return e.jsxs("div",{className:j("flex flex-col gap-2",r),children:[e.jsx("p",{className:"text-token-text-primary text-sm font-medium",children:e.jsx(c,{id:"wham.accountSelect.githubOrganization",defaultMessage:"GitHub organization"})}),o?e.jsx(p,{className:"h-9 w-52"}):e.jsxs(t.Root,{value:o?"":s?.toString()??"",onValueChange:x,disabled:o,children:[e.jsx(t.Trigger,{className:"border-token-border-heavy bg-token-bg-primary flex w-52 rounded-md border","aria-label":l.formatMessage({id:"wham.accountSelect.openOrganizationMenu",defaultMessage:"Open organization menu"}),children:e.jsxs("div",{className:"flex w-full items-center justify-between",children:[e.jsxs("div",{className:"flex w-0 flex-1 items-center",children:[e.jsx(f,{"aria-hidden":!0,className:"icon-sm me-1.5"}),e.jsx("div",{className:"truncate",children:e.jsx(t.Value,{placeholder:l.formatMessage({id:"wham.accountSelect.selectOrganization",defaultMessage:"Select organization"})})})]}),e.jsx(t.Icon,{})]})}),e.jsx(t.Portal,{children:e.jsxs(t.Content,{align:"start",children:[i.length>0?i.map(a=>e.jsx(t.Item,{value:a.id.toString(),children:a.account_login},a.id)):e.jsxs("div",{className:"p-4 text-center",children:[e.jsx("p",{className:"text-token-text-primary text-sm",children:e.jsx(c,{id:"wham.accountSelect.noGitHubAccounts",defaultMessage:"No GitHub accounts"})}),e.jsx("p",{className:"text-token-text-secondary text-xs",children:e.jsx(c,{id:"wham.accountSelect.noGitHubAccountsDescription",defaultMessage:"Codex requires a GitHub account to work"})})]}),e.jsx(t.Separator,{}),e.jsx(S,{}),o&&e.jsx("div",{className:"flex justify-center p-2",children:e.jsx(y,{})})]})})]})]})}export{C as A,w as h};
//# sourceMappingURL=nduxp30o3uqcxibn.js.map
