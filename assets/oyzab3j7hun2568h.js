import{i as G,r as l,j as e,e as V,M as W}from"./b8ijctzpgh0s7wpx.js";import{bt as D,bT as A,bU as P,bV as U,bw as k,bx as p,bW as z,aX as j,bD as B,b6 as R,bE as $,b5 as X,bH as q,bG as H,by as Y,bI as J}from"./krbmwir12ubt4od1.js";import{e$ as K,c as f,bL as Q,e as Z,O as ee}from"./citrwydz0bgriwlc.js";import{u as ae}from"./cb2t82g498wwhuc2.js";import{I as se}from"./dera5bljhpg5ja89.js";const te="ChatGPT Image";function S({rightAlign:a=!1,bottomAlign:s=!1,fullWidth:n=!1,justifyBetween:i=!1,alwaysVisible:o=!1,children:r}){return e.jsxs("div",{className:f("absolute z-2",o?"opacity-100":"opacity-0 group-hover/imagegen-image:opacity-100 group-focus/imagegen-image:opacity-100 focus-within:opacity-100",a?"end-0":"start-0",s?"bottom-0":"top-0",n&&"w-full"),children:[e.jsx("div",{className:f(s?"bg-linear-to-b":"bg-linear-to-t","from-transparent to-black/30","h-20 w-full")}),e.jsx("div",{className:f("absolute inset-0 flex p-1",s?"items-end":"items-start",a?"justify-end":"justify-start",i&&"justify-between"),children:r})]})}function g({icon:a,children:s,selected:n,disabled:i,onClick:o,ariaLabel:r}){return e.jsxs("button",{className:f("hover:bg-white/15 hover:backdrop-blur-md focus:bg-white/15 focus:backdrop-blur-md","z-11 flex h-10 items-center justify-center gap-1 rounded-xl text-sm font-medium text-white",s==null?"w-10":"px-2"),onClick:o,disabled:i??n,"aria-label":r,children:[e.jsx(a,{style:{filter:"drop-shadow(0px 2px 4px rgba(0, 0, 0, 0.15))"},className:f("icon-sidebar",n?"fill-current":"fill-transparent")}),s]})}function x(a){return s=>{s.stopPropagation(),a()}}const ce=({imageAssetPointer:a,imageUrl:s,messageId:n,clientThreadId:i,serverThreadId:o,shouldShowOverflow:r=!1,showRatingButtons:b=!0})=>{const{config:c}=K("2248456840"),w=c.get("enabled",!1),t=G(),[E,I]=l.useState(!1),[d,C]=l.useState(null),h=D(),v=u=>{d==null&&(p.imageRated({liked:u,analyticsContext:h}),C(u),u||I(!0))},y=l.useCallback(()=>{const u=new Date,T=t.formatDate(u,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"});return`${te} ${T}.png`},[t]),O=A(),M=P(),F=M?.type===U.Image&&M.image.asset_pointer===a,[N,L]=l.useState(!1),_=l.useCallback(()=>{a&&(k({url:a,fileName:y()}),p.download({analyticsContext:h}))},[a,y,h]);return e.jsxs(e.Fragment,{children:[O?!F&&e.jsx(S,{rightAlign:!0,fullWidth:!0,children:e.jsx(g,{icon:z,ariaLabel:t.formatMessage(m.expand)})}):e.jsx(e.Fragment,{children:e.jsx(S,{bottomAlign:!0,rightAlign:!0,fullWidth:!0,alwaysVisible:N,children:e.jsxs("div",{className:"flex w-full items-center justify-between",children:[e.jsxs("div",{className:"flex",children:[b&&d!==!1&&e.jsx(j,{label:t.formatMessage({id:"U99PVw",defaultMessage:"Like"}),delayDuration:300,children:e.jsx(g,{icon:d===!0?B:R,onClick:x(()=>v(!0)),ariaLabel:t.formatMessage(m.thumbsUp)})}),b&&d!==!0&&e.jsx(j,{label:t.formatMessage({id:"ncGqTt",defaultMessage:"Dislike"}),delayDuration:300,children:e.jsx(g,{icon:d===!1?$:X,onClick:x(()=>v(!1)),ariaLabel:t.formatMessage(m.thumbsDown)})}),s&&e.jsx(j,{label:t.formatMessage({id:"0EYire",defaultMessage:"Download"}),children:e.jsx(g,{icon:q,ariaLabel:t.formatMessage(m.download),onClick:x(()=>{k({url:s,fileName:y()}),p.download({analyticsContext:h})})})}),w&&r&&e.jsx(H,{onOpenChange:L,onDownload:_,triggerClassName:"z-11 flex h-10 w-10 items-center justify-center rounded-xl bg-transparent hover:bg-token-icon-surface/10 focus:bg-token-icon-surface/10 focus-visible:bg-token-icon-surface/10",iconClassName:"icon-lg fill-transparent text-white",dropdownClassName:"z-11 min-w-fit origin-top-right text-token-text-primary"})]}),e.jsx("div",{className:"flex",children:e.jsx(ne,{clientThreadId:i,messageId:n})})]})})}),E&&e.jsx(se,{messageId:n,serverThreadId:o??"",rating:d,onClose:()=>I(!1)})]})};function ne({clientThreadId:a,messageId:s}){const[n,i]=l.useState(!1),o=G(),r=Q(),b=Y(),c=!r&&b(),w=ae({clientThreadId:a,imageGenMessageId:s}),t=D();return l.useEffect(()=>{c&&Z.logEventWithStatsig("Share Post: Share Button Shown","chatgpt_post_share_button_shown",{source:"image_gen_action_overlay",...t})},[c,t]),c?e.jsx(g,{icon:n?ee:J,disabled:n,onClick:x(async()=>{i(!0);try{await w()}finally{i(!1)}p.imageShared({analyticsContext:t,source:"image_gen_action_overlay"})}),ariaLabel:o.formatMessage(m.share),children:e.jsx(W,{id:"imageGenActionOverlay.shareButton",defaultMessage:"Share"})}):null}const m=V({thumbsUp:{id:"imageGenActionOverlay.thumbsUp",defaultMessage:"Like this image"},thumbsDown:{id:"imageGenActionOverlay.thumbsDown",defaultMessage:"Dislike this image"},inpaint:{id:"imageGenActionOverlay.inpaint",defaultMessage:"Enter inpainting mode"},download:{id:"imageGenActionOverlay.download",defaultMessage:"Download this image"},expand:{id:"imageGenActionOverlay.expand",defaultMessage:"Expand this image"},share:{id:"imageGenActionOverlay.share",defaultMessage:"Share this image"}});export{ce as I};
//# sourceMappingURL=oyzab3j7hun2568h.js.map
