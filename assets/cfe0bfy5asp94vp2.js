import{r as B,c as K,e as S}from"./b8ijctzpgh0s7wpx.js";import{fI as D,e as w,ak as T,ad as x,j as E,ed as L,dp as z,fJ as I,fK as O,fL as P,n as R,a_ as F,h as G,ch as U,bj as Z,ae as V,fC as _,fM as N}from"./citrwydz0bgriwlc.js";import{K as e,q as a,J as j,L as J,M as $,N as q,U as f,O as H,P as h,Q}from"./krbmwir12ubt4od1.js";import{t as W}from"./ku4zsoy6w4wkp690.js";const X=/```.*?\n([\s\S]+?)\n?```[^`]*$/gms;function C(){return _()||N()}const Y={[e.Comma]:",",[e.Enter]:"⏎",[e.Escape]:"Esc",[e.ArrowUp]:"↑",[e.ArrowDown]:"↓",[e.ArrowLeft]:"←",[e.ArrowRight]:"→",[e.Backspace]:"⌫",[e.Delete]:"⌦",[e.Tab]:"⇥",[e.Control]:"Ctrl",[e.Shift]:"Shift"};function ee(t){switch(t){case e.Mod:return C()?"⌘":"Ctrl";case e.Meta:return C()?"⌘":"Win";default:return Y[t]}}const de=t=>t.map(o=>ee(o)??o),r=S({newChat:{id:"keyboardActions.newChat",defaultMessage:"Open new chat"},focusPromptTextarea:{id:"keyboardActions.focusPromptTextarea",defaultMessage:"Focus chat input"},copyLastCodeBlock:{id:"keyboardActions.copyLastCodeBlock",defaultMessage:"Copy last code block"},toggleCustomInstructions:{id:"keyboardActions.toggleCustomInstructions",defaultMessage:"Set custom instructions"},navigationToggle:{id:"keyboardActions.navigationToggle",defaultMessage:"Toggle sidebar"},deleteChat:{id:"keyboardActions.deleteChat",defaultMessage:"Delete chat"},zoomIn:{id:"keyboardActions.zoomIn",defaultMessage:"Zoom in"},zoomOut:{id:"keyboardActions.zoomOut",defaultMessage:"Zoom out"},resetZoom:{id:"keyboardActions.resetZoom",defaultMessage:"Reset zoom"},cycleReasoningLevel:{id:"keyboardActions.cycleReasoningLevel",defaultMessage:"Cycle reasoning level"},toggleKeyboardActions:{id:"keyboardActions.toggleKeyboardActions",defaultMessage:"Show shortcuts"}}),ge=new D,oe=({ctx:t,resetThreadAction:o,clientThreadId:s,focusPromptTextareaAction:n,toaster:c,isFannyPackEnabled:d,isZoomEnabled:i,isElectronClient:g})=>{const l=g?[[e.Mod,"n"]]:[];return[{key:"newChat",action:o||z,actionMessageDescriptor:r.newChat,group:a.Core,keyboardBinding:[e.Mod,e.Shift,"o"],altKeyboardBindings:d?[...l]:[...l,[e.Mod,"k"]]},{key:"focusPromptTextarea",action:n??W,actionMessageDescriptor:r.focusPromptTextarea,group:a.Chat,keyboardBinding:[e.Shift,e.Escape]},{key:"copyLastCodeBlock",action:u=>{if(s!=null){const k=R.getConversationTurns(F(s));for(let b=k.length-1;b>=0;b--){const{messages:v}=k[b],p=[...v.reduce((M,y)=>y.clientMetadata?.err==null&&y.author.role===G.Assistant&&y.recipient==="all"?M+(M?`

`:"")+U(y):M,"").matchAll(X)],m=p.length?p[p.length-1][1]:null;if(m!=null){H(m,c,u).then(()=>{c.success("Copied code block to clipboard")});break}}}},actionMessageDescriptor:r.copyLastCodeBlock,group:a.Chat,keyboardBinding:[e.Mod,e.Shift,";"],altKeyboardBindings:[[e.Mod,e.Shift,":"]]},{key:"toggleCustomInstructions",action:()=>f.toggleModal(h.UserContext),actionMessageDescriptor:r.toggleCustomInstructions,group:a.Settings,keyboardBinding:[e.Mod,e.Shift,"i"]},{key:"navigationToggle",action:()=>{f.setSidebarOpen(void 0)},actionMessageDescriptor:r.navigationToggle,group:a.Core,keyboardBinding:[e.Mod,e.Shift,"s"]},{key:"deleteChat",action:()=>{if(s){const u=Z(s);u&&V(t,Q,{serverThreadId:u,isActiveConversation:!0})}},actionMessageDescriptor:r.deleteChat,group:a.Chat,keyboardBinding:[e.Mod,e.Shift,e.Backspace],altKeyboardBindings:[[e.Mod,e.Shift,e.Delete]]},{key:"zoomIn",enabled:i,action:()=>I(),actionMessageDescriptor:r.zoomIn,group:a.Chat,keyboardBinding:[e.Mod,"+"],altKeyboardBindings:[[e.Mod,"="]]},{key:"zoomOut",enabled:i,action:()=>O(),actionMessageDescriptor:r.zoomOut,group:a.Chat,keyboardBinding:[e.Mod,"-"]},{key:"resetZoom",enabled:i,action:()=>P(),actionMessageDescriptor:r.resetZoom,group:a.Chat,keyboardBinding:[e.Mod,"0"]},{key:"toggleKeyboardActions",action:()=>f.toggleModal(h.KeyboardActions),actionMessageDescriptor:r.toggleKeyboardActions,group:a.Settings,keyboardBinding:[e.Mod,"/"]}]},A=t=>j(t,o=>{w.logEvent("Keyboard Shortcut",{keyboardActionKey:o.key}),T.addAction("chatgpt_keyboard_shortcut",{keyboardActionKey:o.key})},{enabled:!0}),te=({resetThreadAction:t,clientThreadId:o,focusPromptTextareaAction:s}={})=>{const n=x(),{isFannyPackEnabled:c}=J(),d=$(),i=L,g=E();return B.useMemo(()=>oe({ctx:g,resetThreadAction:t,clientThreadId:o,focusPromptTextareaAction:s,toaster:n,isElectronClient:d,isFannyPackEnabled:c,isZoomEnabled:i}).filter(({enabled:u=!0})=>u),[g,t,o,s,n,d,c,i])},le=t=>{"use forget";const o=K.c(7),{resetThreadAction:s,clientThreadId:n,focusPromptTextareaAction:c}=t;let d;o[0]!==n||o[1]!==c||o[2]!==s?(d={resetThreadAction:s,clientThreadId:n,focusPromptTextareaAction:c},o[0]=n,o[1]=c,o[2]=s,o[3]=d):d=o[3];const i=te(d),g=q(se);let l;o[4]!==i||o[5]!==g?(l=g?[]:i,o[4]=i,o[5]=g,o[6]=l):l=o[6],A(l)},ue=({setSelectedVoiceIndex:t,prevVoiceIndex:o,nextVoiceIndex:s})=>{const n=[{key:"selectPrevVoice",action:()=>{t(o)},actionMessageDescriptor:{defaultMessage:"Select previous voice"},group:a.Chat,keyboardBinding:[e.ArrowLeft]},{key:"selectNextVoice",action:()=>{t(s)},actionMessageDescriptor:{defaultMessage:"Select next voice"},group:a.Chat,keyboardBinding:[e.ArrowRight]}];A(n)};function se(t){return t.isVoiceActive}export{ge as G,le as a,ue as b,de as g,C as i,te as u};
//# sourceMappingURL=cfe0bfy5asp94vp2.js.map
