const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/c9ri1ap1wvh593dt.js","assets/b8ijctzpgh0s7wpx.js"])))=>i.map(i=>d[i]);
import{ad as T,aq as I,ab as A,dp as L,B as N,b as v,ak as ee,c as z,O as W,aN as se,Q as te,_ as ae,f as re,l as oe,eP as ne}from"./citrwydz0bgriwlc.js";import{i as C,r as h,j as e,M as i,ag as H,u as V,a as D,b as B,e as ie,ac as le}from"./b8ijctzpgh0s7wpx.js";import{m as F}from"./nhimtm9k3553f3om.js";import{du as ue,fp as ce,lq as R,ea as $,bX as o,jv as de,aK as X,mi as K,aX as E,cW as me,dY as M,ad as P,bY as pe,lf as ge,k1 as xe}from"./krbmwir12ubt4od1.js";import{a as he,b as fe,S as je,u as Me}from"./e8gr7b7eez1onpam.js";import{V as ye}from"./d3y72ugnrmac5z1v.js";import"./otl51en3t0ec5n7s.js";import"./b4v20hsjdnh8a64d.js";import"./ku4zsoy6w4wkp690.js";import"./k1h56nx2kjoqc52m.js";import"./exvo283q5zxd2q6r.js";import"./jekpe1ukp5thtucq.js";import"./dcml6fn13vfm1zv2.js";import"./nvghija6qp2cunds.js";import"./djd85tifm57yisqi.js";import"./h3krx8dg2s8o2yh5.js";import"./cfe0bfy5asp94vp2.js";import"./jkznwfhp8ahnvlot.js";import"./megablgldkh4lap1.js";import"./hbpbckirom363mgh.js";import"./izdon3syh095bs23.js";import"./dweroubxngal4vlb.js";import"./i7jya7stlyvnzya0.js";import"./cb2t82g498wwhuc2.js";import"./ndwtlsjk3xm27wkq.js";import"./o0ebhsapkoy5qkg1.js";import"./k7nub2yuxq70se07.js";import"./k6ccgr4wxcppeg93.js";import"./dbalwdodzoo02ru2.js";import"./c2d9eukr2hh7n3q0.js";import"./eigi8l95ddhoqirr.js";import"./etmxhiuvgu79utu0.js";import"./ct6yhczwft8t5t9k.js";import"./nvnp6g5g3fqgfhec.js";import"./g64reurtt3avubtb.js";import"./cn2bawepofyjgkxo.js";import"./iki1bxy2syl3zwuv.js";const Q=1e3;function we({group:s,isOpen:t,onClose:a}){const l=C(),n=T(),p=l.formatMessage({id:"workspaceSettings.groups.addMember",defaultMessage:"Add members to the {groupName} group"},{groupName:s.name}),r=I(),[u,d]=h.useState([]),[c,g]=h.useState(!1);async function f(){const y=r?.getWorkspaceId();if(!y)throw new Error("No workspace ID found");g(!0);const S=await v.safePost("/accounts/{account_id}/group/{group_id}/users",{parameters:{path:{account_id:y,group_id:s.id}},requestBody:{email_addresses:u}});n.success(l.formatMessage({id:"yU4Zf0",defaultMessage:"Added {numUsers} users to the group"},{numUsers:S.added_group_users.length})),a?.(),g(!1)}return e.jsxs(A,{testId:"modal-bulk-add-group-members",isOpen:t,onClose:a??L,title:p,type:"success",showCloseButton:!0,primaryButton:e.jsx(N,{onClick:f,disabled:u.length===0||u.length>Q,loading:c,children:e.jsx(i,{id:"EpbOzA",defaultMessage:"Add users to group"})}),children:[e.jsx(Se,{onChange:d}),u.length>Q&&e.jsx("div",{className:"text-token-text-error mt-2 text-sm",children:e.jsx(i,{id:"9lp0Tc",defaultMessage:"Email list is limited to {maxEmails} users at once",values:{maxEmails:Q}})})]})}function Se({onChange:s}){const[t,a]=h.useState("");return e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("label",{htmlFor:"group-email-paste",children:[e.jsx(i,{id:"qvGcSC",defaultMessage:"Emails"}),e.jsx("br",{}),e.jsx("span",{className:"text-token-text-tertiary text-sm",children:e.jsx(i,{id:"Fhd+5h",defaultMessage:"Paste email addresses here, one per line:"})})]}),e.jsx(ue,{id:"group-email-paste",className:"h-[250px] text-sm",value:t,onChange:l=>{a(l.target.value),s(be(l.target.value))},placeholder:`jean@example.com
joohyun@example.com
muhammed@example.com
susan@example.com`})]})}function be(s){return s.split(`
`).map(t=>t.trim()).filter(t=>t.length>0).filter(t=>ye.test(t))}function Y({group:s,isOpen:t,onClose:a}){const n=C().formatMessage({id:"workspaceSettings.addGroupsMembersModal.title",defaultMessage:"Add members to the {groupName} group"},{groupName:s.name}),r=I()?.getWorkspaceId(),[u,d]=h.useState(""),[c,g]=h.useState(0),{data:f}=ce(r,c*R,u,R,H),[y,S]=h.useState([]),[w,b]=h.useState([]),[j,_]=h.useState("interactive"),m=f?Math.ceil((f.total??0)/R):0;async function G(x){b(k=>[...k,x]);try{await Ne(r,s.id,x),S(k=>[...k,x])}catch(k){ee.addError(k)}finally{b(k=>k.filter(J=>J!==x))}}return j==="batch"?e.jsx(we,{group:s,isOpen:t,onClose:a}):e.jsx(A,{testId:"modal-add-group-member",type:"warning",isOpen:t,onClose:a??L,title:n,size:"custom",className:"max-w-(--breakpoint-md)",showCloseButton:!0,primaryButton:e.jsx(N,{onClick:a,children:e.jsx(i,{id:"0NAzDq",defaultMessage:"Done"})}),children:e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"flex flex-row justify-between",children:[e.jsx("p",{children:n}),e.jsx(N,{onClick:()=>{_("batch")},color:"secondary",children:e.jsx(i,{id:"5GPldp",defaultMessage:"Bulk add users"})})]}),e.jsx($,{value:u,inputClassName:"w-full",onChange:x=>{d(x.target.value)}}),e.jsxs(o.Root,{className:"min-w-full",children:[e.jsxs(o.Header,{children:[e.jsx(o.HeaderCell,{children:e.jsx(i,{id:"workspaceSettings.groups.addMember.name",defaultMessage:"Name"})}),e.jsx(o.HeaderCell,{children:e.jsx(i,{id:"workspaceSettings.groups.addMember.email",defaultMessage:"Email"})}),e.jsx(o.HeaderCell,{})]}),e.jsx(o.Body,{children:f?.items.map(x=>e.jsxs(o.Row,{children:[e.jsx(o.Cell,{children:x.name}),e.jsx(o.Cell,{children:x.email}),e.jsx(o.Cell,{textAlign:"right",className:"pe-1",children:e.jsx(N,{size:"small",color:"secondary",disabled:w.includes(x.id),onClick:()=>{y.includes(x.id)||G(x.id)},icon:y.includes(x.id)?de:X,children:y.includes(x.id)?e.jsx(i,{id:"workspaceSettings.groups.addMember.addButton",defaultMessage:"Added"}):e.jsx(i,{id:"workspaceSettings.groups.addMember.addedButton",defaultMessage:"Add"})})})]},x.id))})]}),e.jsx("div",{className:"flex flex-row justify-center",children:e.jsx(K,{currentPage:c,onChangeIndex:x=>{g(x)},length:m})})]})})}async function Ne(s,t,a){await v.safePatch("/accounts/{account_id}/group/{group_id}",{parameters:{path:{account_id:s,group_id:t}},requestBody:{user_id:a}})}const O=10;function Ce({workspaceId:s,group:t,readOnly:a}){const l=C(),[n,p]=h.useState(!1),[r,u]=h.useState(""),[d,c]=h.useState(0),{data:g,isLoading:f,isPlaceholderData:y}=V({queryKey:[s,"groups",t.id,r,`members-page-${d}`],queryFn:()=>v.safeGet("/accounts/{account_id}/group/{group_id}/users",{parameters:{path:{account_id:s,group_id:t.id},query:{query:r,offset:d*O}}}),placeholderData:H}),[S,w]=h.useState(!1),b=h.useRef(null),j=D();h.useEffect(()=>{n&&b.current&&b.current.focus()},[n]);const{mutateAsync:_}=B({mutationFn:async m=>await v.safeDelete("/accounts/{account_id}/group/{group_id}/users/{user_id}",{parameters:{path:{account_id:s,group_id:t.id,user_id:m}}}),onMutate:m=>{j.cancelQueries({queryKey:[s,"groups",t.id]});const G=g;return j.setQueryData([s,"groups",t.id,r,`members-page-${d}`],x=>x?{...x,items:x.items.filter(k=>k.id!==m),total:x.total-1}:{limit:10,offset:0,items:[],total:0}),{previousData:G}},onError:(m,G,x)=>{j.setQueryData([s,"groups",t.id,`members-page-${d}`],x?.previousData),j.invalidateQueries({queryKey:[s,"groups",t.id]})},onSettled:async()=>{await new Promise(m=>setTimeout(m,1e3)),j.invalidateQueries({queryKey:[s,"groups"]})}});return e.jsxs("div",{className:"flex w-full flex-col",children:[e.jsxs("div",{className:"flex flex-row items-center",children:[e.jsx("div",{className:"border-token-border-dark mt-3 inline-block h-8 grow-0 border-b-2 text-sm font-semibold",children:e.jsx(i,{id:"workspaceSettings.groups.membersTableTitle",defaultMessage:"Group members"})}),e.jsx("div",{className:"grow"}),e.jsx(E,{label:l.formatMessage({id:"workspaceSettings.groups.searchButtonTooltip",defaultMessage:"Search members"}),children:e.jsx("div",{className:"cursor-pointer p-2",onClick:()=>{p(!0)},children:e.jsx(me,{className:"icon-sm"})})}),e.jsx("input",{type:"text",ref:b,placeholder:l.formatMessage({id:"workspaceSettings.groups.searchMembers",defaultMessage:"Filter by name or email..."}),className:z("bg-token-surface-primary dark:bg-token-surface-secondary transition-width border-none px-0 duration-300 ease-in-out focus:ring-0",n?"w-64":"w-0"),value:r,onChange:()=>{c(0),u(b.current?.value??"")}})]}),e.jsxs(o.Root,{className:"min-w-full",children:[e.jsxs(o.Header,{children:[e.jsx(o.HeaderCell,{children:e.jsx(i,{id:"workspaceSettings.groups.memberName",defaultMessage:"Name"})}),e.jsx(o.HeaderCell,{children:e.jsx(i,{id:"workspaceSettings.groups.email",defaultMessage:"Email"})}),e.jsx(o.HeaderCell,{})]}),e.jsx(o.Body,{className:f||y?"opacity-50":void 0,children:g==null?e.jsx(o.Row,{children:e.jsx(o.Cell,{colSpan:3,children:e.jsx(W,{})})}):g.items.length===0?e.jsx(o.Row,{children:e.jsx(o.Cell,{colSpan:3,children:r===""?e.jsx(i,{id:"workspaceSettings.groups.noMembers",defaultMessage:"No members"}):e.jsx(i,{id:"workspaceSettings.groups.noMembersForSearch",defaultMessage:"No members matched the filter"})})}):g.items.map(m=>e.jsxs(o.Row,{children:[e.jsx(o.Cell,{children:e.jsx("span",{className:"ms-3",children:m.name})}),e.jsx(o.Cell,{children:m.email}),e.jsx(o.Cell,{textAlign:"right",children:!a&&(t.is_scim_managed?e.jsx(M.Root,{children:e.jsx(M.Trigger,{disabled:!0,children:e.jsx(E,{label:l.formatMessage(F.managedViaSCIMTooltip),className:"flex",side:"right",children:e.jsx(P,{className:"icon-sm"})})})}):e.jsxs(M.Root,{children:[e.jsx(M.Trigger,{className:"-my-2",children:e.jsx(P,{className:"icon-sm"})}),e.jsx(M.Portal,{children:e.jsx(M.Content,{size:"default",children:e.jsx(M.Item,{onClick:()=>_(m.id),icon:e.jsx(pe,{className:"text-token-text-status-error"}),className:"text-token-text-status-error",children:e.jsx(i,{id:"workspaceSettings.groups.removeMember",defaultMessage:"Remove member"})})})})]}))})]},m.id))})]}),e.jsxs("div",{className:"my-2 flex flex-row justify-center",children:[!a&&!t.is_scim_managed&&e.jsx(N,{color:"secondary",onClick:()=>w(!0),children:e.jsx(i,{id:"workspaceSettings.groups.addMemberButton",defaultMessage:"Add member"})}),!a&&t.is_scim_managed&&e.jsx(E,{label:l.formatMessage(F.managedViaSCIMTooltip),side:"right",children:e.jsx(N,{color:"secondary",disabled:!0,children:e.jsx(i,{id:"workspaceSettings.groups.addMemberButton",defaultMessage:"Add member"})})}),e.jsx("div",{className:"grow"}),g&&g.items.length>0&&e.jsx(K,{currentPage:d,onChangeIndex:m=>{c(m)},length:Math.ceil(g.total/O)})]}),S&&e.jsx(Y,{isOpen:!0,onClose:()=>{j.invalidateQueries({queryKey:[s,"groups"]}),w(!1)},group:t})]})}function ke({group:s,readOnly:t,workspaceId:a,onClose:l}){const p=C().formatMessage({id:"workspaceSettings.groupsMembersModal.title",defaultMessage:"Members of group: {groupName}"},{groupName:s.name});return e.jsx(A,{testId:"modal-add-group-member",type:"warning",isOpen:!0,onClose:l,title:p,size:"custom",className:"max-w-(--breakpoint-md)",showCloseButton:!0,primaryButton:e.jsx(N,{onClick:l,children:e.jsx(i,{id:"0NAzDq",defaultMessage:"Done"})}),children:e.jsx(Ce,{group:s,readOnly:t,workspaceId:a})})}const U=10,ve=({workspaceId:s,currPage:t,groupFilter:a})=>{const{data:l,isLoading:n,isPlaceholderData:p}=V({queryKey:a===""?[s,"groups",`page-${t}`]:[s,"groups","filtered",a,`page-${t}`],queryFn:()=>se.getWorkspaceGroups(s,{query:a,offset:t*U}),placeholderData:H});return{groups:l,isLoading:n,isPlaceholderData:p}},Ge=({workspaceId:s,currentGroups:t})=>{const a=D(),l=T(),n=C(),{mutateAsync:p}=B({mutationFn:({workspaceId:r,name:u})=>v.safePost("/accounts/{account_id}/group",{parameters:{path:{account_id:r}},requestBody:{name:u}}),onMutate:({workspaceId:r,name:u})=>{a.cancelQueries({queryKey:[r,"groups"]});const d=t;return a.setQueryData([r,"groups","page-0"],c=>(c||(c={limit:10,offset:0,items:[],total:0}),{...c,items:[{id:"new",name:u,num_members:0,created_time:""},...c.items.slice(0,9)]})),{previousGroups:d}},onError:(r,u,d)=>{a.setQueryData([s,"groups","page-0"],d?.previousGroups),a.invalidateQueries({queryKey:[s,"groups"]}),r.message==="Group with this name already exists."&&l.warning(n.formatMessage({id:"workspaceSettings.groups.duplicateName",defaultMessage:"Group with this name already exists"}),{duration:2})},onSettled:async()=>{await new Promise(r=>setTimeout(r,1e3)),a.invalidateQueries({queryKey:[s,"groups"]})}});return{createGroup:p}},_e=({workspaceId:s,currentGroups:t})=>{const a=D(),{mutateAsync:l}=B({mutationFn:async n=>await v.safeDelete("/accounts/{account_id}/group/{group_id}",{parameters:{path:{account_id:s,group_id:n}}}),onMutate:n=>{a.cancelQueries({queryKey:[s,"groups","page-0"]});const p=t;return a.setQueryData([s,"groups","page-0"],r=>(r||(r={items:[]}),{...r,items:r.items.filter(u=>u.id!==n)})),{previousGroups:p}},onError:(n,p,r)=>{a.setQueryData([s,"groups","page-0"],r?.previousGroups),a.invalidateQueries({queryKey:[s,"groups"]})},onSettled:async()=>{await new Promise(n=>setTimeout(n,1e3)),a.invalidateQueries({queryKey:[s,"groups"]})}});return{deleteGroup:l}},Ae=({workspaceId:s,currPage:t})=>{const a=D(),l=T(),n=C(),{mutateAsync:p}=B({mutationFn:async({workspaceId:r,groupID:u,name:d})=>await v.safePatch("/accounts/{account_id}/group/{group_id}",{parameters:{path:{account_id:r,group_id:u}},requestBody:{name:d}}),onMutate:({workspaceId:r,groupID:u,name:d})=>{const c=a.getQueryData([r,"groups",`page-${t}`]);return a.setQueryData([r,"groups",`page-${t}`],g=>(g||(g={items:[]}),{...g,items:g.items.map(f=>f.id===u?{...f,name:d}:f)})),{previousGroups:c}},onError:(r,u,d)=>{a.setQueryData([u,"groups",`page-${t}`],d?.previousGroups),r.message==="Group with this name already exists."&&l.warning(n.formatMessage({id:"workspaceSettings.groups.duplicateName",defaultMessage:"Group with this name already exists"}),{duration:2})},onSettled:async()=>{await new Promise(r=>setTimeout(r,1e3)),a.invalidateQueries({queryKey:[s,"groups"]})}});return{updateGroupName:p}},De=te(()=>ae(()=>import("./c9ri1ap1wvh593dt.js"),__vite__mapDeps([0,1])).then(s=>s.DirectorySyncResourceManagedIndication));function Ee({workspaceId:s}){const t=C(),a=D(),l=re(),n=!(l?.isAdminOfAccount()||l?.isOwnerOfAccount()),[p,r]=h.useState(""),[u,d]=h.useState(0),{groups:c,isLoading:g,isPlaceholderData:f}=ve({workspaceId:s,currPage:u,groupFilter:p}),[y,S]=h.useState(!1),w=m=>{m&&(d(0),r("")),S(m)},{createGroup:b}=Ge({workspaceId:s,currentGroups:c}),{deleteGroup:j}=_e({workspaceId:s,currentGroups:c}),{updateGroupName:_}=Ae({workspaceId:s,currPage:u});return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mt-6 mb-3 flex flex-row justify-between gap-2",children:[e.jsx($,{inputClassName:"w-[250px]",value:p,onChange:m=>{r(m.target.value),d(0)},placeholder:t.formatMessage({id:"workspaceSettings.groups.search",defaultMessage:"Search group name"})}),!n&&e.jsx(N,{onClick:()=>w(!0),icon:X,children:e.jsx(i,{id:"workspaceSettings.groups.create",defaultMessage:"Create group"})})]}),e.jsxs("div",{children:[e.jsxs(o.Root,{className:"min-w-full",children:[e.jsxs("colgroup",{children:[e.jsx("col",{className:"w-[60%]"}),e.jsx("col",{className:"w-[20%]"}),e.jsx("col",{className:"w-[20%]"}),e.jsx("col",{className:"w-16"})]}),e.jsxs(o.Header,{children:[e.jsx(o.HeaderCell,{children:e.jsx(i,{id:"workspaceSettings.groups.groupName",defaultMessage:"Group name"})}),e.jsx(o.HeaderCell,{children:e.jsx(i,{id:"workspaceSettings.groups.members",defaultMessage:"Members"})}),e.jsx(o.HeaderCell,{children:e.jsx(i,{id:"workspaceSettings.groups.created",defaultMessage:"Created"})}),e.jsx(o.HeaderCell,{})]}),e.jsx(o.Body,{className:z((g||f)&&"opacity-50"),children:c==null?e.jsx(o.Row,{children:e.jsx(o.Cell,{colSpan:5,textAlign:"center",children:e.jsx(W,{})})}):c.items.length===0?e.jsx(o.Row,{children:e.jsx(o.Cell,{colSpan:5,textAlign:"center",children:p===""?e.jsx(i,{id:"workspaceSettings.groups.noGroups",defaultMessage:"No groups found."}):e.jsx(i,{id:"workspaceSettings.groups.noGroupsWithFIlter",defaultMessage:"No groups found. Try changing the search query."})})}):c.items.map(m=>e.jsx(qe,{group:m,workspaceId:s,onDelete:j,onChangeName:async G=>{await _({workspaceId:s,groupID:m.id,name:G})},onAddMember:()=>{a.invalidateQueries({queryKey:[s,"groups"]})},readOnly:n},m.id))})]}),c&&e.jsx("div",{className:"text-center",children:e.jsx(K,{length:Math.ceil(c.total/U),currentPage:Math.min(u,Math.ceil(c.total/U)),onChangeIndex:m=>d(m)})})]}),y&&e.jsx(Z,{onClose:()=>w(!1),onSave:async m=>{await b({name:m,workspaceId:s})},placeholder:t.formatMessage({id:"workspaceSettings.groups.placeholder",defaultMessage:"E.g. marketing team"})})]})}function Pe({currentWorkspaceId:s}){const t=C();return e.jsxs(e.Fragment,{children:[e.jsx(ge,{children:e.jsx("title",{children:t.formatMessage(q.title)})}),e.jsx(he,{title:t.formatMessage(q.title),subtitle:e.jsx(i,{id:"NDDzzF",defaultMessage:"Only workspace admins can edit these settings."})}),e.jsx(fe,{showSpinner:!1,children:e.jsx(Ee,{workspaceId:s})})]})}function qe({group:s,workspaceId:t,onChangeName:a,onDelete:l,onAddMember:n,readOnly:p}){const r=C(),{value:u}=oe("2091463435"),[d,c]=h.useState(null),[g,f]=h.useState(null),[y,S]=h.useState(!1),[w,b]=h.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsxs(o.Row,{className:"hover:bg-token-surface-secondary cursor-pointer [&>td]:py-2",onClick:()=>b(!0),children:[e.jsxs(o.Cell,{children:[e.jsxs("div",{className:"relative pe-3",children:[e.jsx(xe,{IconComponent:je,size:"medium",className:"bg-token-bg-tertiary",rounded:!0}),u&&s.is_scim_managed&&e.jsx("div",{className:"absolute end-0 bottom-0",children:e.jsx(De,{})})]}),s.name]}),e.jsx(o.Cell,{children:e.jsx(i,{id:"workspaceSettings.groups.memberCount",defaultMessage:"{count} members",values:{count:s.num_members}})}),e.jsx(o.Cell,{children:s.created_time&&e.jsx(le,{value:s.created_time,year:"numeric",month:"long",day:"numeric"})}),e.jsx(o.Cell,{textAlign:"right",children:!p&&(s.is_scim_managed?e.jsx(M.Root,{children:e.jsx(M.Trigger,{disabled:!0,children:e.jsx(E,{label:r.formatMessage(F.managedViaSCIMTooltip),className:"flex",side:"right",children:e.jsx(P,{className:"icon-sm"})})})}):e.jsxs(M.Root,{children:[e.jsx(M.Trigger,{className:"-my-2",children:e.jsx(P,{className:"icon-sm"})}),e.jsx(M.Portal,{children:e.jsxs(M.Content,{children:[e.jsx(M.Item,{onClick:j=>{S(!0),j.stopPropagation()},disabled:p||s.is_scim_managed,children:e.jsx(i,{id:"workspaceSettings.groups.addMembers",defaultMessage:"Add members"})}),e.jsx(M.Item,{onClick:j=>{f(s),j.stopPropagation()},children:e.jsx(i,{id:"workspaceSettings.groups.changeName",defaultMessage:"Edit name"})}),e.jsx(M.Item,{onClick:j=>{c(s),j.stopPropagation()},children:e.jsx(i,{id:"workspaceSettings.groups.edit",defaultMessage:"Delete group"})})]})})]}))})]}),d&&e.jsx(Te,{group:d,onDelete:l,onClose:()=>c(null)}),g&&e.jsx(Z,{defaultName:g.name,onSave:a,onClose:()=>f(null),placeholder:"E.g. marketing team"}),w&&e.jsx(ke,{group:s,readOnly:p,workspaceId:t,onClose:()=>b(!1)}),y&&!p&&!s.is_scim_managed&&e.jsx(Y,{isOpen:!0,onClose:()=>{n(s.id),S(!1)},group:s})]})}function Z({defaultName:s,placeholder:t,onSave:a,onClose:l}){const n=C(),p=s==null,[r,u]=h.useState(s||""),[d,c]=h.useState(!1),[g,f]=h.useState(null),y=T(),S=async()=>{if(r.trim()===""){f(n.formatMessage({id:"workspaceSettings.groups.emptyName",defaultMessage:"Group name cannot be empty"}));return}c(!0);try{await a(r),y.success(p?n.formatMessage({id:"workspaceSettings.groups.createdGroup",defaultMessage:"Group created successfully"}):n.formatMessage({id:"workspaceSettings.groups.nameChanged",defaultMessage:"Group name changed successfully"})),l()}catch{f(n.formatMessage({id:"workspaceSettings.groups.duplicateName",defaultMessage:"Group with this name already exists"}))}finally{c(!1)}};return e.jsx(A,{isOpen:!0,type:"success",onClose:l,title:p?n.formatMessage(q.newGroupTitle):n.formatMessage(q.updateNameTitle),testId:"modal-change-group-name",showCloseButton:!0,primaryButton:e.jsx(N,{color:"primary",onClick:()=>S(),loading:d,children:e.jsx(i,{id:"workspaceSettings.groups.save",defaultMessage:"Save"})}),secondaryButton:e.jsx(N,{onClick:l,color:"secondary",children:e.jsx(i,{id:"workspaceSettings.groups.cancel",defaultMessage:"Cancel"})}),children:e.jsxs("div",{className:"mb-3 flex flex-col gap-2",children:[e.jsx("label",{className:"text-sm font-medium",children:e.jsx(i,{id:"workspaceSettings.groups.groupNameLabel",defaultMessage:"Group Name"})}),e.jsx("input",{autoFocus:!0,type:"text",value:r,placeholder:t,onChange:w=>{u(w.target.value),f(null)},className:"border-token-border-secondary focus:border-token-accent w-full rounded border px-3 py-2 text-sm focus:outline-none",onKeyDown:w=>{w.key==="Enter"&&S()}}),g&&e.jsx("p",{className:"text-xs text-red-500",children:g})]})})}function Te({group:s,onDelete:t,onClose:a}){const n=C().formatMessage({id:"workspaceSettings.groups.deleteGroupTitle",defaultMessage:"Delete group {groupName}?"},{groupName:s.name});return e.jsx(A,{type:"warning",isOpen:!0,onClose:a,title:n,testId:"modal-delete-group",showCloseButton:!0,primaryButton:e.jsx(N,{color:"danger",onClick:async()=>{t(s.id),a()},children:e.jsx(i,{id:"workspaceSettings.groups.confirmDelete",defaultMessage:"Delete"})}),secondaryButton:e.jsx(N,{onClick:a,color:"secondary",children:e.jsx(i,{id:"workspaceSettings.groups.cancelDelete",defaultMessage:"Cancel"})}),children:e.jsx("p",{children:e.jsx(i,{id:"workspaceSettings.groups.deleteGroupWarning",defaultMessage:'Are you sure you want to delete the "{groupName}" group? This action cannot be undone.',values:{groupName:s.name}})})})}const q=ie({title:{id:"admin.groupsSettings.title",defaultMessage:"Groups"},newGroupTitle:{id:"workspaceSettings.groups.newGroup",defaultMessage:"New group"},updateNameTitle:{id:"workspaceSettings.groups.updateNameTitle",defaultMessage:"Update group name"}}),Ms=ne(function(){const t=Me();return e.jsx(Pe,{...t})});export{Ms as default};
//# sourceMappingURL=f1np7h0beogeh94x.js.map
