import{d as U,j as r,a5 as E,r as _,M as o,e as x}from"./b8ijctzpgh0s7wpx.js";import{aC as k,h9 as b,h4 as q,c as I,eX as X,e as F,bj as Y}from"./citrwydz0bgriwlc.js";import{eI as B,oh as J,eJ as c,oi as Z,bf as w,am as K,al as S,jA as z,at as $,aX as Q,oj as L}from"./krbmwir12ubt4od1.js";import{N as W}from"./jy1u8exw8iz2slve.js";import{S as tt}from"./eq7m7kpdgo83dcz8.js";var R,T;function st(){if(T)return R;T=1;var t=k();function s(e){return typeof e=="function"?e:t}return R=s,R}var O,D;function et(){if(D)return O;D=1;var t=b(),s=st(),e=q(),i=9007199254740991,n=4294967295,u=Math.min;function h(a,l){if(a=e(a),a<1||a>i)return[];var p=n,f=u(a,n);l=s(l),a-=n;for(var v=t(f,l);++p<a;)l(p);return v}return O=h,O}var rt=et();const it=U(rt),Tt=({gap:t,padding:s=4,size:e=3})=>r.jsx(E.div,{className:I("grid h-full max-w-full flex-1 grid-cols-3 items-center"),style:{gap:t,padding:s},children:it(3,i=>r.jsx(E.div,{className:"dark:bg-white-400 aspect-square rounded-full bg-gray-400",animate:{translateY:["0%","-50%","0%","0%","0%"]},style:{translateX:.5,width:e,height:e},transition:{repeat:1/0,type:"keyframes",delay:i/10,duration:.7}},i))});var nt=(t=>(t.READY="ready",t.LOG="log",t.RUN_START="run_start",t.ENVIRONMENT_STATUS="environment_status",t.ENVIRONMENT_ERROR="environment_error",t.SET_BACKGROUND_COLOR="set_background_color",t.INSTRUMENT="instrument",t.OUTPUT="output",t.ERROR="error",t.RUN_COMPLETE="run_complete",t))(nt||{}),at=(t=>(t.SW_RECONNECT="sw_reconnect",t.SW_NOT_SUPPORTED="sw_not_supported",t))(at||{});const lt=["python","javascript","typescript","html","react"];function ct(t){return lt.includes(t)}var ut=(t=>(t[t.INITIALIZING=0]="INITIALIZING",t[t.INSTALLING_PACKAGES=1]="INSTALLING_PACKAGES",t[t.RUNNING_CODE=2]="RUNNING_CODE",t))(ut||{}),ot=(t=>(t.RUN_CODE="run",t.STOP_CODE="stop",t.PREPARE_ENVIRONMENT="prepare_environment",t))(ot||{}),pt=(t=>(t.SW_RECONNECT_RESPONSE="sw_reconnect_response",t))(pt||{}),ht=(t=>(t.FLUSH="flush",t.SW_RECONNECT_RESPONSE="sw_reconnect_response",t.FETCH_RESPONSE="fetch_response",t.INIT="init",t.PING="ping",t.DISCONNECT="disconnect",t))(ht||{}),P=(t=>(t.javascript="javascript",t.typescript="typescript",t.bash="bash",t.zsh="zsh",t.html="html",t.css="css",t.python="python",t.json="json",t.sql="sql",t.go="go",t.yaml="yaml",t.java="java",t.rust="rust",t.cpp="cpp",t.swift="swift",t.php="php",t.xml="xml",t.ruby="ruby",t.haskell="haskell",t.kotlin="kotlin",t.csharp="csharp",t.c="c",t.objectivec="objectivec",t.r="r",t.lua="lua",t.dart="dart",t.scala="scala",t.perl="perl",t.commonlisp="commonlisp",t.clojure="clojure",t.ocaml="ocaml",t.powershell="powershell",t.verilog="verilog",t.dockerfile="dockerfile",t.vue="vue",t.other="other",t))(P||{});function y(t){if(B(t))switch(t){case c.CODE_REACT:return"typescript";default:return J(t.replace(/^code\//,""),Object.values(P),"other")}}function M(t){return t.includes("'react'")||t.includes('"react"')}function Dt(t,s){switch(t){case c.CODE_HTML:case c.CODE_REACT:return!0;case c.CODE_JAVASCRIPT:case c.CODE_TYPESCRIPT:return M(s);default:return!1}}function jt(t){return Z([c.CODE_PYTHON],t)}function wt(t,s){let e=y(t)??null;return(M(s)||t===c.CODE_REACT)&&(e="react"),e&&ct(e)?e:null}const mt=36,Pt=-24,Et=280,yt=Et+mt,Mt=40;var _t=(t=>(t.COLLAPSED="collapsed",t.EXPANDED="expanded",t))(_t||{});const N="hiveTranscript",j=/(::hiveTranscript\{([^}]+)\})/g,Nt=/\btimestamp\s*=\s*["']?(\d+)["']?(?=\s|,|$)/,ft=()=>t=>{w(t,"paragraph",s=>{if(!s.children||!Array.isArray(s.children))return;const e=[];for(const i of s.children)if(i.type==="text"&&i.value.includes(`::${N}`)){let n=0,u;for(;(u=j.exec(i.value))!=null;){u.index>n&&e.push({type:"text",value:i.value.slice(n,u.index)});const h=u[2],l=Nt.exec(h)?.[1];l&&Number.isInteger(Number(l))&&e.push({type:"textDirective",name:N,attributes:{timestamp:l},data:{hName:N,hProperties:{timestamp:l}},children:[],position:i.position}),n=j.lastIndex}n<i.value.length&&e.push({type:"text",value:i.value.slice(n)})}else e.push(i);s.children=e})},Gt=Object.freeze(Object.defineProperty({__proto__:null,HIVE_LOG_DIRECTIVE_NAME:N,hiveLogDirectivePlugin:ft},Symbol.toStringTag,{value:"Module"})),vt=[X,N],Vt=()=>t=>{w(t,"textDirective",s=>{vt.includes(s.name)||(s.type="text",s.value=`:${s.name}`)})},dt=t=>_.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t},_.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10 2.08496C14.3713 2.08496 17.915 5.62867 17.915 10C17.915 14.3713 14.3713 17.915 10 17.915C5.62867 17.915 2.08496 14.3713 2.08496 10C2.08496 5.62867 5.62867 2.08496 10 2.08496ZM9.22461 7.13086C8.68075 6.78163 7.96613 7.17202 7.96582 7.81836V12.1816C7.96613 12.828 8.68075 13.2184 9.22461 12.8691L12.6182 10.6875C13.1184 10.3657 13.1184 9.6343 12.6182 9.3125L9.22461 7.13086Z"}));function Ht({isDisabled:t=!1,isCodePreviewable:s=!1,isCodeRunning:e,disabledTooltip:i,clientThreadId:n,textdocType:u,onClick:h}){const[a,l]=_.useState(e),p=K(S.hasSeenCanvasCodeExecutionNux),[{width:f},v]=z();_.useEffect(()=>{let C=null;return!e||s?l(e):(C=setTimeout(()=>{l(e)},200),()=>clearTimeout(C))},[e,s]);const G=()=>({conversation_id:n?Y(n):void 0}),V=()=>{F.logEventWithStatsig("Canvas Run Code Button Clicked","chatgpt_canvas_run_code_button_clicked",G()),setTimeout(()=>h?.())},d=r.jsx(E.button,{disabled:t||e&&!a,onClick:V,className:I("btn rounded-full border transition-colors",a?I(W,"border-transparent"):"border-token-border-default hover:bg-token-surface-hover bg-transparent"),animate:{width:f??0},initial:{width:f??0},transition:{type:"spring",bounce:.24,duration:.4},children:r.jsx("div",{ref:v,children:a?r.jsxs(E.div,{className:"flex items-center gap-2 px-3 sm:px-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:[r.jsx(tt,{className:"icon-md"}),r.jsx("span",{className:"hidden sm:inline",children:r.jsx(o,{...m.stopCode})})]}):r.jsxs(E.div,{className:"flex items-center gap-2 px-3 sm:px-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:[r.jsx(dt,{className:"icon-md"}),r.jsx("span",{className:"hidden sm:inline",children:r.jsx(o,{...s?m.previewCode:m.runCode})})]})})}),H=!p.isLoading&&p.eligible,A=t&&i?i:e?null:r.jsx(o,{...s?m.previewCodeTooltip:m.runCodeTooltip}),g=_.useMemo(()=>{if(!u)return"canvas";switch(u){case c.CODE_JAVASCRIPT:return"JavaScript";case c.CODE_TYPESCRIPT:return"TypeScript";case c.CODE_HTML:return"HTML";case c.CODE_PYTHON:return"Python";case c.CODE_REACT:return"React"}return y(u)??"canvas"},[u]);return H?r.jsx($,{announcementKey:S.hasSeenCanvasCodeExecutionNux,show:!0,side:"bottom",align:"end",theme:"bright",dismissOnOutsideClick:!0,badge:"new",title:s?r.jsx(o,{id:"O8VBVO",defaultMessage:"Preview your output"}):r.jsx(o,{id:"2sN/zT",defaultMessage:"Run {language}",values:{language:g}}),description:s?r.jsx(o,{id:"CMJOVI",defaultMessage:"Run your code to see how it looks and interact with the output."}):r.jsx(o,{id:"ew1tTJ",defaultMessage:"See your output and get help debugging without leaving the canvas."}),onDismiss:p.markAsViewed,sideOffset:0,children:d}):A?r.jsx(Q,{label:A,children:d}):d}const m=x({previewCode:{id:"a08baM",defaultMessage:"Preview"},runCode:{id:"O/1aYA",defaultMessage:"Run"},stopCode:{id:"nCwG4+",defaultMessage:"Stop"},runCodeTooltip:{id:"UeNB/S",defaultMessage:"See output and debug"},previewCodeTooltip:{id:"XLZZHl",defaultMessage:"Preview your output"}});class Rt{constructor(s){this.params=s}get isReadonly(){return Object.values(this.params).some(s=>!!s)}get isHistoricalVersion(){return!!this.params.isHistoricalVersion}get isStreaming(){return!!this.params.isTextdocStreaming||!!this.params.isRequestActive}get isTextdocStreaming(){return!!this.params.isTextdocStreaming}get isStreamingFromNative(){return this.isStreaming&&this.params.streamingSource===L.NATIVE}get isRestoring(){return!!this.params.isRestoring}get isShowingChanges(){return!!this.params.isShowingChanges}get isReadonlyFromQueryParam(){return!!this.params.isReadonlyFromQueryParam}}const gt=t=>new Rt(t);export{Mt as C,Et as E,_t as G,N as H,nt as M,Tt as T,gt as a,y as b,yt as c,jt as d,Ht as e,Pt as f,wt as g,vt as h,Dt as i,mt as j,P as k,ht as l,m,at as n,pt as o,ot as p,ut as q,Vt as r,ft as s,Gt as t};
//# sourceMappingURL=by50z05oxjtbvc0n.js.map
