import{gs as v,ad as Ye,c as $,O as $e,ak as ce,cY as Ke,eP as Ge}from"./citrwydz0bgriwlc.js";import{i as z,r as k,j as s,e as Ae,R as u,l as ve,M as D,f as He,C as Je}from"./b8ijctzpgh0s7wpx.js";import{nl as xe,gu as ze,nm as ye,bZ as be,aY as Xe,nn as Ze}from"./krbmwir12ubt4od1.js";import{S as Qe}from"./fcih4bwve8pyqvvh.js";import{u as et}from"./fkpvp4h0mv7mwrx3.js";import{i as Se}from"./dm5mep2m6tn7mvrw.js";import"./j2zbz2jpl151yhf4.js";const tt=["AM","AT","AU","BE","BG","CA","CH","CL","CY","CZ","DE","DK","EE","EG","ES","FI","FR","GB","GE","GR","HR","HU","IE","IN","IS","IT","KE","KR","LI","LT","LU","LV","MD","MT","NL","NO","NZ","PL","PT","RO","SA","SE","SG","SI","SK","TH","TR","TW","TZ","UA","ZA"];function rt(r){return tt.includes(r)}function nt(r){const e=Object.values(xe).filter(n=>n.country===r),t=new Set(e.map(n=>n.region));return Object.values(xe).filter(n=>t.has(n.region))}const Ne=r=>{switch(r){case"ca_gst_hst":return"CA GST/HST";case"ca_pst_bc":return"CA PST-BC";case"ca_pst_mb":return"CA PST-MB";case"ca_pst_sk":return"CA PST-SK";default:return r.replace("_"," ").toUpperCase()}},st=({country:r,type:e,description:t})=>s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center gap-1.5 pe-1 font-medium",children:[s.jsx("img",{src:`https://cdn.openai.com/API/images/flags/png/${r}@2x.png`,alt:e,className:"h-4 w-4"}),Ne(e)]}),s.jsx("span",{className:"block text-sm text-gray-500",children:t})]}),ot=({billingCountry:r,businessName:e,taxIdType:t,taxIdValue:n,onBusinessNameChange:o,onTaxIdTypeChange:a,onTaxIdValueChange:l})=>{const f=z(),c=k.useMemo(()=>nt(r??"").map(g=>({label:st(g),value:g,sortKey:Ne(g.type)})).toSorted((g,d)=>g.sortKey<d.sortKey?-1:1),[r]),x=k.useMemo(()=>{const m=c.find(g=>g.value===t);return m===void 0?null:m},[c,t]);return k.useEffect(()=>{if(x==null&&c.length>0){const m=c.find(g=>g.value.country===r)??c[0];a(m.value)}},[c,x,a,r]),s.jsxs("div",{className:"tax-id-form flex flex-col gap-2",children:[s.jsx("div",{className:"form-row",children:s.jsx("input",{type:"text",id:"businessName",style:{width:"100%",borderRadius:"0.5rem",border:"1px solid #e0e0e0",padding:"0.5rem"},value:e,onChange:m=>o(m.target.value),placeholder:f.formatMessage(ie.businessNamePlaceholder)})}),s.jsx("div",{className:"form-row",children:s.jsx(Qe,{placeholder:f.formatMessage(ie.taxIdTypePlaceholder),options:c,value:x,onChange:m=>{a(m?.value)},isSearchable:!1})}),s.jsx("div",{className:"form-row",children:s.jsx("input",{type:"text",id:"taxId",style:{width:"100%",borderRadius:"0.5rem",border:"1px solid #e0e0e0",padding:"0.5rem"},value:n,onChange:m=>l(m.target.value),placeholder:t?c.find(m=>m.value.type===t.type)?.value.placeholder:f.formatMessage(ie.taxIdPlaceholder)})})]})},ie=Ae({taxIdPlaceholder:{id:"CheckoutTaxIdCollectionForm.taxIdPlaceholder",defaultMessage:"Tax ID"},taxIdTypePlaceholder:{id:"CheckoutTaxIdCollectionForm.taxIdTypePlaceholder",defaultMessage:"Tax type"},businessNamePlaceholder:{id:"CheckoutTaxIdCollectionForm.businessNamePlaceholder",defaultMessage:"Business name"}});function Ce(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)}return t}function ke(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Ce(Object(t),!0).forEach(function(n){Te(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Ce(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function re(r){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?re=function(e){return typeof e}:re=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},re(r)}function Te(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function at(r,e){if(r==null)return{};var t={},n=Object.keys(r),o,a;for(a=0;a<n.length;a++)o=n[a],!(e.indexOf(o)>=0)&&(t[o]=r[o]);return t}function Re(r,e){if(r==null)return{};var t=at(r,e),n,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(o=0;o<a.length;o++)n=a[o],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(t[n]=r[n])}return t}function le(r,e){return it(r)||ct(r,e)||lt(r,e)||ut()}function it(r){if(Array.isArray(r))return r}function ct(r,e){var t=r&&(typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"]);if(t!=null){var n=[],o=!0,a=!1,l,f;try{for(t=t.call(r);!(o=(l=t.next()).done)&&(n.push(l.value),!(e&&n.length===e));o=!0);}catch(c){a=!0,f=c}finally{try{!o&&t.return!=null&&t.return()}finally{if(a)throw f}}return n}}function lt(r,e){if(r){if(typeof r=="string")return je(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return je(r,e)}}function je(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function ut(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var M=function(e,t,n){var o=!!n,a=u.useRef(n);u.useEffect(function(){a.current=n},[n]),u.useEffect(function(){if(!o||!e)return function(){};var l=function(){a.current&&a.current.apply(a,arguments)};return e.on(t,l),function(){e.off(t,l)}},[o,t,e,a])},ne=function(e){var t=u.useRef(e);return u.useEffect(function(){t.current=e},[e]),t.current},K=function(e){return e!==null&&re(e)==="object"},dt=function(e){return K(e)&&typeof e.then=="function"},ft=function(e){return K(e)&&typeof e.elements=="function"&&typeof e.createToken=="function"&&typeof e.createPaymentMethod=="function"&&typeof e.confirmCardPayment=="function"},Ee="[object Object]",Le=function r(e,t){if(!K(e)||!K(t))return e===t;var n=Array.isArray(e),o=Array.isArray(t);if(n!==o)return!1;var a=Object.prototype.toString.call(e)===Ee,l=Object.prototype.toString.call(t)===Ee;if(a!==l)return!1;if(!a&&!n)return e===t;var f=Object.keys(e),c=Object.keys(t);if(f.length!==c.length)return!1;for(var x={},m=0;m<f.length;m+=1)x[f[m]]=!0;for(var g=0;g<c.length;g+=1)x[c[g]]=!0;var d=Object.keys(x);if(d.length!==f.length)return!1;var R=e,L=t,I=function(w){return r(R[w],L[w])};return d.every(I)},mt=function(e,t,n){return K(e)?Object.keys(e).reduce(function(o,a){var l=!K(t)||!Le(e[a],t[a]);return n.includes(a)?(l&&console.warn("Unsupported prop change: options.".concat(a," is not a mutable property.")),o):l?ke(ke({},o||{}),{},Te({},a,e[a])):o},null):null},Fe="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",Ie=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Fe;if(e===null||ft(e))return e;throw new Error(t)},pt=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Fe;if(dt(e))return{tag:"async",stripePromise:Promise.resolve(e).then(function(o){return Ie(o,t)})};var n=Ie(e,t);return n===null?{tag:"empty"}:{tag:"sync",stripe:n}},ht=function(e){!e||!e._registerWrapper||!e.registerAppInfo||(e._registerWrapper({name:"react-stripe-js",version:"3.7.0"}),e.registerAppInfo({name:"react-stripe-js",version:"3.7.0",url:"https://stripe.com/docs/stripe-js/react"}))},Ue=u.createContext(null);Ue.displayName="ElementsContext";var gt=function(e,t){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(t," in an <Elements> provider."));return e};v.any,v.object;v.func.isRequired;var vt=["on","session"],ae=u.createContext(null);ae.displayName="CheckoutSdkContext";var Be=function(e,t){if(!e)throw new Error("Could not find CheckoutProvider context; You need to wrap the part of your app that ".concat(t," in an <CheckoutProvider> provider."));return e},fe=u.createContext(null);fe.displayName="CheckoutContext";var xt=function(e,t){if(!e)return null;e.on,e.session;var n=Re(e,vt);return Object.assign(t||e.session(),n)},yt="Invalid prop `stripe` supplied to `CheckoutProvider`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",De=function(e){var t=e.stripe,n=e.options,o=e.children,a=u.useMemo(function(){return pt(t,yt)},[t]),l=u.useState(null),f=le(l,2),c=f[0],x=f[1],m=u.useState(function(){return{stripe:a.tag==="sync"?a.stripe:null,checkoutSdk:null}}),g=le(m,2),d=g[0],R=g[1],L=function(C,_){R(function(A){return A.stripe&&A.checkoutSdk?A:{stripe:C,checkoutSdk:_}})},I=u.useRef(!1);u.useEffect(function(){var O=!0;return a.tag==="async"&&!d.stripe?a.stripePromise.then(function(C){C&&O&&!I.current&&(I.current=!0,C.initCheckout(n).then(function(_){_&&(L(C,_),_.on("change",x))}))}):a.tag==="sync"&&a.stripe&&!I.current&&(I.current=!0,a.stripe.initCheckout(n).then(function(C){C&&(L(a.stripe,C),C.on("change",x))})),function(){O=!1}},[a,d,n,x]);var P=ne(t);u.useEffect(function(){P!==null&&P!==t&&console.warn("Unsupported prop change on CheckoutProvider: You cannot change the `stripe` prop after setting it.")},[P,t]);var w=ne(n),V=ne(d.checkoutSdk);u.useEffect(function(){var O,C;if(d.checkoutSdk){var _=w==null||(O=w.elementsOptions)===null||O===void 0?void 0:O.appearance,A=n==null||(C=n.elementsOptions)===null||C===void 0?void 0:C.appearance,F=!Le(A,_),U=!V&&d.checkoutSdk;A&&(F||U)&&d.checkoutSdk.changeAppearance(A)}},[n,w,d.checkoutSdk,V]),u.useEffect(function(){ht(d.stripe)},[d.stripe]);var q=u.useMemo(function(){return xt(d.checkoutSdk,c)},[d.checkoutSdk,c]);return d.checkoutSdk?u.createElement(ae.Provider,{value:d},u.createElement(fe.Provider,{value:q},o)):null};De.propTypes={stripe:v.any,options:v.shape({fetchClientSecret:v.func.isRequired,elementsOptions:v.object}).isRequired};var bt=function(e){var t=u.useContext(ae);return Be(t,e)},ue=function(e){var t=u.useContext(ae),n=u.useContext(Ue);if(t&&n)throw new Error("You cannot wrap the part of your app that ".concat(e," in both <CheckoutProvider> and <Elements> providers."));return t?Be(t,e):gt(n,e)},me=function(){bt("calls useCheckout()");var e=u.useContext(fe);if(!e)throw new Error("Could not find Checkout Context; You need to wrap the part of your app that calls useCheckout() in an <CheckoutProvider> provider.");return e},St=["mode"],Ct=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},b=function(e,t){var n="".concat(Ct(e),"Element"),o=function(c){var x=c.id,m=c.className,g=c.options,d=g===void 0?{}:g,R=c.onBlur,L=c.onFocus,I=c.onReady,P=c.onChange,w=c.onEscape,V=c.onClick,q=c.onLoadError,O=c.onLoaderStart,C=c.onNetworksChange,_=c.onConfirm,A=c.onCancel,F=c.onShippingAddressChange,U=c.onShippingRateChange,W=ue("mounts <".concat(n,">")),N="elements"in W?W.elements:null,i="checkoutSdk"in W?W.checkoutSdk:null,p=u.useState(null),y=le(p,2),h=y[0],B=y[1],T=u.useRef(null),G=u.useRef(null);M(h,"blur",R),M(h,"focus",L),M(h,"escape",w),M(h,"click",V),M(h,"loaderror",q),M(h,"loaderstart",O),M(h,"networkschange",C),M(h,"confirm",_),M(h,"cancel",A),M(h,"shippingaddresschange",F),M(h,"shippingratechange",U),M(h,"change",P);var X;I&&(e==="expressCheckout"?X=I:X=function(){I(h)}),M(h,"ready",X),u.useLayoutEffect(function(){if(T.current===null&&G.current!==null&&(N||i)){var j=null;if(i)switch(e){case"payment":j=i.createPaymentElement(d);break;case"address":if("mode"in d){var he=d.mode,ge=Re(d,St);if(he==="shipping")j=i.createShippingAddressElement(ge);else if(he==="billing")j=i.createBillingAddressElement(ge);else throw new Error("Invalid options.mode. mode must be 'billing' or 'shipping'.")}else throw new Error("You must supply options.mode. mode must be 'billing' or 'shipping'.");break;case"expressCheckout":j=i.createExpressCheckoutElement(d);break;case"currencySelector":j=i.createCurrencySelectorElement();break;default:throw new Error("Invalid Element type ".concat(n,". You must use either the <PaymentElement />, <AddressElement options={{mode: 'shipping'}} />, <AddressElement options={{mode: 'billing'}} />, or <ExpressCheckoutElement />."))}else N&&(j=N.create(e,d));T.current=j,B(j),j&&j.mount(G.current)}},[N,i,d]);var Z=ne(d);return u.useEffect(function(){if(T.current){var j=mt(d,Z,["paymentRequest"]);j&&"update"in T.current&&T.current.update(j)}},[d,Z]),u.useLayoutEffect(function(){return function(){if(T.current&&typeof T.current.destroy=="function")try{T.current.destroy(),T.current=null}catch{}}},[]),u.createElement("div",{id:x,className:m,ref:G})},a=function(c){ue("mounts <".concat(n,">"));var x=c.id,m=c.className;return u.createElement("div",{id:x,className:m})},l=t?a:o;return l.propTypes={id:v.string,className:v.string,onChange:v.func,onBlur:v.func,onFocus:v.func,onReady:v.func,onEscape:v.func,onClick:v.func,onLoadError:v.func,onLoaderStart:v.func,onNetworksChange:v.func,onConfirm:v.func,onCancel:v.func,onShippingAddressChange:v.func,onShippingRateChange:v.func,options:v.object},l.displayName=n,l.__elementType=e,l},S=typeof window>"u",kt=u.createContext(null);kt.displayName="EmbeddedCheckoutProviderContext";var jt=function(){var e=ue("calls useStripe()"),t=e.stripe;return t};b("auBankAccount",S);b("card",S);b("cardNumber",S);b("cardExpiry",S);b("cardCvc",S);b("fpxBank",S);b("iban",S);b("idealBank",S);b("p24Bank",S);b("epsBank",S);var Et=b("payment",S);b("expressCheckout",S);b("currencySelector",S);b("paymentRequestButton",S);b("linkAuthentication",S);var It=b("address",S);b("shippingAddress",S);b("paymentMethodMessaging",S);b("affirmMessage",S);b("afterpayClearpayMessage",S);function wt({className:r}){const e=me(),t=z(),n=ze(),o=Ye(),[a,l]=k.useState(null),[f,c]=k.useState(!1),[x,m]=k.useState(""),[g,d]=k.useState(null),[R,L]=k.useState(""),[I,P]=k.useState(null),[w,V]=k.useState(null),q=k.useRef(null),O=k.useRef(null),C=k.useRef(null),_=k.useRef(null),A=k.useRef(null),[F]=k.useState(!!e?.email),U=k.useMemo(()=>rt(w??""),[w]);async function W(){if(U&&f){if(!x.trim())return P(t.formatMessage({id:"CheckoutForm.errorMessageBusinessNameRequired",defaultMessage:"Business name is required"})),!1;if(!g)return P(t.formatMessage({id:"CheckoutForm.errorMessageTaxIdTypeRequired",defaultMessage:"Please select a tax ID type"})),!1;if(!R.trim())return P(t.formatMessage({id:"CheckoutForm.errorMessageTaxIdValueRequired",defaultMessage:"Tax ID is required"})),!1;const i=await e.updateTaxIdInfo({taxId:{value:R.trim(),type:g.stripe_type},businessName:x.trim()});return i.type==="error"?(P(i.error.message),!1):(P(null),!0)}else return await e.updateTaxIdInfo(null),m(""),d(null),L(""),!0}const N=et({defaultValues:{email:e?.email??"",hasAcceptedTermsOfService:!1,hasCompletePaymentElement:!1,hasCompleteBillingAddress:!1},validators:{onChange:({value:i})=>{const p={},{hasAcceptedTermsOfService:y,hasCompleteBillingAddress:h,hasCompletePaymentElement:B}=i;return y||(p.hasAcceptedTermsOfService=t.formatMessage({id:"CheckoutForm.inputLabelTermsOfServiceRequired",defaultMessage:"Agree to OpenAI, LLC's terms to complete your transaction."})),h||(p.hasCompleteBillingAddress=t.formatMessage({id:"CheckoutForm.inputLabelBillingAddressRequired",defaultMessage:"Your billing address is required."})),B||(p.hasCompletePaymentElement=t.formatMessage({id:"UBzTsj",defaultMessage:"Your payment method is required."})),{fields:p}},onBlur:({value:i})=>{const p={},{email:y}=i;return y||(p.email=t.formatMessage({id:"CheckoutForm.inputLabelEmailRequired",defaultMessage:"Your email is required."})),{fields:p}},onBlurAsync:async({value:i})=>{const p={},{email:y}=i;if(e.email!==y){const h=await e.updateEmail(y);if(h.type==="error")switch(h.error.code){case"incompleteEmail":p.email=t.formatMessage({id:"CheckoutForm.inputLabelEmailIncomplete",defaultMessage:"Your email is incomplete."});break;case"invalidEmail":p.email=t.formatMessage({id:"CheckoutForm.inputLabelEmailInvalid",defaultMessage:"Your email is invalid."});break}}return{fields:p}}},canSubmitWhenInvalid:!0,onSubmitInvalid:async({formApi:i})=>{e?.canConfirm||await e.confirm();const y=(i.getFieldMeta("email")?.errors??[]).length>0,B=(i.getFieldMeta("hasAcceptedTermsOfService")?.errors??[]).length>0,G=(i.getFieldMeta("hasCompletePaymentElement")?.errors??[]).length>0,Z=(i.getFieldMeta("hasCompleteBillingAddress")?.errors??[]).length>0;y?(q.current?.scrollIntoView({behavior:"smooth",block:"center"}),O.current?.focus({preventScroll:!0})):G?_.current?.scrollIntoView({behavior:"smooth",block:"center"}):Z?A.current?.scrollIntoView({behavior:"smooth",block:"center"}):B&&C.current?.scrollIntoView({behavior:"smooth",block:"center"})},onSubmit:async()=>{try{if(!await W())return;const p=await e.confirm({redirect:"always"});switch(p.type){case"success":o.success(t.formatMessage({id:"CheckoutForm.bannerMessagePaymentSuccess",defaultMessage:"Payment successfully processed"}));break;case"error":ce.addError("Failed to process Stripe checkout",{error:p.error}),l(p.error.message??t.formatMessage({id:"CheckoutForm.bannerMessagePaymentFailure",defaultMessage:"Failed to process payment"}));break}}catch(i){o.danger(t.formatMessage(Ke.somethingWentWrong)),ce.addError(i)}}});return s.jsx("form",{className:$(r),onSubmit:i=>{i.preventDefault(),N.handleSubmit()},children:s.jsxs("div",{className:"flex flex-col gap-6",children:[s.jsxs(Y,{ref:q,children:[n?s.jsx(Q,{title:ve({id:"CheckoutForm.headingContactInformation",defaultMessage:"Contact information"})}):null,s.jsx(N.Field,{name:"email",children:i=>{const y=i.getMeta().errors.length>0&&(i.getMeta().isBlurred||i.getMeta().isPristine);return s.jsxs("div",{children:[s.jsxs("label",{htmlFor:i.name,className:"flex flex-col",children:[s.jsx("span",{className:"color-[rgb(48, 49, 61)] mb-[0.25rem] text-[0.93rem]",children:s.jsx(D,{id:"CheckoutForm.inputLabelEmail",defaultMessage:"Email"})}),s.jsx("input",{ref:O,id:i.name,disabled:F,name:i.name,onBlur:i.handleBlur,onChange:h=>{i.setMeta(B=>({...B,isBlurred:!1})),i.handleChange(h.target.value)},type:"email",value:i.state.value,className:$("color-[rgb(48, 49, 61)] animate-stripeInputShow rounded-[5px] p-3 outline-none focus:border-white",{"bg-[rgb(247,247,247)]":F,"border-[#df1b41] shadow-none focus:border-[#0570de] focus:shadow-[0px_1px_1px_rgba(0,0,0,0.03),0px_3px_6px_rgba(0,0,0,0.02),0_0_0_3px_hsla(210,96%,45%,0.25),0_1px_1px_0_rgba(0,0,0,0.08)]":y,"border-[#e6e6e6] shadow-[0px_1px_1px_rgba(0,0,0,0.03),_0px_3px_6px_rgba(0,0,0,0.02)] focus:border-[#0570de] focus:shadow-[0px_1px_1px_rgba(0,0,0,0.03),0px_3px_6px_rgba(0,0,0,0.02),0_0_0_3px_hsla(210,96%,45%,0.25),0_1px_1px_0_rgba(0,0,0,0.08)]":!y}),style:{transition:"background 0.15s ease, border 0.15s ease, box-shadow 0.15s ease, color 0.15s ease",backgroundColor:F?"rgb(247,247,247)":""}})]}),s.jsx(we,{errors:i.state.meta.errors.filter(h=>!ye(h)),shouldShowErrors:y})]})}})]}),s.jsxs(Y,{ref:_,children:[s.jsx(Q,{title:ve({id:"CheckoutForm.headingPaymentMethod",defaultMessage:"Payment method"})}),s.jsx(N.Field,{name:"hasCompletePaymentElement",children:i=>s.jsx(Et,{options:{layout:"tabs"},onChange:({complete:p})=>i.handleChange(p)})})]}),s.jsxs(Y,{ref:A,children:[s.jsx(Q,{title:{id:"CheckoutForm.headingBillingAddress",defaultMessage:"Billing address",description:"Heading for the section of the checkout where we collect contact information"}}),s.jsx(N.Field,{name:"hasCompleteBillingAddress",children:i=>s.jsx(It,{options:{mode:"billing"},onChange:({complete:p,value:y})=>{i.handleChange(p),V(y.address.country)}})})]}),U&&s.jsx("div",{children:s.jsx(be,{id:"subscription-tax-id",label:s.jsx("div",{className:"Text-color--gray600 text-[13px]",children:s.jsx(D,{id:"CheckoutForm.purchaseAsBusinessLabel",defaultMessage:"I'm purchasing as business"})}),checked:f,onChange:i=>{c(i.target.checked)}})}),U&&f&&s.jsxs(Y,{children:[s.jsx(Q,{title:{id:"CheckoutForm.headingVATInformation",description:"Heading for the section of the checkout where we collect VAT information",defaultMessage:"VAT information"}}),s.jsx(ot,{billingCountry:w,businessName:x,taxIdType:g,taxIdValue:R,onBusinessNameChange:m,onTaxIdTypeChange:d,onTaxIdValueChange:L}),I&&s.jsx("div",{className:"mt-1 text-[0.93rem] text-[#df1b41]",style:{transition:"height 0.35s ease 0s"},children:I})]}),s.jsx(Y,{ref:C,children:s.jsx(N.Field,{name:"hasAcceptedTermsOfService",children:i=>{const p=i.state.meta.isTouched&&i.state.meta.errors.length>0;return s.jsxs("div",{children:[s.jsx(be,{id:"subscription-tos",className:"self-start",style:{borderColor:p?"#df1b41":void 0},checked:i.state.value,onChange:y=>i.handleChange(y.currentTarget.checked),label:s.jsx(Mt,{})}),s.jsx(we,{errors:i.state.meta.errors.filter(y=>!ye(y)),shouldShowErrors:p})]})}})}),a&&s.jsx("div",{className:"rounded border border-red-200 bg-red-50 px-3 py-2 text-[13px] text-red-700",children:a}),s.jsx(N.Subscribe,{children:i=>s.jsx("button",{disabled:i.isSubmitting,type:"submit",className:$("flex h-[44px] items-center justify-center rounded-md border-none bg-[rgb(16,163,117)] p-0 font-medium shadow-[inset_0_0_0_1px_rgba(50,50,93,0.1),0_2px_5px_0_rgba(50,50,93,0.1),0_1px_1px_0_rgba(0,0,0,0.07)] outline-none",{"text-[rgba(255,255,255,1)]":i.isValid,"text-[rgba(255,255,255,0.6)]":!i.isValid}),children:i.isSubmitting?s.jsx($e,{}):s.jsx(D,{id:"CheckoutForm.buttonSubscribe",defaultMessage:"Subscribe"})})})]})})}const Y=u.forwardRef(({children:r},e)=>s.jsx("div",{ref:e,className:"flex flex-col gap-4",children:r}));Y.displayName="CheckoutFormSection";function Q({className:r,title:e}){return s.jsx("div",{className:$("font-medium",r),children:s.jsx(D,{...e})})}function we({errors:r,shouldShowErrors:e}){return s.jsx("div",{className:"mt-1 text-[0.93rem] text-[#df1b41]",style:{transition:"height 0.35s ease 0s"},children:e&&r.map(t=>s.jsx("p",{children:t},t))})}function Mt(){return s.jsx("div",{className:"Text-color--gray600 text-[13px]",children:s.jsx(D,{id:"CheckoutForm.termsLabel",defaultMessage:"You'll be charged the amount and at the frequency listed above until you cancel. We may change our prices as described in our <termsOfUseLink>Terms of Use</termsOfUseLink>. You can <cancelAnytimeLink>cancel any time</cancelAnytimeLink>. By subscribing, you agree to OpenAI's <termsOfUseLink>Terms of Use</termsOfUseLink> and <privacyPolicyLink>Privacy Policy</privacyPolicyLink>, and you authorize us to store your payment method for renewals and other purchases.",values:{termsOfUseLink:r=>s.jsx("a",{className:"Terms-link",href:"https://openai.com/terms/",rel:"noopener noreferrer",target:"_blank",children:r}),cancelAnytimeLink:r=>s.jsx("a",{className:"Terms-link",href:"https://help.openai.com/en/articles/7232927-how-do-i-cancel-my-chatgpt-plus-subscription",rel:"noopener noreferrer",target:"_blank",children:r}),privacyPolicyLink:r=>s.jsx("a",{className:"Terms-link",href:"https://openai.com/privacy/",rel:"noopener noreferrer",target:"_blank",children:r})}})})}const Pt="{{.assetPrefix}}/assets/logo-c8firrye.webp",Ot={src:Pt};function _t({className:r}){const e=He();return s.jsxs("button",{type:"button",onClick:()=>e("/"),className:$("group relative flex w-[100px] items-center focus:outline-none",r),children:[s.jsx("div",{className:"flex items-center text-[hsla(0,0%,10%,0.4)] group-hover:text-[hsla(0,0%,10%,0.8)] lg:absolute lg:-start-5 lg:top-1",children:s.jsx(Xe,{className:"icon-sm me-1.5 transition-colors duration-100 ease-in-out"})}),s.jsx("img",{src:Ot.src,alt:"",className:"w-full"})]})}function pe({amountMinorUnits:r,currency:e}){const t=r/100;return new Intl.NumberFormat(void 0,{style:"currency",currency:e}).format(t)}function At({className:r}){return s.jsxs("div",{className:r,children:[s.jsx(_t,{className:"mb-5 lg:mb-8"}),s.jsx(Nt,{className:"mb-7"}),s.jsx(Tt,{})]})}function Nt({className:r}){const e=me(),t=e.lineItems[0].name,n=pe({amountMinorUnits:e.total.total.minorUnitsAmount,currency:e.currency}),o=(e.discountAmounts||[]).filter(l=>l.recurring?.type!=="forever").length>0,a=e.recurring?.interval??"not_recurring";return s.jsxs("div",{className:$("text-center lg:text-start",r),children:[s.jsx("div",{className:"Text-color--gray500 font-medium",children:s.jsx(D,{...E.checkoutHeadingForSubscription,values:{lineItem:t}})}),s.jsxs("div",{className:"font-semibold",children:[s.jsx("span",{className:"me-2 text-[28px] lg:text-[36px]",children:n}),s.jsx("span",{className:"Text-color--gray500 text-[14px]",children:s.jsx(D,{...E.periodPrice,values:{interval:a,hasExpiringDiscounts:o?"discounted":"none"}})})]})]})}function Tt(){const r=me(),e=z(),t=r.currency,n=r.total.subtotal.minorUnitsAmount-r.total.discount.minorUnitsAmount-r.total.taxInclusive.minorUnitsAmount,o=r.lineItems.map(l=>{const f=Ut(l);return s.jsx(J,{amountMinorUnits:l.subtotal.minorUnitsAmount,currency:t,subtitle:f?e.formatMessage(f):"",title:l.name},l.id)}),a=(r.discountAmounts??[]).map((l,f)=>s.jsx(Ft,{discount:l,currency:t},f));return s.jsxs("div",{className:"flex flex-col gap-[16px]",children:[o,s.jsx(Me,{}),s.jsx(J,{amountClassName:"font-semibold",amountMinorUnits:r.total.subtotal.minorUnitsAmount,currency:t,title:e.formatMessage(E.subtotal)}),a,s.jsx(Rt,{currency:t,taxAmounts:r.taxAmounts??[],taxExclusiveAmount:n}),s.jsx(Me,{}),s.jsx(J,{amountClassName:"text-base font-semibold",amountMinorUnits:r.total.total.minorUnitsAmount,currency:t,title:e.formatMessage(E.totalDueToday)})]})}function Rt({taxAmounts:r,currency:e,taxExclusiveAmount:t}){const n=z();return Se(r)?s.jsx(J,{amountMinorUnits:0,currency:e,title:n.formatMessage(E.tax)}):r.map(o=>{const a=Se(o.displayName)?n.formatMessage(E.tax):o.displayName,c=(o.minorUnitsAmount/t*100).toFixed(1).replace(/\.?0+$/,""),x=`${a} (${c}%)`;return s.jsx(J,{amountMinorUnits:o.minorUnitsAmount,currency:e,title:x},x)})}function J({amountClassName:r,amountMinorUnits:e,currency:t,subtitle:n,title:o}){return s.jsxs("div",{className:"flex justify-between text-[14px]",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"font-medium",children:o}),n?s.jsx("span",{className:"Text-color--gray400 text-[12px]",children:n}):null]}),s.jsx("span",{className:r,children:pe({amountMinorUnits:e,currency:t})})]})}function Lt(r,e){let t;const n=(e.percentOff??0)/100,o=e.amount,a=e.recurring,l=a?.type==="repeating"?a.durationInMonths:null;return e.recurring&&e.recurring.type==="repeating"?t=n?E.discountPercentOffRecurring:E.fixedAmountOffRecurring:e.recurring?t=n?E.discountPercentOffIndefinite:E.fixedAmountOffIndefinite:t=n?E.discountPercentOffOnce:E.fixedAmountOffOnce,r.formatMessage(t,{formattedAmount:o,percentOff:n,durationInMonths:l})}function Ft({discount:r,currency:e}){const t=z(),n=r.displayName,o=-1*r.minorUnitsAmount,a=Lt(t,r);return s.jsxs("div",{className:"flex justify-between text-[14px]",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsxs("span",{className:"rounded-md bg-gray-100 px-2 py-2 font-medium",children:[s.jsx(Ze,{className:"icon-sm relative top-0.5 float-start me-1"}),n]}),a?s.jsx("span",{className:"Text-color--gray400 text-[12px]",children:a}):null]}),s.jsx("span",{children:pe({amountMinorUnits:o,currency:e})})]})}function Me(){return s.jsx("div",{className:"Border-top-gray50"})}function Ut(r){if(r.recurring)switch(r.recurring.interval){case"month":return E.billingPeriodMonthly;case"year":return E.billingPeriodYearly;default:return ce.addError("unexpected_interval_for_line_item",{interval:r.recurring.interval}),null}return null}const E=Ae({checkoutHeadingForSubscription:{id:"InvoiceSummary.checkoutHeadingForSubscription",defaultMessage:"Subscribe to {lineItem}"},periodPrice:{id:"InvoiceSummary.periodPrice",defaultMessage:"{interval, select, month {per month} year {per year} other {}}{hasExpiringDiscounts, select, discounted { until coupon expires} other {}}"},billingPeriodMonthly:{id:"InvoiceSummary.billingPeriodMonthly",defaultMessage:"Billed monthly"},billingPeriodYearly:{id:"InvoiceSummary.billingPeriodYearly",defaultMessage:"Billed yearly"},subtotal:{id:"InvoiceSummary.subtotal",defaultMessage:"Subtotal"},totalDueToday:{id:"InvoiceSummary.totalDueToday",defaultMessage:"Total due today"},tax:{id:"InvoiceSummary.tax",defaultMessage:"Tax"},discountPercentOffIndefinite:{id:"InvoiceSummary.discountPercentOffIndefinite",defaultMessage:"{percentOff, number, ::percent} off"},discountPercentOffOnce:{id:"InvoiceSummary.discountPercentOffOnce",defaultMessage:"{percentOff, number, ::percent} off for a month"},discountPercentOffRecurring:{id:"InvoiceSummary.discountPercentOffRecurring",defaultMessage:"{percentOff, number, ::percent} off for {durationInMonths, plural, one {a month} other {{durationInMonths, number} months}}"},fixedAmountOffIndefinite:{id:"InvoiceSummary.fixedAmountOffIndefinite",defaultMessage:"{formattedAmount} off"},fixedAmountOffOnce:{id:"InvoiceSummary.fixedAmountOffOnce",defaultMessage:"{formattedAmount} off for a month"},fixedAmountOffRecurring:{id:"InvoiceSummary.fixedAmountOffRecurring",defaultMessage:"{formattedAmount} off for {durationInMonths, plural, one {a month} other {{durationInMonths, number} months}}"}}),Bt=()=>jt()?s.jsxs("div",{className:"checkout-page flex h-full flex-col items-center gap-12 overflow-y-auto bg-white px-4 lg:flex-row lg:items-start lg:justify-center lg:gap-0 lg:px-0",children:[s.jsx("div",{className:"flex w-full justify-center pt-4 lg:min-h-full lg:flex-1 lg:justify-end lg:pe-20 lg:pt-12 lg:pb-12",children:s.jsx(At,{className:"w-full max-w-[380px]"})}),s.jsx("div",{className:"pb-12 lg:min-h-full lg:flex-1 lg:ps-20 lg:pt-12 lg:shadow-[15px_0_30px_0_rgba(0,0,0,0.18)]",children:s.jsx(wt,{className:"w-full max-w-[380px]"})})]}):null;function se(r){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?se=function(e){return typeof e}:se=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},se(r)}var Ve="basil",Dt=function(e){return e===3?"v3":e},qe="https://js.stripe.com",Vt="".concat(qe,"/").concat(Ve,"/stripe.js"),qt=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,Wt=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/,Pe="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",Yt=function(e){return qt.test(e)||Wt.test(e)},$t=function(){for(var e=document.querySelectorAll('script[src^="'.concat(qe,'"]')),t=0;t<e.length;t++){var n=e[t];if(Yt(n.src))return n}return null},Oe=function(e){var t=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",n=document.createElement("script");n.src="".concat(Vt).concat(t);var o=document.head||document.body;if(!o)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return o.appendChild(n),n},Kt=function(e,t){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"7.3.0",startTime:t})},H=null,ee=null,te=null,Gt=function(e){return function(t){e(new Error("Failed to load Stripe.js",{cause:t}))}},Ht=function(e,t){return function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}},Jt=function(e){return H!==null?H:(H=new Promise(function(t,n){if(typeof window>"u"||typeof document>"u"){t(null);return}if(window.Stripe&&e&&console.warn(Pe),window.Stripe){t(window.Stripe);return}try{var o=$t();if(o&&e)console.warn(Pe);else if(!o)o=Oe(e);else if(o&&te!==null&&ee!==null){var a;o.removeEventListener("load",te),o.removeEventListener("error",ee),(a=o.parentNode)===null||a===void 0||a.removeChild(o),o=Oe(e)}te=Ht(t,n),ee=Gt(n),o.addEventListener("load",te),o.addEventListener("error",ee)}catch(l){n(l);return}}),H.catch(function(t){return H=null,Promise.reject(t)}))},zt=function(e,t,n){if(e===null)return null;var o=t[0],a=o.match(/^pk_test/),l=Dt(e.version),f=Ve;a&&l!==f&&console.warn("Stripe.js@".concat(l," was loaded on the page, but @stripe/stripe-js@").concat("7.3.0"," expected Stripe.js@").concat(f,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var c=e.apply(void 0,t);return Kt(c,n),c},_e=function(e){var t=`invalid load parameters; expected object of shape

    {advancedFraudSignals: boolean}

but received

    `.concat(JSON.stringify(e),`
`);if(e===null||se(e)!=="object")throw new Error(t);if(Object.keys(e).length===1&&typeof e.advancedFraudSignals=="boolean")return e;throw new Error(t)},oe,de=!1,We=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];de=!0;var o=Date.now();return Jt(oe).then(function(a){return zt(a,t,o)})};We.setLoadParameters=function(r){if(de&&oe){var e=_e(r),t=Object.keys(e),n=t.reduce(function(o,a){var l;return o&&r[a]===((l=oe)===null||l===void 0?void 0:l[a])},!0);if(n)return}if(de)throw new Error("You cannot change load parameters after calling loadStripe");oe=_e(r)};const sr=Ge(function(){const e=Je(),t=e.publishable_key,n=k.useMemo(()=>We(t,{betas:["custom_checkout_beta_6"],locale:"auto"}),[t]);switch(e.tag){case"hosted_checkout_session":return window.location.href=e.url,null;case"custom_checkout_session":{const o=e.client_secret;return s.jsx(De,{stripe:n,options:{fetchClientSecret:()=>Promise.resolve(o),elementsOptions:{appearance:{rules:{".Input--invalid":{boxShadow:"none"}}}}},children:s.jsx(Bt,{})})}}});export{sr as default};
//# sourceMappingURL=c4o0jjjlfsyf0l8d.js.map
