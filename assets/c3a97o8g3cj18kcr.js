import{eP as u,b as _,fD as s,d5 as n,d6 as o,aU as c}from"./citrwydz0bgriwlc.js";import{u as f}from"./jekpe1ukp5thtucq.js";import{f as p,r as A}from"./b8ijctzpgh0s7wpx.js";import"./krbmwir12ubt4od1.js";const O=u(function(){const r=p(),a=f();return A.useEffect(()=>{async function i(){const l=window.location.href;try{const e=await _.safeGet("/aip/connectors/links/oauth/callback",{parameters:{query:{full_redirect_url:l}}});if(a){s({success:!0,connectorId:e.link.connector_id}),window.close();return}if(e?.post_auth_url){const t=new URL(e.post_auth_url,location.origin);r(t.pathname+t.search+t.hash)}else r(n(o.OAUTH_FAILED_GENERIC))}catch(e){if(a){s({success:!1,connectorId:"",errorType:e instanceof c&&e.detail?.error_code==="OAUTH_SCOPES_MISMATCH"?o.OAUTH_FAILED_SCOPE_MISMATCH:o.OAUTH_FAILED_GENERIC}),window.close();return}let t=o.OAUTH_FAILED_GENERIC;e instanceof c&&e.detail?.error_code==="OAUTH_SCOPES_MISMATCH"&&(t=o.OAUTH_FAILED_SCOPE_MISMATCH),r(n(t))}}i()},[a,r]),null});export{O as default};
//# sourceMappingURL=c3a97o8g3cj18kcr.js.map
