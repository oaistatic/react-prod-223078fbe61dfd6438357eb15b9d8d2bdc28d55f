import{r,e as _e,j as e,M as m,i as b,f as Te,k as ke}from"./b8ijctzpgh0s7wpx.js";import{aD as Ge,km as Ve,c5 as ze,kn as Fe,ko as Ke,am as S,al as A,v as ve,kp as Oe,kq as Le,kr as Qe,ks as He,A as Ce,z as Ye,kt as qe,ku as Ze,kv as $e,kw as Je,bL as P,bM as Be,aF as Xe,kx as et,ky as tt,gi as ot,kz as st,kA as nt,kB as at,kC as it,kD as lt,kE as ct,kF as rt,kG as dt,kH as ut,kI as gt,kJ as mt,kK as ht,kL as ft,kM as pt,kN as Mt,kO as xt,kP as kt,kQ as Ct,kR as bt,kS as St,kT as At,kU as Nt,kV as wt,kW as yt,kX as _t,kY as vt,kZ as Ot,k_ as Lt,k$ as Bt,l0 as jt,N as Dt,P as E,U as be,l1 as Se,l2 as It,l3 as Et}from"./krbmwir12ubt4od1.js";import{aL as Pt,au as Wt,e as h,aQ as Ae,ab as v,dp as je,B as x,f as W,a7 as De,ff as Ut,fe as Rt,fd as Tt,m as Gt,ep as Vt,b9 as zt,l as Ft,eM as Kt,gQ as Ne,eN as Qt}from"./citrwydz0bgriwlc.js";import{u as Ht,a as Yt,N as qt,I as Zt}from"./jkznwfhp8ahnvlot.js";import{b as $t}from"./cb2t82g498wwhuc2.js";import{b as Jt}from"./k6ccgr4wxcppeg93.js";import{d as U,a as Xt}from"./jekpe1ukp5thtucq.js";import{P as eo}from"./exvo283q5zxd2q6r.js";const we="has-dismissed-welcome-back-modal",Ie=()=>{const[t,o]=r.useState(()=>sessionStorage.getItem(we)!=null),{layer:n}=Pt("3637408529"),a=n.get("is_no_auth_welcome_back_modal_enabled",!1),i=Ge(),{isUnauthenticated:s,isLoading:c}=Wt(),l=Ve(),d=$t(),u=()=>{o(!0),sessionStorage.setItem(we,"true")};return c?{isLoading:!0,isOpen:null,onClose:null}:{isLoading:!1,isOpen:s&&a&&!t&&l&&!i&&!d,onClose:u}},to=({onClose:t})=>{const o=ze(),n=Fe(),a=Ke(y.signUpCta),i=n?"center":"bottom",{isOpen:s,onClose:c}=Ie();return r.useEffect(()=>{s&&(h.logEvent("No Auth Welcome Back Modal Shown"),Ae.logEvent("chatgpt_no_auth_welcome_back_modal_shown"))},[s]),s?e.jsx(v,{testId:"modal-no-auth-welcome-back",isOpen:!0,onClose:je,shouldIgnoreClickOutside:!0,showCloseButton:!1,type:"success",noPadding:!0,size:"custom",className:"max-w-[373px] sm:max-w-[400px]",position:i,children:e.jsxs("div",{className:"flex flex-col items-center justify-center px-6 py-8 sm:p-10",children:[e.jsx("p",{className:"mb-1 text-center text-2xl font-semibold",children:e.jsx(m,{...y.title})}),e.jsx("p",{className:"text-token-text-secondary mb-6 text-center text-lg",children:e.jsx(m,{...y.subtitle})}),e.jsx(x,{as:"button",size:"large",color:"primary",fullWidth:!0,className:"mb-2 sm:mb-3","data-testid":"welcome-login-button",onClick:()=>{o({authType:"login",callback:l=>{h.logLogInButtonClicked({provider:l,location:"No Auth Welcome Back Modal"})}})},children:e.jsx(m,{...y.logInCta})}),e.jsx(x,{as:"button",size:"large",color:"secondary",fullWidth:!0,className:"mb-5",onClick:()=>{o({authType:"signup",callback:l=>{h.logSignUpButtonClicked({provider:l,location:"No Auth Welcome Back Modal"})}})},children:e.jsx(m,{...a})}),e.jsx("a",{href:"#",className:"text-token-text-secondary cursor-pointer font-semibold underline sm:text-sm",onClick:l=>{l.preventDefault(),h.logEvent("No Auth Welcome Modal Stay Logged Out Link Clicked"),Ae.logEvent("chatgpt_no_auth_welcome_back_modal_stay_logged_out_link_clicked"),t(),c()},"data-testid":"dismiss-welcome",children:e.jsx(m,{...y.stayLoggedOutLink})})]})}):null},y=_e({title:{id:"NoAuthWelcomeBackModal.title",defaultMessage:"Welcome back"},subtitle:{id:"7WQi5y",defaultMessage:"Log in or sign up to get smarter responses, upload files and images, and more."},signUpCta:{id:"NoAuthWelcomeBackModal.signUpCta",defaultMessage:"Sign up"},logInCta:{id:"NoAuthWelcomeBackModal.logInCta",defaultMessage:"Log in"},stayLoggedOutLink:{id:"NoAuthWelcomeBackModal.stayLoggedOut",defaultMessage:"Stay logged out"}}),oo="https://persistent.oaistatic.com/chatgpt/internal-knowledge-promo-video.mp4",so="https://persistent.oaistatic.com/chatgpt/internal-knowledge-promo.png",no=()=>{const{isLoading:t,eligible:o}=S(A.hasSeenContextualAnswerAdminNuxModal),n=ve(),a=Oe(),i=U(),{connectionInstanceData:s,isLoading:c}=Le({skip:!n||a}),l=t||c,d=W(),p=!!(d?.isAdminOfAccount()||d?.isOwnerOfAccount())&&o&&n&&!a&&s?.connection_statuses.length===0&&!i?.can_see_system_hint_announcement;return l?"loading":p?"show":"hide"},ao=()=>{const{isLoading:t,eligible:o}=S(A.hasSeenContextualAnswerUserNuxModal),n=ve(),a=Oe(),i=U(),{connectionInstanceData:s,isLoading:c}=Le({skip:!n||a}),l=t||c,d=o&&n&&!a&&(s?.connection_statuses.length??0)>0&&(s?.connection_statuses.some(u=>u.user_connection_details.auth_status==="not_connected")??!1)&&!i?.can_see_system_hint_announcement;return l?"loading":d?"show":"hide"},Ee=({onClose:t,title:o,description:n,secondaryButton:a,primaryButton:i})=>{const s=b(),[c,l]=r.useState(!1);return e.jsxs(v,{testId:"modal-ca-nux",isOpen:!0,noPadding:!0,onClose:t,shouldIgnoreClickOutside:!0,size:"custom",type:"success",className:"max-w-md",children:[e.jsxs("div",{className:"relative h-[200px]",children:[e.jsx(De,{onClick:t,className:"absolute end-0 top-0 z-10 me-2 mt-2 text-black"}),e.jsx("video",{src:oo,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"h-full w-full object-cover object-bottom",onLoadedData:()=>l(!0)}),!c&&e.jsx("img",{src:so,alt:s.formatMessage({id:"yNEeCK",defaultMessage:"Modal splash image"}),className:"absolute inset-0 h-full w-full object-cover object-bottom transition-opacity duration-300"})]}),e.jsxs("div",{className:"flex flex-col gap-2 px-8 pt-8 pb-10 text-center",children:[e.jsx("div",{className:"text-xl font-medium",children:o}),e.jsx("div",{className:"text-md text-token-text-secondary",children:n}),e.jsxs("div",{className:"mt-5 flex justify-center gap-3",children:[a,i]})]})]})},io=({onClose:t})=>{const o=b(),n=Te(),{markAsViewed:a}=S(A.hasSeenContextualAnswerAdminNuxModal);r.useEffect(()=>{h.logEventWithStatsig("Contextual Answers Admin Nux Modal Shown","chatgpt_contextual_answers_admin_nux_modal_shown")},[]);const i=()=>{h.logEventWithStatsig("Contextual Answers Admin Nux Modal Confirmation Button Clicked","chatgpt_contextual_answers_admin_nux_modal_confirmation_button_clicked"),a(),t(),n("/admin/ca")},s=()=>{a(),t()},c=o.formatMessage({id:"MU76mM",defaultMessage:"Introducing internal knowledge in ChatGPT"}),l=o.formatMessage({id:"j/qm6r",defaultMessage:"Connect Google Drive to personalize ChatGPT’s answers. You control what’s connected, and ChatGPT respects existing permissions."}),d=e.jsx(x,{color:"secondary",onClick:()=>{window.open(Ce,"_blank"),Ye({link:Ce,location:"admin_nux_modal"})},children:e.jsx(m,{id:"ltVYd/",defaultMessage:"Learn more"})}),u=e.jsx(x,{color:"primary",onClick:()=>i(),children:e.jsx(m,{id:"zeZEKl",defaultMessage:"Connect"})});return e.jsx(Ee,{onClose:s,title:c,description:l,secondaryButton:d,primaryButton:u})},lo=({onClose:t})=>{const o=b(),{markAsViewed:n}=S(A.hasSeenContextualAnswerUserNuxModal);r.useEffect(()=>{h.logEventWithStatsig("Contextual Answers User Nux Modal Shown","chatgpt_contextual_answers_user_nux_modal_shown")},[]);const[a,i]=r.useState("nux"),{gDriveOAuthConnectionId:s,refetch:c,isLoading:l}=Qe(),d=()=>{h.logEventWithStatsig("Contextual Answers User Nux Modal Confirmation Button Clicked","chatgpt_contextual_answers_user_nux_modal_confirmation_button_clicked"),n(),s?i("gDriveOauth"):(t(),Ze())},u=()=>{n(),t()},p=o.formatMessage({id:"OLuM1V",defaultMessage:"ChatGPT can now use internal knowledge"}),O=o.formatMessage({id:"2xspO2",defaultMessage:"Your admin connected your organization’s Google Drive, so ChatGPT can now use your team’s docs and slides to give you more personalized answers."}),L=e.jsx(x,{color:"secondary",onClick:u,children:e.jsx(m,{id:"KfJU7d",defaultMessage:"Maybe later"})}),B=e.jsx(x,{color:"primary",onClick:()=>d(),loading:l,icon:s&&qe,children:e.jsx(m,{id:"aOsuFy",defaultMessage:"Connect now"})});return e.jsxs(e.Fragment,{children:[a==="gDriveOauth"&&s&&e.jsx(He,{onClose:t,isAdminFlow:!1,connectionId:s,location:"user_nux_modal",onSuccess:c}),a==="nux"&&e.jsx(Ee,{onClose:u,title:p,description:O,secondaryButton:L,primaryButton:B})]})},co="https://persistent.oaistatic.com/chatgpt/connector-promo-light.png",ro=()=>{const{isLoading:t,eligible:o}=S(A.hasSeenConnectorsNuxModal),n=W(),a=!!(n?.isAdminOfAccount()||n?.isOwnerOfAccount()),i=U(),{availableConnectors:s}=Xt(),c=t,l=o&&i?.enabled&&i?.can_see_system_hint_announcement&&(a||s.length>0);return c?"loading":l?"show":"hide"},uo=({onClose:t,title:o,description:n,secondaryButton:a,primaryButton:i})=>{const s=b();return e.jsxs(v,{testId:"modal-connectors-nux",isOpen:!0,noPadding:!0,onClose:t,shouldIgnoreClickOutside:!0,size:"custom",type:"success",className:"relative flex max-w-[480px] flex-col",children:[e.jsxs("div",{className:"relative h-[213px]",children:[e.jsx(De,{onClick:t,className:"absolute end-0 top-0 z-10 me-2 mt-2 text-black/70 ring-0! outline-0! hover:bg-black/5! focus:ring-0! focus:ring-offset-0! focus:outline-0! active:bg-black/10!"}),e.jsx("img",{src:co,alt:s.formatMessage({id:"yNEeCK",defaultMessage:"Modal splash image"}),className:"absolute inset-0 h-full w-full object-cover object-bottom transition-opacity duration-300"})]}),e.jsxs("div",{className:"flex flex-col gap-2 px-8 py-8",children:[e.jsx("div",{className:"text-[22px] leading-7 font-medium",children:o}),e.jsx("div",{className:"text-token-text-secondary",children:n}),e.jsxs("div",{className:"mt-5 flex justify-end gap-3",children:[a,i]})]})]})},go=({onClose:t})=>{const o=b(),n=W(),a=!!(n?.isAdminOfAccount()||n?.isOwnerOfAccount()),{markAsViewed:i}=S(A.hasSeenConnectorsNuxModal);r.useEffect(()=>{h.logEventWithStatsig("Connectors Nux Modal Shown","chatgpt_connectors_nux_modal_shown")},[]);const s=()=>{h.logEventWithStatsig("Connectors Nux Modal Confirmation Button Clicked","chatgpt_connectors_nux_modal_confirmation_button_clicked"),i(),a?window.location.href="/admin/ca":(t(),window.location.hash="#settings/ConnectorSettings")},c=()=>{i(),t()},l=o.formatMessage({id:"l6VLn3",defaultMessage:"Your apps, smarter chats"}),d=o.formatMessage({id:"QTZ7a/",defaultMessage:"Find answers, summarize info, or get things done with tools you use every day."}),u=e.jsx(x,{color:"secondary",onClick:c,children:e.jsx(m,{id:"S6nkY/",defaultMessage:"Not now"})}),p=e.jsx(x,{color:"primary",onClick:()=>s(),children:e.jsx(m,{id:"1pAV1c",defaultMessage:"Connect apps"})});return e.jsx(uo,{onClose:c,title:l,description:d,secondaryButton:u,primaryButton:p})},mo=({onClose:t})=>{const o=b(),n=P(Be.isBusinessWorkspace),a=P(s=>s.currentWorkspace),i=n?o.formatMessage(ye.workspaceWelcome,{workspaceName:a?.name}):"ChatGPT";return e.jsx(v,{testId:"modal-onboarding",isOpen:!0,onClose:je,type:"success",title:i,size:"custom",noPadding:!0,className:"max-w-3xl",description:o.formatMessage(ye.personalOnboardingSubheading),children:e.jsx(It,{onClose:t,scope:Et.Personal})})},ho=({onClose:t})=>{const o=Qt.useStore();return r.useEffect(()=>(o.setOnCloseSideEffect(t),o.setManualVisibility(!0),()=>{o.setManualVisibility(!1)}),[t,o]),null};function No({clientThreadId:t,page:o}){const[n,a]=r.useState(0),{hasSeenOnboardingDate:i}=$e(),{hasSeenTeamOwnerOnboardingDate:s}=Je(),c=P(Be.isBusinessWorkspace),[l,d]=r.useState(!1),u=ke(),p=Xe(u),{data:O,isPending:L,isEnabled:B}=et(),R=tt(O,L&&B),T=Ut(),G=Rt(),V=Tt(),[Pe,j]=Gt(t,g=>[!g||g.isLoading,g?.conversationOrigin]),D=Pe&&!!t,{data:f,isError:N}=Vt(),I=zt(f),k=f!=null,z=f&&f?.accountItems.length>1&&f.currentAccountId==null,F=f?.accountItems.some(g=>g.isPersonalAccount()),K=!!f?.accountItems&&f.accountItems.length>0&&f.accountItems.every(({canAccessWithCurrentSession:g})=>!g),{eligible:Q,isLoading:H}=ot(),{value:Y}=Ft("1542198993"),{punchOutRequireLoginInfo:q}=st(),{state:Z}=nt(),{isOpen:$,isLoading:J}=at(),{isOpen:X,isLoading:ee}=it(),{isOpen:te,isLoading:oe}=lt(),{isOpen:se,isLoading:ne}=Ie(),{state:ae}=ct(),ie=rt(),le=Ht(),ce=Yt(),re=no(),de=ao(),ue=ro(),ge=dt(),me=ut(),{isOpen:he,isLoading:fe}=gt(),{isOpen:We}=Jt(),{shouldShowCookieBanner:pe,isCookieConsentBannerLoading:Me}=Kt(),C=r.useMemo(()=>[{Component:mt,visibility:["chat","codex"],getModalState:()=>q?"show":"hide",isDeferrable:!1},{Component:ht,visibility:["chat","codex"],getModalState:()=>Z,isDeferrable:!1},{Component:ft,visibility:["chat"],getModalState:()=>ae,isDeferrable:!1},{Component:pt,visibility:["chat"],getModalState:()=>fe?"loading":he?"show":"hide",isDeferrable:!1},{Component:qt,visibility:["chat"],getModalState:()=>ce,isDeferrable:!0},{Component:Mt,visibility:["chat"],getModalState:()=>J||D?"loading":j===Ne.APPLE?"hide":$?"show":"hide",isDeferrable:!0},{Component:to,visibility:["chat"],getModalState:()=>ne||D?"loading":j===Ne.APPLE?"hide":se?"show":"hide",isDeferrable:!0},{Component:ho,visibility:["chat","codex"],getModalState:()=>Me?"loading":pe?"show":"hide",isDeferrable:!1},{Component:mo,visibility:["chat"],getModalState:()=>c||p?"hide":i===null?"loading":i===!1?"show":"hide",isDeferrable:!0},{Component:xt,visibility:["chat","codex"],getModalState:()=>N?"hide":z?"show":k?"hide":"loading",isDeferrable:!1},{Component:kt,visibility:["chat","codex"],getModalState:()=>T!==null?"show":N||k?"hide":"loading",isDeferrable:!1},{Component:Ct,visibility:["chat","codex"],getModalState:()=>G!==null?"show":N||k?"hide":"loading",isDeferrable:!1},{Component:bt,visibility:["chat","codex"],getModalState:()=>V!=null?"show":N||k?"hide":"loading",isDeferrable:!1},{Component:St,visibility:["chat","codex"],getModalState:()=>k?K?"show":"hide":"loading",isDeferrable:!1},{Component:At,visibility:["chat","codex"],getModalState:()=>ee?"loading":X?"show":"hide",isDeferrable:!1},{Component:Nt,visibility:["chat","codex"],getModalState:()=>oe?"loading":te?"show":"hide",isDeferrable:!1},{Component:wt,visibility:["chat","codex"],getModalState:()=>"hide",isDeferrable:!1},{Component:yt,visibility:["chat","codex"],getModalState:()=>!I?.isTeam()||!I?.isOwnerOfAccount()||!F?"hide":!k||s===null?"loading":s===!1?"show":"hide",isDeferrable:!1},{Component:_t,visibility:["chat","codex"],getModalState:()=>c?i===null?"loading":i===!1?"show":"hide":"hide",isDeferrable:!0},{Component:vt,visibility:["chat"],getModalState:()=>H?"loading":Q&&Y?"show":"hide",isDeferrable:!1},{Component:Ot,visibility:["chat","codex"],getModalState:()=>R,isDeferrable:!1},{Component:Lt,visibility:["chat"],getModalState:()=>ie,isDeferrable:!1},{Component:w=>t&&e.jsx(eo,{clientThreadId:t,children:e.jsx(Zt,{clientThreadId:t,...w})}),visibility:["chat"],getModalState:()=>le,isDeferrable:!1},{Component:io,visibility:["chat"],getModalState:()=>re,isDeferrable:!1},{Component:lo,visibility:["chat"],getModalState:()=>de,isDeferrable:!1},{Component:go,visibility:["chat"],getModalState:()=>ue,isDeferrable:!1},{Component:Bt,visibility:["chat"],getModalState:()=>ge,isDeferrable:!0},{Component:jt,visibility:["chat"],getModalState:()=>me,isDeferrable:!1}].filter(w=>w.visibility.includes(o)),[o,q,Z,ae,fe,he,ce,J,D,j,$,ne,se,Me,pe,c,p,i,N,z,k,T,G,V,K,ee,X,oe,te,I,F,s,H,Q,Y,R,ie,t,le,re,de,ue,ge,me])[n],Ue=l;let M;C&&(C.isDeferrable&&Ue?M="hide":C.Component?M=C.getModalState():M="hide"),r.useEffect(()=>{M==="hide"&&a(n+1)},[n,M]);const{pathname:_}=ke(),xe=r.useRef(_);if(r.useEffect(()=>{xe.current!==_&&(xe.current=_,a(0))},[_]),r.useEffect(()=>{const g=M==="show",w=Dt.getState().activeModals.has(E.BlockingInitialComponent);g!==w&&(g?be.openModal(E.BlockingInitialComponent):be.closeModal(E.BlockingInitialComponent))},[M]),C==null)return Se.trackNamespace(Se.NS_COMPOSER),e.jsx("span",{"data-testid":"blocking-initial-modals-done",className:"hidden"});if(M!=="show"||We)return null;const Re=C.Component;return e.jsx(Re,{onClose:()=>{d(!0),a(g=>g+1)}})}const ye=_e({workspaceWelcome:{id:"BlockingInitialModals.workspaceWelcome",defaultMessage:"Welcome to the {workspaceName} workspace"},personalOnboardingSubheading:{id:"BlockingInitialModals.personalOnboardingSubheading",defaultMessage:"Tips for getting started"}});export{No as B};
//# sourceMappingURL=me9hhl03j9gxv6g7.js.map
