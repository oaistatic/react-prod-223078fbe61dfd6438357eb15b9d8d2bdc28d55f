import{ad as v,bg as C,B as h,eP as M}from"./citrwydz0bgriwlc.js";import{i as N,f as O,r as b,b as P,j as e,a9 as I,M as n}from"./b8ijctzpgh0s7wpx.js";import{dK as W,bP as u,ds as A}from"./krbmwir12ubt4od1.js";import{C as E}from"./nbecgsenc0idjs5j.js";import{e as d,f as F,W as _}from"./omp8ie1vzl40ti1z.js";import{W as R}from"./gw319re0na8zpsh7.js";import"./ndqm17bbs5ambnrw.js";import"./megablgldkh4lap1.js";import"./hbpbckirom363mgh.js";import"./jekpe1ukp5thtucq.js";import"./b4v20hsjdnh8a64d.js";import"./ku4zsoy6w4wkp690.js";import"./k1h56nx2kjoqc52m.js";import"./exvo283q5zxd2q6r.js";import"./dcml6fn13vfm1zv2.js";import"./nvghija6qp2cunds.js";import"./djd85tifm57yisqi.js";import"./h3krx8dg2s8o2yh5.js";import"./cfe0bfy5asp94vp2.js";import"./jkznwfhp8ahnvlot.js";import"./izdon3syh095bs23.js";import"./dweroubxngal4vlb.js";import"./i7jya7stlyvnzya0.js";import"./cb2t82g498wwhuc2.js";import"./ndwtlsjk3xm27wkq.js";import"./o0ebhsapkoy5qkg1.js";import"./k7nub2yuxq70se07.js";import"./k6ccgr4wxcppeg93.js";import"./dbalwdodzoo02ru2.js";import"./c2d9eukr2hh7n3q0.js";import"./nnffynscsbaol5fb.js";import"./eeyp7d7oqudhas3m.js";import"./nfkxdwnvdjy1s4sn.js";import"./cwi4lsxreiklxbjv.js";function B({isSelected:a,onSelect:c,type:p,prompt:l}){return e.jsxs("button",{className:`starter-task-card ${a?"bg-token-bg-primary":"bg-token-bg-tertiary border-token-border-light"} border-token-border-default flex h-72 w-64 flex-col justify-between gap-4 overflow-clip rounded-xl border p-4 text-start transition-transform hover:shadow-[0_8px_16px_0_rgba(0,0,0,0.06)]`,onClick:c,style:{transition:"transform 0.4s cubic-bezier(0.1, 1, 0.25, 0.98)"},onMouseEnter:r=>{const m=(Math.random()*4-2).toFixed(2);r.currentTarget.style.transform=`rotate(${m}deg) scale(1.02)`},onMouseLeave:r=>r.currentTarget.style.transform="",children:[e.jsxs("div",{className:"flex h-full w-full flex-col gap-4",children:[e.jsx("div",{className:"bg-token-bg-primary text-token-text-secondary border-token-border-light flex w-fit flex-col gap-4 rounded-md border px-2 py-1 text-xs font-medium",children:p==="ask"?e.jsx(n,{id:"wham.codexOnboardingStarterTasks.ask",defaultMessage:"Ask"}):e.jsx(n,{id:"wham.codexOnboardingStarterTasks.build",defaultMessage:"Code"})}),e.jsx("div",{className:"w-full justify-start text-sm leading-5",children:l})]}),a?e.jsx(A,{className:"icon-lg text-token-text-primary"}):e.jsx("div",{className:"h-6 w-6",children:e.jsx("div",{className:"border-token-border-default h-6 w-6 rounded-full border"})})]})}function $(){const a=N(),{eligible:c,isLoading:p,markAsViewed:l}=W(),r=O(),m=v(),x=d(({environmentId:t})=>t),g=d(({branch:t})=>t),{refetch:w}=F(),[o,T]=b.useState(["ask-0","build-1","ask-2"]);b.useEffect(()=>{u.recordStarterTasksView()},[]);const f=[{id:"ask-0",type:"ask",prompt:a.formatMessage({id:"wham.codexOnboardingStarterTasks.ask.prompt.0",defaultMessage:"Explain the codebase to a newcomer. What is the general structure, what are the important things to know, and what are some pointers for things to learn next?"})},{id:"build-1",type:"build",prompt:a.formatMessage({id:"wham.codexOnboardingStarterTasks.build.prompt.1",defaultMessage:"Pick a part of the codebase that seems important and find and fix a bug."})},{id:"ask-2",type:"ask",prompt:a.formatMessage({id:"wham.codexOnboardingStarterTasks.ask.prompt.2",defaultMessage:"Go through the codebase, find issues and propose one task to fix a typo, one task to fix a bug, one task to fix a code comment or documentation discrepancy, and one task to improve a test."})}],{mutate:j,isPending:S}=P({mutationFn:()=>{if(!x||!g)throw m.danger(a.formatMessage({id:"wham.whamComposer.failedToCreateTask",defaultMessage:"Failed to create task"})),new Error("Environment, content, and branch are required");return Promise.all(f.filter(t=>o.includes(t.id)).map(t=>{const i=crypto.randomUUID();return d.getState().addPendingTaskId(i),_.createNewTask(x,g,t.prompt,t.type==="ask").catch(s=>{throw d.getState().removePendingTaskId(i),m.danger(a.formatMessage({id:"wham.whamComposer.failedToCreateTask",defaultMessage:"Failed to create task"}),{id:i,duration:5,hasCloseButton:!0}),s}).then(s=>(d.getState().assignPendingTaskToFinalTask(i,s.task.id),s))}))},onSettled:()=>{w(),l(),r("/codex")}}),y=()=>{if(o.length===0){l(),r("/codex"),u.recordStarterTasksClickComplete(!1);return}u.recordStarterTasksClickComplete(!0),j()};return p?null:c?e.jsx(R,{showSidebar:!1,canShowAlert:!1,hideExtraHeaderInfo:!0,children:e.jsxs("div",{className:"mx-auto flex max-w-3xl flex-col gap-6 p-12",children:[e.jsx(E,{title:a.formatMessage({id:"wham.codexOnboardingStarterTasks.readyWhenYouAre",defaultMessage:"Ready when you are"}),description:a.formatMessage({id:"wham.codexOnboardingStarterTasks.wePickedATaskForYou",defaultMessage:"We picked a few tasks to get you started."})}),e.jsx("div",{className:"flex w-full flex-col gap-4",children:e.jsx("div",{className:"flex w-full flex-col items-center gap-3 md:flex-row",children:f.map((t,i)=>e.jsx(B,{...t,isSelected:o.includes(t.id),onSelect:()=>T(C(o,s=>{const k=s.indexOf(t.id);k!==-1?s.splice(k,1):s.push(t.id)}))},`${t.type}-${i}`))})}),e.jsx("div",{className:"text-token-text-primary py-2 text-center text-xs",children:e.jsx(n,{id:"wham.codexOnboardingStarterTasks.reviewReminder",defaultMessage:"Codex can make mistakes. Always review the code."})}),e.jsxs("div",{className:"flex w-full justify-between py-4",children:[e.jsx(h,{onClick:()=>r(-1),color:"secondary",children:e.jsx(n,{id:"wham.codexOnboardingStarterTasks.back",defaultMessage:"Back"})}),e.jsx("div",{className:"flex gap-2",children:e.jsx(h,{onClick:y,loading:S,children:o.length>0?e.jsx(n,{id:"wham.codexOnboardingStarterTasks.start",defaultMessage:"Start {tasks, plural, one {task} other {tasks}}",values:{tasks:o.length}}):e.jsx(n,{id:"wham.codexOnboardingStarterTasks.skip",defaultMessage:"Skip"})})})]})]})}):e.jsx(I,{to:"/codex"})}const we=()=>[{title:"Codex"}],Te=M(function(){return e.jsx($,{})});export{Te as default,we as meta};
//# sourceMappingURL=fknyjb4fy8qylvmh.js.map
