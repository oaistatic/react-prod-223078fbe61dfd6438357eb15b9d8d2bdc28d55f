import{r as c,j as e,M as h,a6 as x,a5 as g}from"./b8ijctzpgh0s7wpx.js";import{dI as f,S as b,aX as j,gq as d}from"./krbmwir12ubt4od1.js";import{p as w,g as v}from"./iq1x6sz8bwtm6i1f.js";import{F as N}from"./i8tm8q9bfwwc933k.js";import{W as k}from"./eeyp7d7oqudhas3m.js";import{c as y}from"./citrwydz0bgriwlc.js";import"./omp8ie1vzl40ti1z.js";import"./n3fqqr9zf79bnmr6.js";import"./nvghija6qp2cunds.js";import"./ku4zsoy6w4wkp690.js";import"./k1h56nx2kjoqc52m.js";import"./exvo283q5zxd2q6r.js";import"./jekpe1ukp5thtucq.js";import"./djd85tifm57yisqi.js";import"./c23qlyb7rng4ydyc.js";import"./ju91cj9mp2lx2yuz.js";import"./ndqm17bbs5ambnrw.js";import"./megablgldkh4lap1.js";import"./hbpbckirom363mgh.js";import"./dbalwdodzoo02ru2.js";import"./ji5qoh13hkjncrxd.js";import"./mtbwfu1a5yslb3p2.js";import"./jmanj1myc9r62cus.js";import"./eeruhkv4a43aueaw.js";import"./k00srulxk3kjmgxy.js";import"./iki1bxy2syl3zwuv.js";import"./bdclq6pa102whxi1.js";import"./be0n9593bbjhdouz.js";import"./gbxx25eoj7wtyna0.js";import"./bzsolvz1ulyrc61b.js";import"./pc2givv05uuq8g6l.js";import"./jr954f5murhu609u.js";import"./gaxh4csbc95s5l26.js";import"./e74336rl4x47z2ei.js";import"./h3axfhhn58bmthc9.js";import"./eg629yaevviy8e7x.js";import"./k5qjx4jdow04k7d2.js";import"./o6iizogkfybkxcpa.js";import"./ct6yhczwft8t5t9k.js";import"./etmxhiuvgu79utu0.js";import"./by1c2a5hsj4exnt8.js";import"./l4etgojhnqjuqlgi.js";import"./belvvj76e8q0tm6q.js";import"./eobw6ahe02v4g6se.js";import"./gvs1s366o5iglka3.js";import"./eprrfci9x6sa3hga.js";import"./n0ud0ko19kosxgev.js";import"./lik51q5yy8pdcusl.js";import"./he8ni3xt3ac4tebf.js";import"./n4yg932g6pqv5x7h.js";import"./m4qet7ipn6ha09it.js";import"./nfkxdwnvdjy1s4sn.js";import"./cwi4lsxreiklxbjv.js";const F="_glow_1o0tc_1",u={glow:F};function T({diffFiles:t,onClickFile:a,startOpen:o=!1,isActive:s=!1}){const[r,m]=c.useState(o);return t.length?e.jsxs("div",{className:y("bg-token-bg-primary flex flex-col rounded-2xl border",s?"border-token-border-heavy outline-2 outline-black/5":"border-token-border-light"),children:[e.jsx("button",{className:"cursor-pointer p-2 focus-visible:outline-0",onClick:()=>{t.length&&a?.(t[0]),(s||!r)&&m(!r)},children:e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("div",{className:"gap-1 px-2 py-1 text-sm",children:e.jsx("span",{className:"text-token-text-primary font-medium",children:e.jsx(h,{id:"wham.diff.changedFileList.title",defaultMessage:"{numFiles, plural, one {File ({numFiles})} other {Files ({numFiles})}}",values:{numFiles:t.length}})})}),r?e.jsx(f,{className:"icon"}):e.jsx(b,{className:"icon"})]})}),e.jsx(x,{initial:!o,children:r&&e.jsx(g.ul,{initial:{height:0},animate:{height:"auto"},exit:{height:0},transition:{duration:.1},className:"overflow-clip px-2 pb-2",children:t.map((n,l)=>{const p=`${n._oldFileName??l}-${n._newFileName}`;return e.jsx(C,{diffFile:n,onClick:()=>a?.(n)},p)})})})]}):null}function C({diffFile:t,onClick:a}){const o=c.useRef(null),s=c.useRef(null),r=c.useRef(null),[m,n]=c.useState(!1),l=v(t),p=`${t._oldFileName??""}-${t._newFileName}`;return e.jsx("li",{className:"group w-full",children:e.jsx(j,{label:l,labelTextAlign:"left",open:m?void 0:!1,children:e.jsxs("button",{className:"hover:bg-token-border-light after:bg-token-border-light relative flex h-10 w-full items-center justify-start rounded-lg px-2 text-sm after:absolute after:inset-x-2 after:bottom-0 after:h-[1px] after:content-[''] group-last:after:hidden focus-visible:outline-0",onClick:()=>{a?.(),requestAnimationFrame(()=>{o.current!=null&&window.clearTimeout(o.current);const i=document.querySelector(`[data-diff-header="${l}"]`);i?.classList.remove(u.glow),i?.scrollIntoView({behavior:"instant",block:"start"}),i?.classList.add(u.glow),o.current=window.setTimeout(()=>{i?.classList.remove(u.glow)},5e3)})},children:[e.jsxs("div",{className:"relative flex min-w-0 shrink pe-2",children:[e.jsx("span",{"aria-hidden":!0,className:"invisible fixed inline-block whitespace-nowrap",ref:d({axis:"width",onChange:({width:i})=>{s.current=i,r.current!=null&&n(r.current<i)}}),children:l}),e.jsx("span",{ref:d({axis:"width",onChange:({width:i})=>{r.current=i,s.current!=null&&n(i<s.current)}}),className:"inline-block max-w-full min-w-0 shrink truncate",children:l})]}),e.jsx("span",{className:"ms-auto",children:e.jsx(N,{diffFile:t,fallback:e.jsx(k,{linesAdded:t.additionLength,linesRemoved:t.deletionLength})})})]})})},p)}function Ce({assistantTurn:t,onClickFile:a,startOpen:o=!1,isActive:s=!1}){const r=w({assistantTurn:t}).map(m=>m.diffFile);return e.jsx(T,{diffFiles:r,onClickFile:a,startOpen:o,isActive:s})}export{T as ChangedFileList,Ce as ChangedFileListFromTaskTurn};
//# sourceMappingURL=ghphxlt3khml4b7d.js.map
