import{r as d,j as a,a5 as x,M as p}from"./b8ijctzpgh0s7wpx.js";import{be as C,bf as b,bg as _,bh as E,aX as I,bi as j,bj as v}from"./krbmwir12ubt4od1.js";import{at as w,eX as N,F as f,eH as M,e as m}from"./citrwydz0bgriwlc.js";import{u as R,a as S,i as y}from"./bzsolvz1ulyrc61b.js";const u="contextList";function H(){return e=>{b(e,t=>{if(!v(t)||t.name!==u)return;const s=t.data??(t.data={});s.hName=u})}}function L(e){if(typeof e!="object"||e==null||!("props"in e)||e.props==null)return;const t=e.props;if(t.node?.tagName===N)return parseInt(t.index)}const g=f.div`gap-6 border-b pb-4 my-4 context-list border-token-border-default`;function O({children:e}){const t=d.useContext(C),s=Array.isArray(e)?e:w([e]);if(s.length===0||t?.analyticsMetadata.turnIndex===void 0)return null;const[l,...i]=s,c=L(l);if(c!=null&&t!=null){const n=t?.contentReferences?.[c],r=n?.type==="image_v2",o=n?.type==="optimistic_image_citation";if(r||o)return a.jsxs(g,{className:"flex w-full",children:[a.jsx("div",{className:"grow leading-normal",children:i}),a.jsxs("div",{className:"mt-2 flex w-24 shrink-0",children:[r&&n.images[0]&&a.jsx(T,{imageRef:n,analyticsMetadata:t.analyticsMetadata}),o&&a.jsx(k,{optimisticRef:n})]})]})}return a.jsx(g,{className:"leading-normal",children:s})}const h=f.button`not-prose flex w-full h-fit	items-center justify-center overflow-hidden rounded-lg max-h-48`;function T({imageRef:e,analyticsMetadata:t}){const s=e.images[0],l=s.thumbnail_size.width/s.thumbnail_size.height,i=R(s,{width:200,height:Math.max(Math.round(200/l),112)}),{isSuccess:c}=S(i),n=_.useStore(),r=d.useRef(!1),o={...M(t),type:"context_list_image_thumbnail",image_url:i};return r.current||(r.current=!0,m.logEventWithStatsig("Search Content Reference Shown","search_content_reference_shown",o)),a.jsx(h,{onClick:()=>{n.setCurrentImage({image:s,source:E.Turn,analyticsMetadata:t}),m.logEventWithStatsig("Search Content Reference Clicked","search_content_reference_clicked",o)},children:a.jsx(x.img,{src:i,className:"w-full object-cover",alt:s.title,initial:{opacity:0},animate:c?{opacity:1}:{},whileHover:{scale:1.1,transition:y}})})}function k({optimisticRef:e}){return a.jsx(h,{children:e.status==="done"?a.jsx(I,{label:a.jsx(p,{id:"8JYwCi",defaultMessage:"Error fetching image"}),children:a.jsx(j,{className:"text-token-text-tertiary h-24 w-12"})}):a.jsx("div",{className:"bg-token-main-surface-tertiary h-24 w-full animate-pulse"})})}export{O as C,u as a,H as r};
//# sourceMappingURL=gbxx25eoj7wtyna0.js.map
