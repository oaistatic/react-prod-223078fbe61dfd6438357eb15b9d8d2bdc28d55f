import{i as ct,r as m,j as i,a5 as D,c as w,a6 as ft,ad as ut}from"./b8ijctzpgh0s7wpx.js";import{ik as Te,il as dt,gN as Ae,im as N,io as mt,ip as xt,iq as pt,ir as ht,f$ as gt,b3 as vt,is as wt,it as bt,iu as Re,iv as yt,iw as je,ix as Qe,g2 as _t,iy as St,gy as Tt,gz as Rt,gv as jt,g1 as At}from"./krbmwir12ubt4od1.js";import{u as Et}from"./nvghija6qp2cunds.js";import{P as et,T as Nt,b as Pt}from"./ku4zsoy6w4wkp690.js";import{a6 as tt,cT as st,aY as nt,gz as Ct,c as te,en as It,j as Dt,aS as Ft,u as Ot}from"./citrwydz0bgriwlc.js";import{T as Mt}from"./k1h56nx2kjoqc52m.js";function kt({suggestionData:t,composerController:e}){const s=ct(),f=s.formatMessage(Te.researchSuggestionInitial),d=m.useMemo(()=>[s.formatMessage(Te.deepResearchPlaceholderBullet1),s.formatMessage(Te.deepResearchPlaceholderBullet2),s.formatMessage(Te.deepResearchPlaceholderBullet3)],[s]);return i.jsx(dt,{composerController:e,initialSuggestion:f,bulletPoints:d})}const Ye={type:"spring",stiffness:48.7,damping:13.54,mass:1};function vs({enabled:t,children:e,...s}){const n=Ae();return i.jsxs(D.div,{initial:{minHeight:0},animate:{minHeight:t?"142px":0},exit:{minHeight:0},transition:n?N:Ye,className:"flex flex-col justify-start",children:[e,t&&i.jsx(kt,{...s})]})}const it=.0025;function Bt({composerController:t,composerType:e,renderInComposer:s}){const n=m.useContext(tt),f=st(n),d=nt(t.store,l=>l.controlsDisabled),a=mt(l=>{l.contentRect&&t.setWaveWidth(l.contentRect.width)}),r=m.useCallback((l,c,u)=>{if(!(t instanceof et))return;const h=t.getSelectionStart();t.setControlsDisabled(!1),requestAnimationFrame(()=>{const{state:p,dispatch:v}=t.view;v(p.tr.insertText(l,h,h)),requestAnimationFrame(()=>{t.setSelection(h+l.length)}),t.usedDictation=!0,t.dictationEdited=!1,t.dictationAssetPointer=c??null,t.dictationAssetTTL=u??null})},[t]);return{whisperControls:d?i.jsx(xt,{initialValue:it,onSuccess:r,onWaveformDataUpdate:t.setWaveformData,onExit:()=>{t.setControlsDisabled(!1)},visualTreatment:e,buttonClassName:"h-9 min-h-9 w-9 min-w-9"}):i.jsxs(i.Fragment,{children:[!f&&i.jsx(pt,{size:"small",onExit:()=>{t.setControlsDisabled(!0)},visualTreatment:e,buttonClassName:"h-9 min-h-9 w-9 min-w-9"}),s?.()]}),waveContainerRef:a,handleTranscriptionSuccess:r}}const Lt=({composerController:t,placeholder:e,vanguard:s,composerConfigMenuType:n="tools",disableAutoFocus:f=!1,textareaMaxHeightClassName:d="max-h-[25dvh]"})=>{const a=m.useRef(null),r=m.useRef(null),{isMobileOS:x}=ht(),l=m.useRef(!1);return m.useEffect(()=>{if(l.current)return;if(!(t instanceof et))throw new Error(`Expected instance of ProseMirrorComposerController but got ${t.constructor.name}`);l.current=!0;const c=r.current;if(c!=null){const{value:u,selectionStart:h,selectionEnd:p}=c;t.view.dispatch(t.view.state.tr.insertText(u)),t.view.dispatch(t.view.state.tr.setSelection(Mt.create(t.view.state.doc,h+1,p+1))),c.style.display="none",c.value=""}a.current.appendChild(t.view.dom),t.view.dom.id=Nt,t.view.dom.dataset.virtualkeyboard="true",Pt(t.view.dom),!gt()&&!Ct()&&!f&&requestAnimationFrame(()=>{t.view.focus()})},[t,f]),m.useEffect(()=>{t.setPlaceholder(e)},[e,t]),m.useEffect(()=>{t.logPageMount()},[]),i.jsxs("div",{ref:a,onKeyDown:vt.prefetch,className:te([bt["prosemirror-parent"],"text-token-text-primary",d,"max-h-52",n!=="none"&&"-mx-3 px-3","overflow-auto [scrollbar-width:thin]",It()?"firefox":"default-browser"],n!=="none"&&"vertical-scroll-fade-mask",s&&"min-h-12 pe-3"),children:[i.jsx("textarea",{className:te("text-token-text-primary placeholder:text-token-text-tertiary block h-10 w-full resize-none border-0 bg-transparent px-0 py-2 ring-0 placeholder:ps-px"),autoFocus:!x,placeholder:e,ref:r,"data-virtualkeyboard":!0}),i.jsx(wt,{scriptSrc:"window.__oai_logHTML?window.__oai_logHTML():window.__oai_SSR_HTML=window.__oai_SSR_HTML||Date.now();requestAnimationFrame((function(){window.__oai_logTTI?window.__oai_logTTI():window.__oai_SSR_TTI=window.__oai_SSR_TTI||Date.now()}))"})]})},Ze=48,Wt="/c/:conversationId",ws=t=>{"use forget";const e=w.c(117),{disableAutoFocus:s,isBigBoxModeActive:n,isTemporaryChat:f,placeholder:d,composerController:a,children:r,isExpandedByDefault:x,textareaMaxHeightClassName:l,onSubmit:c,shouldUseBigComposer:u}=t,h=s===void 0?!1:s,p=n===void 0?!1:n,v=x===void 0?!1:x;let P,C,y,S,T,b,R,j;e[0]!==r?(b=null,S=null,y=[],j=[],T=[],R=null,C=null,P=null,m.Children.forEach(r,o=>{if(m.isValidElement(o))if(o.type===Ut){if(b!=null)throw new Error("PromptTextareaComposer only accepts a single submit button");b=o}else if(o.type===Gt){if(S!=null)throw new Error("PromptTextareaComposer only accepts a single header action");S=o}else o.type===Kt||o.type===qt?y.push(o):o.type===Xt?j.push(o):o.type===Jt?T.push(o):o.type===Yt?R=o:o.type===zt?C=o:o.type===Vt&&(P=o)}),e[0]=r,e[1]=P,e[2]=C,e[3]=y,e[4]=S,e[5]=T,e[6]=b,e[7]=R,e[8]=j):(P=e[1],C=e[2],y=e[3],S=e[4],T=e[5],b=e[6],R=e[7],j=e[8]);const Ee=m.useRef(null),Ge=m.useRef(null);let ne;e[9]!==a?(ne={composerController:a,composerType:"legacy"},e[9]=a,e[10]=ne):ne=e[10];const{waveContainerRef:Ne}=Bt(ne),{controlsDisabled:Pe,waveformData:ie,waveWidth:Ce}=nt(a.store),g=Re(Qt),I=Re(Zt),Je=m.useRef(!1),ae=Ae();let oe,re;e[11]!==a?(oe=o=>{const E=a.subscribe("focus",o),_=a.subscribe("blur",o);return()=>{_(),E()}},re=()=>a.isFocused(),e[11]=a,e[12]=oe,e[13]=re):(oe=e[12],re=e[13]);const le=m.useSyncExternalStore(oe,re,es),at=ts,ot=Dt(),Ie=!Ft(ot);let ce,fe;e[14]!==a?(ce=()=>a.subscribe("change",()=>{Je.current=!a.isEmpty()}),fe=[a],e[14]=a,e[15]=ce,e[16]=fe):(ce=e[15],fe=e[16]),m.useEffect(ce,fe);let ue,de;e[17]!==g||e[18]!==le||e[19]!==I?(de=()=>{le&&!g&&requestAnimationFrame(()=>{requestAnimationFrame(()=>{I(!0)})})},ue=[le,g,I],e[17]=g,e[18]=le,e[19]=I,e[20]=ue,e[21]=de):(ue=e[20],de=e[21]),m.useEffect(de,ue);const A=Re(ss),De=m.useRef(A);let me,xe;e[22]!==A?(me=()=>{De.current=A},xe=[A],e[22]=A,e[23]=me,e[24]=xe):(me=e[23],xe=e[24]),Ot(me,xe);const se=Re(ns),rt=m.useRef(null);let pe;e[25]!==v||e[26]!==I?(pe=o=>{const E=_=>{v||Je.current||o?.contains(_.target)||at(_)||I(!1)};return document.addEventListener("click",E),rt.current=o,()=>{document.removeEventListener("click",E)}},e[25]=v,e[26]=I,e[27]=pe):pe=e[27];const Fe=pe;let he;e[28]!==c?(he=o=>{o.preventDefault(),c(o)},e[28]=c,e[29]=he):he=e[29];const Oe=he,F=y.length>0,Me=j.length>0,[ke,lt]=m.useState(0),Be=ae?N:je,Le=u&&"min-h-52";let O;e[30]!==Le?(O=te("relative flex w-full flex-auto flex-col",Le),e[30]=Le,e[31]=O):O=e[31];let M;e[32]!==T?(M=T.length>0&&i.jsx("div",{className:"mb-2 flex flex-col gap-2 has-data-fullbleed:-mt-1 has-data-fullbleed:w-[calc(100%+1rem)]",children:T}),e[32]=T,e[33]=M):M=e[33];const We=g?1:0;let k;e[34]!==We?(k={opacity:We},e[34]=We,e[35]=k):k=e[35];const He=g?1:0;let B;e[36]!==He?(B={opacity:He},e[36]=He,e[37]=B):B=e[37];let ge;e[38]===Symbol.for("react.memo_cache_sentinel")?(ge={opacity:0},e[38]=ge):ge=e[38];const $e=ae?N:yt;let L;e[39]!==S||e[40]!==k||e[41]!==B||e[42]!==$e?(L=i.jsx("div",{className:"items-top flex justify-center",children:i.jsx(D.div,{initial:k,animate:B,exit:ge,transition:$e,children:S})}),e[39]=S,e[40]=k,e[41]=B,e[42]=$e,e[43]=L):L=e[43];let ve;e[44]===Symbol.for("react.memo_cache_sentinel")?(ve={marginBottom:-18,translateX:0},e[44]=ve):ve=e[44];let we,be;e[45]===Symbol.for("react.memo_cache_sentinel")?(we={translateX:0},be={translateY:-7},e[45]=we,e[46]=be):(we=e[45],be=e[46]);const Ve=ae?N:je,ze=p&&g;let W;e[47]!==a||e[48]!==h||e[49]!==p||e[50]!==g||e[51]!==Pe||e[52]!==d||e[53]!==l||e[54]!==Ce||e[55]!==ie?(W=Pe?ie?i.jsx(_t,{className:p&&g?"mt-12":void 0,waveform:ie,containerWidth:Ce,scaleFactor:10,initialValue:it}):null:i.jsx(Lt,{composerController:a,placeholder:d,disableAutoFocus:h,textareaMaxHeightClassName:l,vanguard:!0}),e[47]=a,e[48]=h,e[49]=p,e[50]=g,e[51]=Pe,e[52]=d,e[53]=l,e[54]=Ce,e[55]=ie,e[56]=W):W=e[56];let H;e[57]!==W?(H=i.jsx("div",{className:"max-w-full min-w-0 flex-1",children:W}),e[57]=W,e[58]=H):H=e[58];let $;e[59]!==H||e[60]!==Ne?($=i.jsx("div",{className:"flex min-h-12 items-start",ref:Ne,children:H}),e[59]=H,e[60]=Ne,e[61]=$):$=e[61];let V;e[62]!==a||e[63]!==C||e[64]!==ze||e[65]!==$?(V=i.jsxs(Ht,{composerController:a,enabled:ze,children:[$,C]}),e[62]=a,e[63]=C,e[64]=ze,e[65]=$,e[66]=V):V=e[66];let z;e[67]!==Ve||e[68]!==V?(z=i.jsx(D.div,{initial:ve,onPointerDown:is,animate:we,style:be,transition:Ve,className:"relative flex-auto bg-transparent pt-1.5",children:V}),e[67]=Ve,e[68]=V,e[69]=z):z=e[69];let U;e[70]!==L||e[71]!==z?(U=i.jsxs("div",{className:"relative mx-2.5 grid grid-cols-[auto_minmax(0,1fr)]",children:[L,z]}),e[70]=L,e[71]=z,e[72]=U):U=e[72];let ye;e[73]===Symbol.for("react.memo_cache_sentinel")?(ye=i.jsx("div",{className:"justify-content-end relative ms-2 flex w-full flex-auto flex-col",children:i.jsx("div",{className:"flex-auto"})}),e[73]=ye):ye=e[73];const Ue=g&&(F||b)?Ze:0;let q;e[74]!==Ue?(q={height:Ue},e[74]=Ue,e[75]=q):q=e[75];const qe=g&&(F||b)?Ze:0;let K;e[76]!==qe?(K={height:qe},e[76]=qe,e[77]=K):K=e[77];const Ke=ae?N:je;let X;e[78]!==q||e[79]!==K||e[80]!==Ke?(X=i.jsx(D.div,{initial:q,animate:K,transition:Ke}),e[78]=q,e[79]=K,e[80]=Ke,e[81]=X):X=e[81];let Y;e[82]!==Be||e[83]!==O||e[84]!==M||e[85]!==U||e[86]!==X?(Y=i.jsxs(D.div,{transition:Be,className:O,children:[M,U,ye,X]}),e[82]=Be,e[83]=O,e[84]=M,e[85]=U,e[86]=X,e[87]=Y):Y=e[87];let G;e[88]!==y||e[89]!==F||e[90]!==Me||e[91]!==g||e[92]!==Ie||e[93]!==A||e[94]!==se||e[95]!==b||e[96]!==ke||e[97]!==j?(G=(F||!!b)&&i.jsx("div",{className:"bg-primary-surface-primary absolute start-2.5 end-0 bottom-2.5 z-2 flex items-center",children:i.jsxs("div",{className:"w-full",children:[F&&g&&i.jsx("div",{"data-testid":"composer-footer-actions",className:te("flex items-center",Ie&&"max-xs:gap-1 gap-2 overflow-x-auto [scrollbar-width:none]",A&&"[--force-hide-label:none]"),ref:o=>Qe({debounce:!0,target:o,axis:"width",onChange:E=>{const{width:_}=E;o&&(De.current?De.current&&Ee.current!==null&&_>=Ee.current&&se(!1):Ge.current!==null&&_<Ge.current?se(!0):(Ee.current=o.scrollWidth,se(o.scrollWidth>o.clientWidth)))}}),style:{marginInlineEnd:`${ke+24}px`},children:y}),i.jsxs("div",{className:"absolute end-2.5 bottom-0 flex items-center gap-2","data-testid":"composer-trailing-actions",ref:o=>Qe({target:o,axis:"width",onChange:E=>{const{width:_}=E;lt(_)}}),children:[Me&&i.jsx("div",{className:"relative ms-1",children:j}),b]})]})}),e[88]=y,e[89]=F,e[90]=Me,e[91]=g,e[92]=Ie,e[93]=A,e[94]=se,e[95]=b,e[96]=ke,e[97]=j,e[98]=G):G=e[98];let J;e[99]!==Y||e[100]!==G?(J=i.jsxs("div",{className:"relative flex w-full items-end px-2.5 py-2.5",children:[Y,G]}),e[99]=Y,e[100]=G,e[101]=J):J=e[101];let Q;e[102]!==P||e[103]!==f||e[104]!==J?(Q=i.jsxs($t,{isTemporaryChat:f,children:[J,P]}),e[102]=P,e[103]=f,e[104]=J,e[105]=Q):Q=e[105];const Xe=!!R;let _e;e[106]===Symbol.for("react.memo_cache_sentinel")?(_e=i.jsx(St,{className:"w-full"}),e[106]=_e):_e=e[106];let Z;e[107]!==R?(Z=i.jsx(Tt,{children:i.jsx(Rt,{side:"bottom",align:"start",sideOffset:12,onOpenAutoFocus:as,children:R})}),e[107]=R,e[108]=Z):Z=e[108];let ee;e[109]!==Xe||e[110]!==Z?(ee=i.jsxs(jt,{open:Xe,children:[_e,Z]}),e[109]=Xe,e[110]=Z,e[111]=ee):ee=e[111];let Se;return e[112]!==Fe||e[113]!==Oe||e[114]!==Q||e[115]!==ee?(Se=i.jsxs("form",{ref:Fe,className:"w-full [view-transition-name:var(--vt-composer)]",onSubmit:Oe,"data-type":"unified-composer",children:[Q,ee]}),e[112]=Fe,e[113]=Oe,e[114]=Q,e[115]=ee,e[116]=Se):Se=e[116],Se};function Ht(t){"use forget";const e=w.c(10),{composerController:s,children:n,enabled:f}=t,d=Ae(),a=f?"142px":0;let r;e[0]!==a?(r={minHeight:a},e[0]=a,e[1]=r):r=e[1];let x;e[2]===Symbol.for("react.memo_cache_sentinel")?(x={minHeight:0},e[2]=x):x=e[2];const l=d?N:je;let c;e[3]!==s?(c=h=>{s.isFocused()?h.preventDefault():s.focus()},e[3]=s,e[4]=c):c=e[4];let u;return e[5]!==n||e[6]!==r||e[7]!==l||e[8]!==c?(u=i.jsx(D.div,{initial:!1,animate:r,exit:x,transition:l,className:"flex flex-col justify-start",onClick:c,children:n}),e[5]=n,e[6]=r,e[7]=l,e[8]=c,e[9]=u):u=e[9],u}function $t(t){"use forget";const e=w.c(8),{children:s,isTemporaryChat:n}=t,f=Et(),d=m.useContext(tt),a=st(d),r=n?"dark bg-[#303030]":"bg-token-bg-primary dark:bg-[#303030]";let x;e[0]!==r?(x=te("shadow-short flex w-full cursor-text flex-col items-center justify-center overflow-clip rounded-[28px] bg-clip-padding contain-inline-size",r),e[0]=r,e[1]=x):x=e[1];const l=x,c=`
    flex w-full cursor-text flex-col items-center justify-center
    border-t border-gray-100
    bg-token-bg-primary dark:bg-[#303030]
    bg-clip-padding contain-inline-size
    overflow-clip`;let u;e[2]!==f?(u=v=>{!f.isFocused()&&!v.defaultPrevented&&f.focus()},e[2]=f,e[3]=u):u=e[3];const h=a?c:l;let p;return e[4]!==s||e[5]!==u||e[6]!==h?(p=i.jsx(At,{onClick:u,className:h,children:s}),e[4]=s,e[5]=u,e[6]=h,e[7]=p):p=e[7],p}const Vt=t=>{"use forget";const e=w.c(17),{children:s}=t,n=Ae();let f;e[0]!==n?(f=n?N:{opacity:{delay:.2},default:Ye},e[0]=n,e[1]=f):f=e[1];const d=f;let a;e[2]!==n?(a=n?N:{opacity:{delay:0},default:Ye},e[2]=n,e[3]=a):a=e[3];const r=a;let x;e[4]===Symbol.for("react.memo_cache_sentinel")?(x={opacity:0,height:0,y:"-28px"},e[4]=x):x=e[4];let l;e[5]!==d?(l={opacity:1,y:0,height:"56px",transition:d},e[5]=d,e[6]=l):l=e[6];let c;e[7]!==r?(c={opacity:0,y:"-28px",height:0,transition:r},e[7]=r,e[8]=c):c=e[8];let u;e[9]!==l||e[10]!==c?(u={initial:x,animate:l,exit:c},e[9]=l,e[10]=c,e[11]=u):u=e[11];const h=u;let p;e[12]!==s||e[13]!==h?(p=s&&i.jsx(D.div,{variants:h,initial:"initial",animate:"animate",exit:"exit",className:"relative w-full",children:s}),e[12]=s,e[13]=h,e[14]=p):p=e[14];let v;return e[15]!==p?(v=i.jsx(ft,{children:p}),e[15]=p,e[16]=v):v=e[16],v},zt=t=>{"use forget";const e=w.c(2),{children:s}=t;let n;return e[0]!==s?(n=i.jsx(i.Fragment,{children:s}),e[0]=s,e[1]=n):n=e[1],n},Ut=t=>{"use forget";const e=w.c(2),{children:s}=t;let n;return e[0]!==s?(n=i.jsx("div",{className:"ms-auto flex items-center gap-1.5",onPointerDown:os,children:s}),e[0]=s,e[1]=n):n=e[1],n},qt=t=>{"use forget";const e=w.c(2),{children:s}=t;let n;return e[0]!==s?(n=s?i.jsx(i.Fragment,{children:s}):null,e[0]=s,e[1]=n):n=e[1],n},Kt=t=>{"use forget";const e=w.c(2),{children:s}=t;let n;return e[0]!==s?(n=i.jsx("div",{onPointerDown:rs,children:s}),e[0]=s,e[1]=n):n=e[1],n},Xt=t=>{"use forget";const e=w.c(2),{children:s}=t;let n;return e[0]!==s?(n=i.jsx("div",{onPointerDown:ls,children:s}),e[0]=s,e[1]=n):n=e[1],n},Yt=t=>{"use forget";const e=w.c(2),{children:s}=t;let n;return e[0]!==s?(n=i.jsx("div",{onPointerDown:cs,children:s}),e[0]=s,e[1]=n):n=e[1],n},Gt=t=>{"use forget";const e=w.c(2),{children:s}=t;let n;return e[0]!==s?(n=i.jsx("div",{onPointerDown:fs,children:s}),e[0]=s,e[1]=n):n=e[1],n},Jt=t=>{"use forget";const e=w.c(5),{children:s,width:n}=t,d=(n===void 0?"full":n)==="fit"?"w-fit":"w-full";let a;e[0]!==d?(a=te(d),e[0]=d,e[1]=a):a=e[1];let r;return e[2]!==s||e[3]!==a?(r=i.jsx("div",{className:a,onPointerDown:us,children:s}),e[2]=s,e[3]=a,e[4]=r):r=e[4],r};function Qt(t){return t.isExpanded}function Zt(t){return t.setIsExpanded}function es(){return!1}function ts(t){if(t.target instanceof HTMLElement){if(t.target.dataset.historyItemLink||t.target.parentElement?.dataset.historyItemLink)return!0;const e=t.target?.closest("a[href]");if(e instanceof HTMLAnchorElement)return!!ut({path:Wt,end:!1},new URL(e.href).pathname)}return!1}function ss(t){return t.isVisuallyOverflowing}function ns(t){return t.setIsVisuallyOverflowing}function is(t){return t.stopPropagation()}function as(t){return t.preventDefault()}function os(t){return t.stopPropagation()}function rs(t){return t.stopPropagation()}function ls(t){return t.stopPropagation()}function cs(t){return t.stopPropagation()}function fs(t){return t.stopPropagation()}function us(t){return t.stopPropagation()}export{qt as B,ws as C,Kt as F,Jt as H,it as I,Lt as R,Ut as S,vs as a,Yt as b,zt as c,kt as d,Bt as u};
//# sourceMappingURL=dbalwdodzoo02ru2.js.map
